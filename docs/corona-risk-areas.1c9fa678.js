(function () {function ug(a){return a&&a.__esModule?{d:a.default}:{d:a}}var Zd={};var Tc={};var rc={};var Da=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();function ij(t){t.stopPropagation()}var mb={PROPERTYCHANGE:"propertychange"};var Uc={};var $d={};var _d=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function Ea(){return!0}function vb(){return!1}function wb(){}function jj($){var r,e,t,o=!1;return function(){var p=Array.prototype.slice.call(arguments);return o&&this===t&&Sb(p,e)||(o=!0,t=this,e=p,r=$.apply(this,arguments)),r}}function kj(r,e,n){for(var t,$,u=n||Rb,o=0,l=r.length,i=!1;o<l;)($=+u(r[t=o+(l-o>>1)],e))<0?o=t+1:(l=t,i=!$);return i?o:~o}function Rb(r,e){return r>e?1:r<e?-1:0}function sc(r,e){return r.indexOf(e)>=0}function vg(r,e,n){var t=r.length;if(r[0]<=e)return 0;if(e<=r[t-1])return t-1;var $=void 0;if(n>0){for($=1;$<t;++$)if(r[$]<e)return $-1}else if(n<0){for($=1;$<t;++$)if(r[$]<=e)return $}else for($=1;$<t;++$){if(r[$]==e)return $;if(r[$]<e)return r[$-1]-e<e-r[$]?$-1:$}return t-1}function lj(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function Ja(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,$=0;$<t;$++)r[r.length]=n[$]}function Sb(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}var Aa="function"==typeof Object.assign?Object.assign:function(e,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,o=arguments.length;n<o;++n){var $=arguments[n];if(null!=$)for(var s in $)$.hasOwnProperty(s)&&(t[s]=$[s])}return t};function Tb(e){for(var r in e)delete e[r]}var ae="function"==typeof Object.values?Object.values:function(e){var r=[];for(var t in e)r.push(e[t]);return r};function Ub(e){var r;for(r in e)return!1;return!r}var mj=$d&&$d.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Vb=function(e){function t(t){var n=e.call(this)||this;return n.eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return mj(t,e),t.prototype.addEventListener=function(e,t){if(e&&t){var n=this.listeners_||(this.listeners_={}),i=n[e]||(n[e]=[]);-1===i.indexOf(t)&&i.push(t)}},t.prototype.dispatchEvent=function(e){var t="string"==typeof e?new Da(e):e,n=t.type;t.target||(t.target=this.eventTarget_||this);var i,r=this.listeners_&&this.listeners_[n];if(r){var s=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});n in s||(s[n]=0,o[n]=0),++s[n];for(var p=0,a=r.length;p<a;++p)if(!1===(i="handleEvent"in r[p]?r[p].handleEvent(t):r[p].call(this,t))||t.propagationStopped){i=!1;break}if(--s[n],0===s[n]){var l=o[n];for(delete o[n];l--;)this.removeEventListener(n,wb);delete s[n]}return i}},t.prototype.disposeInternal=function(){this.listeners_&&Tb(this.listeners_)},t.prototype.getListeners=function(e){return this.listeners_&&this.listeners_[e]||void 0},t.prototype.hasListener=function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)},t.prototype.removeEventListener=function(e,t){var n=this.listeners_&&this.listeners_[e];if(n){var i=n.indexOf(t);-1!==i&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[i]=wb,++this.pendingRemovals_[e]):(n.splice(i,1),0===n.length&&delete this.listeners_[e]))}},t}(_d);$d.default=Vb;var ba={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function ea(e,t,n,$,r){if($&&$!==e&&(n=n.bind($)),r){var i=n;n=function(){e.removeEventListener(t,n),i.apply(this,arguments)}}var s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function tc(e,t,n,$){return ea(e,t,n,$,!0)}function ia(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Tb(e))}var nj=Uc&&Uc.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),be=function(e){function t(){var t=e.call(this)||this;return t.revision_=0,t}return nj(t,e),t.prototype.changed=function(){++this.revision_,this.dispatchEvent(ba.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.on=function(e,t){if(Array.isArray(e)){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=ea(this,e[o],t);return n}return ea(this,e,t)},t.prototype.once=function(e,t){var r;if(Array.isArray(e)){var n=e.length;r=new Array(n);for(var o=0;o<n;++o)r[o]=tc(this,e[o],t)}else r=tc(this,e,t);return t.ol_key=r,r},t.prototype.un=function(e,t){var r=t.ol_key;if(r)wg(r);else if(Array.isArray(e))for(var n=0,o=e.length;n<o;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)},t}(Vb);function wg(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)ia(e[t]);else ia(e)}Uc.unByKey=wg,Uc.default=be;function ca(){return function(){throw new Error("Unimplemented abstract method.")}()}var oj=0;function ga(t){return t.ol_uid||(t.ol_uid=String(++oj))}var ce="6.4.3";var xg=rc&&rc.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function h(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(h.prototype=r.prototype,new h)}}(),de=function(e){function t(t,r,h){var n=e.call(this,t)||this;return n.key=r,n.oldValue=h,n}return xg(t,e),t}(Da);rc.ObjectEvent=de;var Ka=function(e){function t(t){var r=e.call(this)||this;return ga(r),r.values_=null,void 0!==t&&r.setProperties(t),r}return xg(t,e),t.prototype.get=function(e){var t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&Aa({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(e,t){var r;r=oa(e),this.dispatchEvent(new de(r,e,t)),r=mb.PROPERTYCHANGE,this.dispatchEvent(new de(r,e,t))},t.prototype.set=function(e,t,r){var h=this.values_||(this.values_={});if(r)h[e]=t;else{var n=h[e];h[e]=t,n!==t&&this.notify(e,n)}},t.prototype.setProperties=function(e,t){for(var r in e)this.set(r,e[r],t)},t.prototype.unset=function(e,t){if(this.values_&&e in this.values_){var r=this.values_[e];delete this.values_[e],Ub(this.values_)&&(this.values_=null),t||this.notify(e,r)}},t}(be),ee={};function oa(e){return ee.hasOwnProperty(e)?ee[e]:ee[e]="change:"+e}rc.getChangeEventType=oa,rc.default=Ka;function ja(r,$){if(!r)throw new ge($)}var fe={};var pj=fe&&fe.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),ge=function(t){function r(r){var e=this,o="Assertion failed. See https://openlayers.org/en/"+("latest"===ce?ce:"v"+ce.split("-")[0])+"/doc/errors/#"+r+" for details.";return(e=t.call(this,o)||this).code=r,e.name="AssertionError",e.message=o,e}return pj(r,t),r}(Error);fe.default=ge;var qj=Tc&&Tc.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pa=function(e){function t(t){var r=e.call(this)||this;if(r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addEventListener(oa(r.geometryName_),r.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){var n=t;r.setGeometry(n)}else{var o=t;r.setProperties(o)}return r}return qj(t,e),t.prototype.clone=function(){var e=new t(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&e.setGeometry(r.clone());var n=this.getStyle();return n&&e.setStyle(n),e},t.prototype.getGeometry=function(){return this.get(this.geometryName_)},t.prototype.getId=function(){return this.id_},t.prototype.getGeometryName=function(){return this.geometryName_},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.handleGeometryChange_=function(){this.changed()},t.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(ia(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=ea(e,ba.CHANGE,this.handleGeometryChange_,this)),this.changed()},t.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},t.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?yg(e):void 0,this.changed()},t.prototype.setId=function(e){this.id_=e,this.changed()},t.prototype.setGeometryName=function(e){this.removeEventListener(oa(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=e,this.addEventListener(oa(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},t}(Ka);function yg(e){return"function"==typeof e?e:(Array.isArray(e)?t=e:(ja("function"==typeof e.getZIndex,41),t=[e]),function(){return t});var t}Tc.createStyleFunction=yg,Tc.default=Pa;var he={};var ie={};var Ba={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},_a={};_a[Ba.DEGREES]=2*Math.PI*6370997/360,_a[Ba.FEET]=.3048,_a[Ba.METERS]=1,_a[Ba.USFEET]=1200/3937;var a=new Array(6);function Qa(){return[1,0,0,1,0,0]}function rj(e,$,t,r,o,p,n){return e[0]=$,e[1]=t,e[2]=r,e[3]=o,e[4]=p,e[5]=n,e}function sj(e,$){return e[0]=$[0],e[1]=$[1],e[2]=$[2],e[3]=$[3],e[4]=$[4],e[5]=$[5],e}function ra(e,$){var t=$[0],r=$[1];return $[0]=e[0]*t+e[2]*r+e[4],$[1]=e[1]*t+e[3]*r+e[5],$}function tj(e,$,t){return rj(e,$,0,0,t,0,0)}function xb(e,$,t,r,o,p,n,A){var P=Math.sin(p),s=Math.cos(p);return e[0]=r*s,e[1]=o*P,e[2]=-r*P,e[3]=o*s,e[4]=n*r*s-A*r*P+$,e[5]=n*o*P+A*o*s+t,e}function zg(e,$){var t=uj($);ja(0!==t,32);var r=$[0],o=$[1],p=$[2],n=$[3],A=$[4],P=$[5];return e[0]=n/t,e[1]=-o/t,e[2]=-p/t,e[3]=r/t,e[4]=(p*P-n*A)/t,e[5]=-(r*P-o*A)/t,e}function uj(e){return e[0]*e[3]-e[1]*e[2]}function vj(e){return"matrix("+e.join(", ")+")"}function sa(r){for(var t=bb(),e=0,$=r.length;e<$;++e)ke(t,r[e]);return t}function wj(r,t,e){return nb(Math.min.apply(null,r),Math.min.apply(null,t),Math.max.apply(null,r),Math.max.apply(null,t),e)}function Vc(r,t,e){return e?(e[0]=r[0]-t,e[1]=r[1]-t,e[2]=r[2]+t,e[3]=r[3]+t,e):[r[0]-t,r[1]-t,r[2]+t,r[3]+t]}function Ag(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r.slice()}function yb(r,t,e){var $,i;return($=t<r[0]?r[0]-t:r[2]<t?t-r[2]:0)*$+(i=e<r[1]?r[1]-e:r[3]<e?e-r[3]:0)*i}function ab(r,t){return r[0]<=t[0]&&t[2]<=r[2]&&r[1]<=t[1]&&t[3]<=r[3]}function Bg(r,t,e){return r[0]<=t&&t<=r[2]&&r[1]<=e&&e<=r[3]}function je(r,t){var e=r[0],$=r[1],i=r[2],o=r[3],n=t[0],p=t[1],a=ta.UNKNOWN;return n<e?a|=ta.LEFT:n>i&&(a|=ta.RIGHT),p<$?a|=ta.BELOW:p>o&&(a|=ta.ABOVE),a===ta.UNKNOWN&&(a=ta.INTERSECTING),a}function bb(){return[1/0,1/0,-1/0,-1/0]}function nb(r,t,e,$,i){return i?(i[0]=r,i[1]=t,i[2]=e,i[3]=$,i):[r,t,e,$]}function Wb(r){return nb(1/0,1/0,-1/0,-1/0,r)}function Wc(r,t){var e=r[0],$=r[1];return nb(e,$,e,$,t)}function xj(r,t){return zj(Wb(t),r)}function Cg(r,t,e,$,i){return Dg(Wb(i),r,t,e,$)}function uc(r,t){return r[0]==t[0]&&r[2]==t[2]&&r[1]==t[1]&&r[3]==t[3]}function yj(r,t){return t[0]<r[0]&&(r[0]=t[0]),t[2]>r[2]&&(r[2]=t[2]),t[1]<r[1]&&(r[1]=t[1]),t[3]>r[3]&&(r[3]=t[3]),r}function ke(r,t){t[0]<r[0]&&(r[0]=t[0]),t[0]>r[2]&&(r[2]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[1]>r[3]&&(r[3]=t[1])}function zj(r,t){for(var e=0,$=t.length;e<$;++e)ke(r,t[e]);return r}function Dg(r,t,e,$,i){for(;e<$;e+=i)Aj(r,t[e],t[e+1]);return r}function Aj(r,t,e){r[0]=Math.min(r[0],t),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],t),r[3]=Math.max(r[3],e)}function Eg(r,t){var e;return(e=t(Xb(r)))?e:(e=t(vc(r)))?e:(e=t(xc(r)))?e:(e=t(wc(r)))||!1}function Bj(r){var t=0;return le(r)||(t=Fa(r)*ob(r)),t}function Xb(r){return[r[0],r[1]]}function vc(r){return[r[2],r[1]]}function Yb(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function Fg(r,t,e,$,i){var o=t*$[0]/2,n=t*$[1]/2,p=Math.cos(e),a=Math.sin(e),x=o*p,D=o*a,Q=n*p,s=n*a,c=r[0],u=r[1],d=c-x+s,g=c-x-s,m=c+x-s,f=c+x+s,h=u-D-Q,l=u-D+Q,E=u+D+Q,R=u+D-Q;return nb(Math.min(d,g,m,f),Math.min(h,l,E,R),Math.max(d,g,m,f),Math.max(h,l,E,R),i)}function ob(r){return r[3]-r[1]}function Cj(r,t,e){var $=e||bb();return Ga(r,t)?(r[0]>t[0]?$[0]=r[0]:$[0]=t[0],r[1]>t[1]?$[1]=r[1]:$[1]=t[1],r[2]<t[2]?$[2]=r[2]:$[2]=t[2],r[3]<t[3]?$[3]=r[3]:$[3]=t[3]):Wb($),$}function wc(r){return[r[0],r[3]]}function xc(r){return[r[2],r[3]]}function Fa(r){return r[2]-r[0]}function Ga(r,t){return r[0]<=t[2]&&r[2]>=t[0]&&r[1]<=t[3]&&r[3]>=t[1]}function le(r){return r[2]<r[0]||r[3]<r[1]}function Dj(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r}function Gg(r,t){var e=(r[2]-r[0])/2*(t-1),$=(r[3]-r[1])/2*(t-1);r[0]-=e,r[2]+=e,r[1]-=$,r[3]+=$}function Ej(r,t,e){var $=!1,i=je(r,t),o=je(r,e);if(i===ta.INTERSECTING||o===ta.INTERSECTING)$=!0;else{var n=r[0],p=r[1],a=r[2],x=r[3],D=t[0],Q=t[1],s=e[0],c=e[1],u=(c-Q)/(s-D),d=void 0,g=void 0;o&ta.ABOVE&&!(i&ta.ABOVE)&&($=(d=s-(c-x)/u)>=n&&d<=a),$||!(o&ta.RIGHT)||i&ta.RIGHT||($=(g=c-(s-a)*u)>=p&&g<=x),$||!(o&ta.BELOW)||i&ta.BELOW||($=(d=s-(c-p)/u)>=n&&d<=a),$||!(o&ta.LEFT)||i&ta.LEFT||($=(g=c-(s-n)*u)>=p&&g<=x)}return $}function Fj(r,t,e,$){var i=[];if($>1)for(var o=r[2]-r[0],n=r[3]-r[1],p=0;p<$;++p)i.push(r[0]+o*p/$,r[1],r[2],r[1]+n*p/$,r[2]-o*p/$,r[3],r[0],r[3]-n*p/$);else i=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]];t(i,i,2);for(var a=[],x=[],D=(p=0,i.length);p<D;p+=2)a.push(i[p]),x.push(i[p+1]);return wj(a,x,e)}function Gj(r,t){var e=t.getExtent(),$=Yb(r);if(t.canWrapX()&&($[0]<e[0]||$[0]>=e[2])){var i=Fa(e),o=Math.floor(($[0]-e[0])/i)*i;r[0]-=o,r[2]-=o}return r}var ta={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function me(t,r,o){var $;if(void 0!==r){for(var e=0,i=t.length;e<i;++e)r[e]=t[e];$=r}else $=t.slice();return $}function Hg(t,r,o){if(void 0!==r&&t!==r){for(var $=0,e=t.length;$<e;++$)r[$]=t[$];t=r}return t}function Hj(t){Qj(t.getCode(),t),Yc(t,t,me)}function Ij(t){t.forEach(Hj)}function ua(t){return"string"==typeof t?Pj(t):t||null}function Ig(t,r,o,$){var e,i=(t=ua(t)).getPointResolutionFunc();if(i)e=i(r,o),$&&$!==t.getUnits()&&(n=t.getMetersPerUnit())&&(e=e*n/_a[$]);else if(t.getUnits()==Ba.DEGREES&&!$||$==Ba.DEGREES)e=r;else{var n,a=Zb(t,ua("EPSG:4326")),s=[o[0]-r/2,o[1],o[0]+r/2,o[1],o[0],o[1]-r/2,o[0],o[1]+r/2];s=a(s,s,2),e=(te(s.slice(0,2),s.slice(2,4))+te(s.slice(4,6),s.slice(6,8)))/2,void 0!==(n=$?_a[$]:t.getMetersPerUnit())&&(e/=n)}return e}function Jg(t){Ij(t),t.forEach(function(r){t.forEach(function(t){r!==t&&Yc(r,t,me)})})}function Jj(t,r,o,$){t.forEach(function(t){r.forEach(function(r){Yc(t,r,o),Yc(r,t,$)})})}function ne(t,r){return t?"string"==typeof t?ua(t):t:ua(r)}function Kj(t,r){if(t===r)return!0;var o=t.getUnits()===r.getUnits();return t.getCode()===r.getCode()?o:Zb(t,r)===me&&o}function Zb(t,r){var o=t.getCode(),$=r.getCode(),e=Rj(o,$);return e||(e=Hg),e}function Xc(t,r){return Zb(ua(t),ua(r))}function oe(t,r,o){return Xc(r,o)(t,void 0,t.length)}function Kg(t,r,o,$){var e=Xc(r,o);return Fj(t,e,void 0,$)}var b=arguments[0];var Lg=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||_a[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();var cb={};function wa(r,e,t){return Math.min(Math.max(r,e),t)}var Lj="cosh"in Math?Math.cosh:function(r){var e=Math.exp(r);return(e+1/e)/2};var c="log2"in Math?Math.log2:function(r){return Math.log(r)*Math.LOG2E};function Mj(r,e,t,$,o,a){var n=o-t,s=a-$;if(0!==n||0!==s){var p=((r-t)*n+(e-$)*s)/(n*n+s*s);p>1?(t=o,$=a):p>0&&(t+=n*p,$+=s*p)}return zb(r,e,t,$)}function zb(r,e,t,$){var o=t-r,a=$-e;return o*o+a*a}function Mg(r){return 180*r/Math.PI}function db(r){return r*Math.PI/180}function pe(r,e){var t=r%e;return t*e<0?t+e:t}function yc(r,e,t){return r+t*(e-r)}var Nj=cb&&cb.__extends||function(){var o=function($,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,$){o.__proto__=$}||function(o,$){for(var r in $)$.hasOwnProperty(r)&&(o[r]=$[r])})($,r)};return function($,r){function t(){this.constructor=$}o($,r),$.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),zc=6378137;cb.RADIUS=zc;var Ab=Math.PI*zc;cb.HALF_SIZE=Ab;var Ng=[-Ab,-Ab,Ab,Ab];cb.EXTENT=Ng;var Og=[-180,-85,180,85];cb.WORLD_EXTENT=Og;var Bb=function(o){function $($){return o.call(this,{code:$,units:Ba.METERS,extent:Ng,global:!0,worldExtent:Og,getPointResolution:function(o,$){return o/Lj($[1]/zc)}})||this}return Nj($,o),$}(Lg),qe=[new Bb("EPSG:3857"),new Bb("EPSG:102100"),new Bb("EPSG:102113"),new Bb("EPSG:900913"),new Bb("urn:ogc:def:crs:EPSG:6.18:3:3857"),new Bb("urn:ogc:def:crs:EPSG::3857"),new Bb("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Pg(o,$,r){var t=o.length,e=r>1?r:2,s=$;void 0===s&&(s=e>2?o.slice():new Array(t));for(var n=Ab,l=0;l<t;l+=e){s[l]=n*o[l]/180;var h=zc*Math.log(Math.tan(Math.PI*(+o[l+1]+90)/360));h>n?h=n:h<-n&&(h=-n),s[l+1]=h}return s}function Qg(o,$,r){var t=o.length,e=r>1?r:2,s=$;void 0===s&&(s=e>2?o.slice():new Array(t));for(var n=0;n<t;n+=e)s[n]=180*o[n]/Ab,s[n+1]=360*Math.atan(Math.exp(o[n+1]/zc))/Math.PI-90;return s}cb.PROJECTIONS=qe,cb.fromEPSG4326=Pg,cb.toEPSG4326=Qg;var $b={};var Oj=$b&&$b.__extends||function(){var n=function(r,$){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var $ in r)r.hasOwnProperty($)&&(n[$]=r[$])})(r,$)};return function(r,$){function e(){this.constructor=r}n(r,$),r.prototype=null===$?Object.create($):(e.prototype=$.prototype,new e)}}(),Rg=6378137;$b.RADIUS=Rg;var re=[-180,-90,180,90];$b.EXTENT=re;var Sg=Math.PI*Rg/180;$b.METERS_PER_UNIT=Sg;var pb=function(n){function r(r,$){return n.call(this,{code:r,units:Ba.DEGREES,extent:re,axisOrientation:$,global:!0,metersPerUnit:Sg,worldExtent:re})||this}return Oj(r,n),r}(Lg),se=[new pb("CRS:84"),new pb("EPSG:4326","neu"),new pb("urn:ogc:def:crs:EPSG::4326","neu"),new pb("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new pb("urn:ogc:def:crs:OGC:1.3:CRS84"),new pb("urn:ogc:def:crs:OGC:2:84"),new pb("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new pb("urn:x-ogc:def:crs:EPSG:4326","neu")];$b.PROJECTIONS=se;var Tg={};function Pj($){return Tg[$]||null}function Qj($,t){Tg[$]=t}var _b={};function Yc($,r,e){var t=$.getCode(),o=r.getCode();t in _b||(_b[t]={}),_b[t][o]=e}function Rj($,r){var e;return $ in _b&&r in _b[$]&&(e=_b[$][r]),e}var aa={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};var Zc=6371008.8;function te(e,t,r){var $=r||Zc,a=db(e[1]),o=db(t[1]),n=(o-a)/2,E=db(t[0]-e[0])/2,R=Math.sin(n)*Math.sin(n)+Math.sin(E)*Math.sin(E)*Math.cos(a)*Math.cos(o);return 2*$*Math.atan2(Math.sqrt(R),Math.sqrt(1-R))}function ue(e,t){for(var r=0,$=0,a=e.length;$<a-1;++$)r+=te(e[$],e[$+1],t);return r}function Sj(e,t){var r=t||{},$=r.radius||Zc,a=r.projection||"EPSG:3857",o=e.getType();o!==aa.GEOMETRY_COLLECTION&&(e=e.clone().transform(a,"EPSG:4326"));var n,E,R,p,s,i,q=0;switch(o){case aa.POINT:case aa.MULTI_POINT:break;case aa.LINE_STRING:case aa.LINEAR_RING:q=ue(n=e.getCoordinates(),$);break;case aa.MULTI_LINE_STRING:case aa.POLYGON:for(R=0,p=(n=e.getCoordinates()).length;R<p;++R)q+=ue(n[R],$);break;case aa.MULTI_POLYGON:for(R=0,p=(n=e.getCoordinates()).length;R<p;++R)for(s=0,i=(E=n[R]).length;s<i;++s)q+=ue(E[s],$);break;case aa.GEOMETRY_COLLECTION:var m=e.getGeometries();for(R=0,p=m.length;R<p;++R)q+=Sj(m[R],t);break;default:throw new Error("Unsupported geometry type: "+o);}return q}function $c(e,t){for(var r=0,$=e.length,a=e[$-1][0],o=e[$-1][1],n=0;n<$;n++){var E=e[n][0],R=e[n][1];r+=db(E-a)*(2+Math.sin(db(o))+Math.sin(db(R))),a=E,o=R}return r*t*t/2}function Tj(e,t){var r=t||{},$=r.radius||Zc,a=r.projection||"EPSG:3857",o=e.getType();o!==aa.GEOMETRY_COLLECTION&&(e=e.clone().transform(a,"EPSG:4326"));var n,E,R,p,s,i,q=0;switch(o){case aa.POINT:case aa.MULTI_POINT:case aa.LINE_STRING:case aa.MULTI_LINE_STRING:case aa.LINEAR_RING:break;case aa.POLYGON:for(n=e.getCoordinates(),q=Math.abs($c(n[0],$)),R=1,p=n.length;R<p;++R)q-=Math.abs($c(n[R],$));break;case aa.MULTI_POLYGON:for(R=0,p=(n=e.getCoordinates()).length;R<p;++R)for(E=n[R],q+=Math.abs($c(E[0],$)),s=1,i=E.length;s<i;++s)q-=Math.abs($c(E[s],$));break;case aa.GEOMETRY_COLLECTION:var m=e.getGeometries();for(R=0,p=m.length;R<p;++R)q+=Tj(m[R],t);break;default:throw new Error("Unsupported geometry type: "+o);}return q}function Uj(e,t,r,$){var a=$||Zc,o=db(e[1]),n=db(e[0]),E=t/a,R=Math.asin(Math.sin(o)*Math.cos(E)+Math.cos(o)*Math.sin(E)*Math.cos(r)),p=n+Math.atan2(Math.sin(r)*Math.sin(E)*Math.cos(o),Math.cos(E)-Math.sin(o)*Math.sin(R));return[Mg(p),Mg(R)]}function Vj(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function Wj(t,e){var r=e.getRadius(),$=e.getCenter(),n=$[0],s=$[1],o=t[0]-n,a=t[1]-s;0===o&&0===a&&(o=1);var p=Math.sqrt(o*o+a*a);return[n+r*o/p,s+r*a/p]}function _c(t,e){var r,$,n=t[0],s=t[1],o=e[0],a=e[1],p=o[0],j=o[1],i=a[0],G=a[1],x=i-p,c=G-j,u=0===x&&0===c?0:(x*(n-p)+c*(s-j))/(x*x+c*c||0);return u<=0?(r=p,$=j):u>=1?(r=i,$=G):(r=p+u*x,$=j+u*c),[r,$]}function Ra(t,e){for(var r=!0,$=t.length-1;$>=0;--$)if(t[$]!=e[$]){r=!1;break}return r}function ve(t,e){var r=Math.cos(e),$=Math.sin(e),n=t[0]*r-t[1]*$,s=t[1]*r+t[0]*$;return t[0]=n,t[1]=s,t}function Xj(t,e){return t[0]*=e,t[1]*=e,t}function Ha(t,e){var r=t[0]-e[0],$=t[1]-e[1];return r*r+$*$}function ad(t,e){return Math.sqrt(Ha(t,e))}function bd(t,e){return Ha(t,_c(t,e))}function Ug(t,e){if(e.canWrapX()){var r=Fa(e.getExtent()),$=Yj(t,e,r);$&&(t[0]-=$*r)}return t}function Yj(t,e,r){var $=e.getExtent(),n=0;if(e.canWrapX()&&(t[0]<$[0]||t[0]>$[2])){var s=r||Fa($);n=Math.floor((t[0]-$[0])/s)}return n}var eb=null;function Ia(){return eb}function Cb(t,r){return eb?oe(t,r,eb):t}function ha(t,r){return eb?oe(t,eb,r):t}function Ac(t,r){return eb?Kg(t,r,eb):t}function ac(t,r){return eb?Kg(t,eb,r):t}function Zj(){Jg(qe),Jg(se),Jj(se,qe,Pg,Qg)}Zj();function Db(r,t,e,$,o,a){for(var n=a||[],s=0,f=t;f<e;f+=$){var l=r[f],p=r[f+1];n[s++]=o[0]*l+o[2]*p+o[4],n[s++]=o[1]*l+o[3]*p+o[5]}return a&&n.length!=s&&(n.length=s),n}function we(r,t,e,$,o,a,n){for(var s=n||[],f=Math.cos(o),l=Math.sin(o),p=a[0],w=a[1],x=0,G=t;G<e;G+=$){var L=r[G]-p,v=r[G+1]-w;s[x++]=p+L*f-v*l,s[x++]=w+L*l+v*f;for(var h=G+2;h<G+$;++h)s[x++]=r[h]}return n&&s.length!=x&&(s.length=x),s}function $j(r,t,e,$,o,a,n,s){for(var f=s||[],l=n[0],p=n[1],w=0,x=t;x<e;x+=$){var G=r[x]-l,L=r[x+1]-p;f[w++]=l+o*G,f[w++]=p+a*L;for(var v=x+2;v<x+$;++v)f[w++]=r[v]}return s&&f.length!=w&&(f.length=w),f}function Vg(r,t,e,$,o,a,n){for(var s=n||[],f=0,l=t;l<e;l+=$){s[f++]=r[l]+o,s[f++]=r[l+1]+a;for(var p=l+2;p<l+$;++p)s[f++]=r[p]}return n&&s.length!=f&&(s.length=f),s}var _j=ie&&ie.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),Wg=Qa(),xe=function(t){function r(){var r=t.call(this)||this;return r.extent_=bb(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=jj(function(t,r,e){if(!e)return this.getSimplifiedGeometry(r);var o=this.clone();return o.applyTransform(e),o.getSimplifiedGeometry(r)}),r}return _j(r,t),r.prototype.simplifyTransformed=function(t,r){return this.simplifyTransformedInternal(this.getRevision(),t,r)},r.prototype.clone=function(){return ca()},r.prototype.closestPointXY=function(t,r,e,o){return ca()},r.prototype.containsXY=function(t,r){var e=this.getClosestPoint([t,r]);return e[0]===t&&e[1]===r},r.prototype.getClosestPoint=function(t,r){var e=r||[NaN,NaN];return this.closestPointXY(t[0],t[1],e,1/0),e},r.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},r.prototype.computeExtent=function(t){return ca()},r.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var r=this.computeExtent(this.extent_);(isNaN(r[0])||isNaN(r[1]))&&Wb(r),this.extentRevision_=this.getRevision()}return Dj(this.extent_,t)},r.prototype.rotate=function(t,r){ca()},r.prototype.scale=function(t,r,e){ca()},r.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},r.prototype.getSimplifiedGeometry=function(t){return ca()},r.prototype.getType=function(){return ca()},r.prototype.applyTransform=function(t){ca()},r.prototype.intersectsExtent=function(t){return ca()},r.prototype.translate=function(t,r){ca()},r.prototype.transform=function(t,r){var e=ua(t),o=e.getUnits()==Ba.TILE_PIXELS?function(t,o,n){var s=e.getExtent(),i=e.getWorldExtent(),$=ob(i)/ob(s);return xb(Wg,i[0],i[3],$,-$,0,0,0),Db(t,0,t.length,n,Wg,o),Xc(e,r)(t,o,n)}:Xc(e,r);return this.applyTransform(o),this},r}(Ka);ie.default=xe;var ak=he&&he.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Xg=function(e){function t(t){var r=e.call(this)||this;return r.geometries_=t||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}return ak(t,e),t.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(ia),this.changeEventsKeys_.length=0},t.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(ea(this.geometries_[e],ba.CHANGE,this.changed,this))},t.prototype.clone=function(){var e=new t(null);return e.setGeometries(this.geometries_),e},t.prototype.closestPointXY=function(e,t,r,i){if(i<yb(this.getExtent(),e,t))return i;for(var o=this.geometries_,n=0,s=o.length;n<s;++n)i=o[n].closestPointXY(e,t,r,i);return i},t.prototype.containsXY=function(e,t){for(var r=this.geometries_,i=0,o=r.length;i<o;++i)if(r[i].containsXY(e,t))return!0;return!1},t.prototype.computeExtent=function(e){Wb(e);for(var t=this.geometries_,r=0,i=t.length;r<i;++r)yj(e,t[r].getExtent());return e},t.prototype.getGeometries=function(){return Yg(this.geometries_)},t.prototype.getGeometriesArray=function(){return this.geometries_},t.prototype.getGeometriesArrayRecursive=function(){for(var e=[],t=this.geometries_,r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e},t.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var r=[],i=this.geometries_,o=!1,n=0,s=i.length;n<s;++n){var p=i[n],a=p.getSimplifiedGeometry(e);r.push(a),a!==p&&(o=!0)}if(o){var h=new t(null);return h.setGeometriesArray(r),h}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},t.prototype.getType=function(){return aa.GEOMETRY_COLLECTION},t.prototype.intersectsExtent=function(e){for(var t=this.geometries_,r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1},t.prototype.isEmpty=function(){return 0===this.geometries_.length},t.prototype.rotate=function(e,t){for(var r=this.geometries_,i=0,o=r.length;i<o;++i)r[i].rotate(e,t);this.changed()},t.prototype.scale=function(e,t,r){var i=r;i||(i=Yb(this.getExtent()));for(var o=this.geometries_,n=0,s=o.length;n<s;++n)o[n].scale(e,t,i);this.changed()},t.prototype.setGeometries=function(e){this.setGeometriesArray(Yg(e))},t.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},t.prototype.applyTransform=function(e){for(var t=this.geometries_,r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()},t.prototype.translate=function(e,t){for(var r=this.geometries_,i=0,o=r.length;i<o;++i)r[i].translate(e,t);this.changed()},t.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),e.prototype.disposeInternal.call(this)},t}(xe);function Yg(e){for(var t=[],r=0,i=e.length;r<i;++r)t.push(e[r].clone());return t}he.default=Xg;var ye={};var bk=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,r){var o;if(r){var e=r.dataProjection?ua(r.dataProjection):this.readProjection(t);r.extent&&e&&e.getUnits()===Ba.TILE_PIXELS&&(e=ua(e)).setWorldExtent(r.extent),o={dataProjection:e,featureProjection:r.featureProjection}}return this.adaptOptions(o)},t.prototype.adaptOptions=function(t){return Aa({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return ca()},t.prototype.readFeature=function(t,r){return ca()},t.prototype.readFeatures=function(t,r){return ca()},t.prototype.readGeometry=function(t,r){return ca()},t.prototype.readProjection=function(t){return ca()},t.prototype.writeFeature=function(t,r){return ca()},t.prototype.writeFeatures=function(t,r){return ca()},t.prototype.writeGeometry=function(t,r){return ca()},t}();function Zg(t,r,o){var e,n=o?ua(o.featureProjection):null,i=o?ua(o.dataProjection):null;if(e=n&&i&&!Kj(n,i)?(r?t.clone():t).transform(r?n:i,r?i:n):t,r&&o&&void 0!==o.decimals){var $=Math.pow(10,o.decimals);e===t&&(e=t.clone()),e.applyTransform(function(t){for(var r=0,o=t.length;r<o;++r)t[r]=Math.round(t[r]*$)/$;return t})}return e}var bc={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};var ck=ye&&ye.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),$g=function(t){function r(){return t.call(this)||this}return ck(r,t),r.prototype.getType=function(){return bc.JSON},r.prototype.readFeature=function(t,r){return this.readFeatureFromObject(cd(t),this.getReadOptions(t,r))},r.prototype.readFeatures=function(t,r){return this.readFeaturesFromObject(cd(t),this.getReadOptions(t,r))},r.prototype.readFeatureFromObject=function(t,r){return ca()},r.prototype.readFeaturesFromObject=function(t,r){return ca()},r.prototype.readGeometry=function(t,r){return this.readGeometryFromObject(cd(t),this.getReadOptions(t,r))},r.prototype.readGeometryFromObject=function(t,r){return ca()},r.prototype.readProjection=function(t){return this.readProjectionFromObject(cd(t))},r.prototype.readProjectionFromObject=function(t){return ca()},r.prototype.writeFeature=function(t,r){return JSON.stringify(this.writeFeatureObject(t,r))},r.prototype.writeFeatureObject=function(t,r){return ca()},r.prototype.writeFeatures=function(t,r){return JSON.stringify(this.writeFeaturesObject(t,r))},r.prototype.writeFeaturesObject=function(t,r){return ca()},r.prototype.writeGeometry=function(t,r){return JSON.stringify(this.writeGeometryObject(t,r))},r.prototype.writeGeometryObject=function(t,r){return ca()},r}(bk);function cd(t){if("string"==typeof t){var r=JSON.parse(t);return r||null}return null!==t?t:null}ye.default=$g;var ze={};var pa={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var Bc={};var dk=Bc&&Bc.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),fb=function(t){function r(){var r=t.call(this)||this;return r.layout=pa.XY,r.stride=2,r.flatCoordinates=null,r}return dk(r,t),r.prototype.computeExtent=function(t){return Cg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.getCoordinates=function(){return ca()},r.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},r.prototype.getFlatCoordinates=function(){return this.flatCoordinates},r.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},r.prototype.getLayout=function(){return this.layout},r.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var r=this.getSimplifiedGeometryInternal(t);return r.getFlatCoordinates().length<this.flatCoordinates.length?r:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},r.prototype.getSimplifiedGeometryInternal=function(t){return this},r.prototype.getStride=function(){return this.stride},r.prototype.setFlatCoordinates=function(t,r){this.stride=Ae(t),this.layout=t,this.flatCoordinates=r},r.prototype.setCoordinates=function(t,r){ca()},r.prototype.setLayout=function(t,r,e){var o;if(t)o=Ae(t);else{for(var i=0;i<e;++i){if(0===r.length)return this.layout=pa.XY,void(this.stride=2);r=r[0]}t=ek(o=r.length)}this.layout=t,this.stride=o},r.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},r.prototype.rotate=function(t,r){var e=this.getFlatCoordinates();if(e){var o=this.getStride();we(e,0,e.length,o,t,r,e),this.changed()}},r.prototype.scale=function(t,r,e){var o=r;void 0===o&&(o=t);var i=e;i||(i=Yb(this.getExtent()));var n=this.getFlatCoordinates();if(n){var a=this.getStride();$j(n,0,n.length,a,t,o,i,n),this.changed()}},r.prototype.translate=function(t,r){var e=this.getFlatCoordinates();if(e){var o=this.getStride();Vg(e,0,e.length,o,t,r,e),this.changed()}},r}(xe);function ek(t){var r;return 2==t?r=pa.XY:3==t?r=pa.XYZ:4==t&&(r=pa.XYZM),r}function Ae(t){var r;return t==pa.XY?r=2:t==pa.XYZ||t==pa.XYM?r=3:t==pa.XYZM&&(r=4),r}function _g(t,r,e){var o=t.getFlatCoordinates();if(o){var i=t.getStride();return Db(o,0,o.length,i,r,e)}return null}Bc.getStrideForLayout=Ae,Bc.transformGeom2D=_g,Bc.default=fb;function ah(r,a,t,e,$,s,o){var n,i=r[a],l=r[a+1],M=r[t]-i,u=r[t+1]-l;if(0===M&&0===u)n=a;else{var x=(($-i)*M+(s-l)*u)/(M*M+u*u);if(x>1)n=t;else{if(x>0){for(var p=0;p<e;++p)o[p]=yc(r[a+p],r[t+p],x);return void(o.length=e)}n=a}}for(p=0;p<e;++p)o[p]=r[n+p];o.length=e}function Be(r,a,t,e,$){var s=r[a],o=r[a+1];for(a+=e;a<t;a+=e){var n=r[a],i=r[a+1],l=zb(s,o,n,i);l>$&&($=l),s=n,o=i}return $}function Ce(r,a,t,e,$){for(var s=0,o=t.length;s<o;++s){var n=t[s];$=Be(r,a,n,e,$),a=n}return $}function fk(r,a,t,e,$){for(var s=0,o=t.length;s<o;++s){var n=t[s];$=Ce(r,a,n,e,$),a=n[n.length-1]}return $}function De(r,a,t,e,$,s,o,n,i,l,M){if(a==t)return l;var u,x;if(0===$){if((x=zb(o,n,r[a],r[a+1]))<l){for(u=0;u<e;++u)i[u]=r[a+u];return i.length=e,x}return l}for(var p=M||[NaN,NaN],f=a+e;f<t;)if(ah(r,f-e,f,e,o,n,p),(x=zb(o,n,p[0],p[1]))<l){for(l=x,u=0;u<e;++u)i[u]=p[u];i.length=e,f+=e}else f+=e*Math.max((Math.sqrt(x)-Math.sqrt(l))/$|0,1);if(s&&(ah(r,t-e,a,e,o,n,p),(x=zb(o,n,p[0],p[1]))<l)){for(l=x,u=0;u<e;++u)i[u]=p[u];i.length=e}return l}function Ee(r,a,t,e,$,s,o,n,i,l,M){for(var u=M||[NaN,NaN],x=0,p=t.length;x<p;++x){var f=t[x];l=De(r,a,f,e,$,s,o,n,i,l,u),a=f}return l}function gk(r,a,t,e,$,s,o,n,i,l,M){for(var u=M||[NaN,NaN],x=0,p=t.length;x<p;++x){var f=t[x];l=Ee(r,a,f,e,$,s,o,n,i,l,u),a=f[f.length-1]}return l}function bh(e,r,t,o){for(var a=0,$=t.length;a<$;++a)e[r++]=t[a];return r}function dd(e,r,t,o){for(var a=0,$=t.length;a<$;++a)for(var n=t[a],d=0;d<o;++d)e[r++]=n[d];return r}function Fe(e,r,t,o,a){for(var $=a||[],n=0,d=0,l=t.length;d<l;++d){var f=dd(e,r,t[d],o);$[n++]=f,r=f}return $.length=n,$}function hk(e,r,t,o,a){for(var $=a||[],n=0,d=0,l=t.length;d<l;++d){var f=Fe(e,r,t[d],o,$[n]);$[n++]=f,r=f[f.length-1]}return $.length=n,$}function Ge(r,t,$,e,p,a,o){var n=($-t)/e;if(n<3){for(;t<$;t+=e)a[o++]=r[t],a[o++]=r[t+1];return o}var u=new Array(n);u[0]=1,u[n-1]=1;for(var i=[t,$-e],s=0;i.length>0;){for(var E=i.pop(),I=i.pop(),x=0,l=r[I],c=r[I+1],f=r[E],g=r[E+1],d=I+e;d<E;d+=e){var v=r[d],y=r[d+1],h=Mj(v,y,l,c,f,g);h>x&&(s=d,x=h)}x>p&&(u[(s-t)/e]=1,I+e<s&&i.push(I,s),s+e<E&&i.push(s,E))}for(d=0;d<n;++d)u[d]&&(a[o++]=r[t+d*e],a[o++]=r[t+d*e+1]);return o}function ik(r,t,$,e,p,a,o,n){for(var u=0,i=$.length;u<i;++u){var s=$[u];o=Ge(r,t,s,e,p,a,o),n.push(o),t=s}return o}function Eb(r,t){return t*Math.round(r/t)}function jk(r,t,$,e,p,a,o){if(t==$)return o;var n,u,i=Eb(r[t],p),s=Eb(r[t+1],p);t+=e,a[o++]=i,a[o++]=s;do{if(n=Eb(r[t],p),u=Eb(r[t+1],p),(t+=e)==$)return a[o++]=n,a[o++]=u,o}while(n==i&&u==s);for(;t<$;){var E=Eb(r[t],p),I=Eb(r[t+1],p);if(t+=e,E!=n||I!=u){var x=n-i,l=u-s,c=E-i,f=I-s;x*f==l*c&&(x<0&&c<x||x==c||x>0&&c>x)&&(l<0&&f<l||l==f||l>0&&f>l)?(n=E,u=I):(a[o++]=n,a[o++]=u,i=n,s=u,n=E,u=I)}}return a[o++]=n,a[o++]=u,o}function ch(r,t,$,e,p,a,o,n){for(var u=0,i=$.length;u<i;++u){var s=$[u];o=jk(r,t,s,e,p,a,o),n.push(o),t=s}return o}function kk(r,t,$,e,p,a,o,n){for(var u=0,i=$.length;u<i;++u){var s=$[u],E=[];o=ch(r,t,s,e,p,a,o,E),n.push(E),t=s[s.length-1]}return o}function dh(r,$,o,t,e){for(var f,i=[r[$],r[$+1]],a=[];$+t<o;$+=t){if(a[0]=r[$+t],a[1]=r[$+t+1],f=e(i,a))return f;i[0]=a[0],i[1]=a[1]}return!1}function Cc(r,n,t,e,o){for(var a=void 0!==o?o:[],l=0,i=n;i<t;i+=e)a[l++]=r.slice(i,i+e);return a.length=l,a}function ed(r,n,t,e,o){for(var a=void 0!==o?o:[],l=0,i=0,$=t.length;i<$;++i){var f=t[i];a[l++]=Cc(r,n,f,e,a[l]),n=f}return a.length=l,a}function eh(r,n,t,e,o){for(var a=void 0!==o?o:[],l=0,i=0,$=t.length;i<$;++i){var f=t[i];a[l++]=ed(r,n,f,e,a[l]),n=f[f.length-1]}return a.length=l,a}function fh(r,e,t,n,i,o,$){var l,a,u=(t-e)/n;if(1===u)l=e;else if(2===u)l=e,a=i;else if(0!==u){for(var p=r[e],f=r[e+1],s=0,q=[0],v=e+n;v<t;v+=n){var D=r[v],T=r[v+1];s+=Math.sqrt((D-p)*(D-p)+(T-f)*(T-f)),q.push(s),p=D,f=T}var c=i*s,g=kj(q,c);g<0?(a=(c-q[-g-2])/(q[-g-1]-q[-g-2]),l=e+(-g-2)*n):l=e+g*n}var x=$>1?$:2,d=o||new Array(x);for(v=0;v<x;++v)d[v]=void 0===l?NaN:void 0===a?r[l+v]:yc(r[l+v],r[l+n+v],a);return d}function He(r,e,t,n,i,o){if(t==e)return null;var $;if(i<r[e+n-1])return o?(($=r.slice(e,e+n))[n-1]=i,$):null;if(r[t-1]<i)return o?(($=r.slice(t-n,t))[n-1]=i,$):null;if(i==r[e+n-1])return r.slice(e,e+n);for(var l=e/n,a=t/n;l<a;){var u=l+a>>1;i<r[(u+1)*n-1]?a=u:l=u+1}var p=r[l*n-1];if(i==p)return r.slice((l-1)*n,(l-1)*n+n);var f=(i-p)/(r[(l+1)*n-1]-p);$=[];for(var s=0;s<n-1;++s)$.push(yc(r[(l-1)*n+s],r[l*n+s],f));return $.push(i),$}function lk(r,e,t,n,i,o,$){if($)return He(r,e,t[t.length-1],n,i,o);var l;if(i<r[n-1])return o?((l=r.slice(0,n))[n-1]=i,l):null;if(r[r.length-1]<i)return o?((l=r.slice(r.length-n))[n-1]=i,l):null;for(var a=0,u=t.length;a<u;++a){var p=t[a];if(e!=p){if(i<r[e+n-1])return null;if(i<=r[p-1])return He(r,e,p,n,i,!1);e=p}}return null}function fd(r,i,t,e,n){var $=Dg(bb(),r,i,t,e);return!!Ga(n,$)&&(!!ab(n,$)||$[0]>=n[0]&&$[2]<=n[2]||$[1]>=n[1]&&$[3]<=n[3]||dh(r,i,t,e,function(r,i){return Ej(n,r,i)}))}function mk(r,i,t,e,n){for(var $=0,s=t.length;$<s;++$){if(fd(r,i,t[$],e,n))return!0;i=t[$]}return!1}function nk(r,i,t,e,n){return!!fd(r,i,t,e,n)||!!Fb(r,i,t,e,n[0],n[1])||!!Fb(r,i,t,e,n[0],n[3])||!!Fb(r,i,t,e,n[2],n[1])||!!Fb(r,i,t,e,n[2],n[3])}function gh(r,i,t,e,n){if(!nk(r,i,t[0],e,n))return!1;if(1===t.length)return!0;for(var $=1,s=t.length;$<s;++$)if(pk(r,t[$-1],t[$],e,n)&&!fd(r,t[$-1],t[$],e,n))return!1;return!0}function ok(r,i,t,e,n){for(var $=0,s=t.length;$<s;++$){var o=t[$];if(gh(r,i,o,e,n))return!0;i=o[o.length-1]}return!1}function pk(n,r,t,i,e){return!Eg(e,function(e){return!Fb(n,r,t,i,e[0],e[1])})}function Fb(n,r,t,i,e,$){for(var o=0,a=n[t-i],d=n[t-i+1];r<t;r+=i){var s=n[r],l=n[r+1];d<=$?l>$&&(s-a)*($-d)-(e-a)*(l-d)>0&&o++:l<=$&&(s-a)*($-d)-(e-a)*(l-d)<0&&o--,a=s,d=l}return 0!==o}function Ie(n,r,t,i,e,$){if(0===t.length)return!1;if(!Fb(n,r,t[0],i,e,$))return!1;for(var o=1,a=t.length;o<a;++o)if(Fb(n,t[o-1],t[o],i,e,$))return!1;return!0}function qk(n,r,t,i,e,$){if(0===t.length)return!1;for(var o=0,a=t.length;o<a;++o){var d=t[o];if(Ie(n,r,d,i,e,$))return!0;r=d[d.length-1]}return!1}function hh(r,n,t,e){for(var $=r[n],i=r[n+1],x=0,Z=n+e;Z<t;Z+=e){var g=r[Z],o=r[Z+1];x+=Math.sqrt((g-$)*(g-$)+(o-i)*(o-i)),$=g,i=o}return x}var rk=ze&&ze.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Gb=function(t){function e(e,i){var o=t.call(this)||this;return o.flatMidpoint_=null,o.flatMidpointRevision_=-1,o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?o.setCoordinates(e,i):o.setFlatCoordinates(i,e),o}return rk(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Ja(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,o){return o<yb(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Be(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),De(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,o))},e.prototype.forEachSegment=function(t){return dh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=pa.XYM&&this.layout!=pa.XYZM)return null;var i=void 0!==e&&e;return He(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Cc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return fh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return hh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Ge(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,pa.XY)},e.prototype.getType=function(){return aa.LINE_STRING},e.prototype.intersectsExtent=function(t){return fd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=dd(this.flatCoordinates,0,t,this.stride),this.changed()},e}(fb);ze.default=Gb;var Je={};var sk=Je&&Je.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ke=function(t){function e(e,r,i){var o=t.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(e[0]))o.setCoordinates(e,r);else if(void 0!==r&&i)o.setFlatCoordinates(r,e),o.ends_=i;else{for(var s=o.getLayout(),n=e,a=[],f=[],l=0,$=n.length;l<$;++l){var p=n[l];0===l&&(s=p.getLayout()),Ja(a,p.getFlatCoordinates()),f.push(a.length)}o.setFlatCoordinates(s,a),o.ends_=f}return o}return sk(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Ja(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,i){return i<yb(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ce(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ee(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,i))},e.prototype.getCoordinateAtM=function(t,e,r){if(this.layout!=pa.XYM&&this.layout!=pa.XYZM||0===this.flatCoordinates.length)return null;var i=void 0!==e&&e,o=void 0!==r&&r;return lk(this.flatCoordinates,0,this.ends_,this.stride,t,i,o)},e.prototype.getCoordinates=function(){return ed(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Gb(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,i=[],o=0,s=0,n=e.length;s<n;++s){var a=e[s],f=new Gb(t.slice(o,a),r);i.push(f),o=a}return i},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,r=0,i=this.ends_,o=this.stride,s=0,n=i.length;s<n;++s){var a=i[s],f=fh(e,r,a,o,.5);Ja(t,f),r=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=ik(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,i),new e(r,pa.XY,i)},e.prototype.getType=function(){return aa.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return mk(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Fe(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(fb);Je.default=Ke;var Le={};var Me={};var tk=Me&&Me.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),gb=function(t){function e(e,r){var o=t.call(this)||this;return o.setCoordinates(e,r),o}return tk(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,o){var n=this.flatCoordinates,i=zb(t,e,n[0],n[1]);if(i<o){for(var s=this.stride,a=0;a<s;++a)r[a]=n[a];return r.length=s,i}return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Wc(this.flatCoordinates,t)},e.prototype.getType=function(){return aa.POINT},e.prototype.intersectsExtent=function(t){return Bg(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=bh(this.flatCoordinates,0,t,this.stride),this.changed()},e}(fb);Me.default=gb;var uk=Le&&Le.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),gd=function(t){function e(e,r){var o=t.call(this)||this;return r&&!Array.isArray(e[0])?o.setFlatCoordinates(r,e):o.setCoordinates(e,r),o}return uk(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Ja(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,o){if(o<yb(this.getExtent(),t,e))return o;for(var i=this.flatCoordinates,n=this.stride,s=0,a=i.length;s<a;s+=n){var u=zb(t,e,i[s],i[s+1]);if(u<o){o=u;for(var d=0;d<n;++d)r[d]=i[s+d];r.length=n}}return o},e.prototype.getCoordinates=function(){return Cc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new gb(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,o=[],i=0,n=t.length;i<n;i+=r){var s=new gb(t.slice(i,i+r),e);o.push(s)}return o},e.prototype.getType=function(){return aa.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,o=0,i=e.length;o<i;o+=r){var n=e[o],s=e[o+1];if(Bg(t,n,s))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=dd(this.flatCoordinates,0,t,this.stride),this.changed()},e}(fb);Le.default=gd;var Ne={};var Hb={};var Oe={};function ih(r,n,$,e){for(var i=0,t=r[$-e],a=r[$-e+1];n<$;n+=e){var o=r[n],g=r[n+1];i+=a*o-t*g,t=o,a=g}return i/2}function jh(r,n,$,e){for(var i=0,t=0,a=$.length;t<a;++t){var o=$[t];i+=ih(r,n,o,e),n=o}return i}function vk(r,n,$,e){for(var i=0,t=0,a=$.length;t<a;++t){var o=$[t];i+=jh(r,n,o,e),n=o[o.length-1]}return i}var wk=Oe&&Oe.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Pe=function(t){function e(e,r){var o=t.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?o.setCoordinates(e,r):o.setFlatCoordinates(r,e),o}return wk(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,o){return o<yb(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Be(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),De(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,o))},e.prototype.getArea=function(){return ih(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Cc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=Ge(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,pa.XY)},e.prototype.getType=function(){return aa.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=dd(this.flatCoordinates,0,t,this.stride),this.changed()},e}(fb);Oe.default=Pe;function kh(r,t,e,o,n,$,i){for(var a,v,s,N,p,f,u,g=n[$+1],D=[],U=0,l=e.length;U<l;++U){var x=e[U];for(N=r[x-o],f=r[x-o+1],a=t;a<x;a+=o)p=r[a],u=r[a+1],(g<=f&&u<=g||f<=g&&g<=u)&&(s=(g-f)/(u-f)*(p-N)+N,D.push(s)),N=p,f=u}var y=NaN,h=-1/0;for(D.sort(Rb),N=D[0],a=1,v=D.length;a<v;++a){p=D[a];var A=Math.abs(p-N);A>h&&(s=(N+p)/2,Ie(r,t,e,o,s,g)&&(y=s,h=A)),N=p}return isNaN(y)&&(y=n[$]),i?(i.push(y,g,h),i):[y,g,h]}function xk(r,t,e,o,n){for(var $=[],i=0,a=e.length;i<a;++i){var v=e[i];$=kh(r,t,v,o,n,2*i,$),t=v[v.length-1]}return $}function lh(r,e,n,i){for(var $=!0,t=0;t<i;++t)if(r[e+t]!==r[n-i+t]){$=!1;break}$&&(n-=i);var o=yk(r,e,n,i),a=o-i;a<e&&(a=n-i);var s=o+i;s>=n&&(s=e);var c=r[a],g=r[a+1],l=r[o],p=r[o+1],x=r[s],v=r[s+1];return l*v+c*p+g*x-(g*l+p*x+c*v)<0}function yk(r,e,n,i){for(var $=-1,t=1/0,o=1/0,a=e;a<n;a+=i){var s=r[a],c=r[a+1];c>t||c==t&&s>=o||($=a,t=c,o=s)}return $}function mh(r,e,n,i,$){for(var t=void 0!==$&&$,o=0,a=n.length;o<a;++o){var s=n[o],c=lh(r,e,s,i);if(0===o){if(t&&c||!t&&!c)return!1}else if(t&&!c||!t&&c)return!1;e=s}return!0}function zk(r,e,n,i,$){for(var t=0,o=n.length;t<o;++t){var a=n[t];if(!mh(r,e,a,i,$))return!1;a.length&&(e=a[a.length-1])}return!0}function Qe(r,e,n,i,$){for(var t=void 0!==$&&$,o=0,a=n.length;o<a;++o){var s=n[o],c=lh(r,e,s,i);(0===o?t&&c||!t&&!c:t&&!c||!t&&c)&&Ak(r,e,s,i),e=s}return e}function nh(r,e,n,i,$){for(var t=0,o=n.length;t<o;++t)e=Qe(r,e,n[t],i,$);return e}function Ak(o,r,e,$){for(;r<e-$;){for(var t=0;t<$;++t){var a=o[r+t];o[r+t]=o[e-$+t],o[e-$+t]=a}r+=$,e-=$}}var Bk=Hb&&Hb.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Sa=function(t){function e(e,r,i){var o=t.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==r&&i?(o.setFlatCoordinates(r,e),o.ends_=i):o.setCoordinates(e,r),o}return Bk(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?Ja(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,i){return i<yb(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ce(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ee(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,i))},e.prototype.containsXY=function(t,e){return Ie(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return jh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Qe(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,ed(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Yb(this.getExtent());this.flatInteriorPoint_=kh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new gb(this.getFlatInteriorPoint(),pa.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Pe(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,i=[],o=0,n=0,s=r.length;n<s;++n){var a=r[n],$=new Pe(e.slice(o,a),t);i.push($),o=a}return i},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;mh(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Qe(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=ch(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,i),new e(r,pa.XY,i)},e.prototype.getType=function(){return aa.POLYGON},e.prototype.intersectsExtent=function(t){return gh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Fe(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(fb);function Ck(t,e,r,i){for(var o=r||32,n=[],s=0;s<o;++s)Ja(n,Uj(t,e,2*Math.PI*s/o,i));return n.push(n[0],n[1]),new Sa(n,pa.XY,[n.length])}function Ib(t){var e=t[0],r=t[1],i=t[2],o=t[3],n=[e,r,e,o,i,o,i,r,e,r];return new Sa(n,pa.XY,[n.length])}function Dc(t,e,r){for(var i=e||32,o=t.getStride(),n=t.getLayout(),s=t.getCenter(),a=o*(i+1),$=new Array(a),w=0;w<a;w+=o){$[w]=0,$[w+1]=0;for(var l=2;l<o;l++)$[w+l]=s[l]}var p=[$.length],h=new Sa($,n,p);return Re(h,s,t.getRadius(),r),h}function Re(t,e,r,i){for(var o=t.getFlatCoordinates(),n=t.getStride(),s=o.length/n-1,a=i||0,$=0;$<=s;++$){var w=$*n,l=a+2*pe($,s)*Math.PI/s;o[w]=e[0]+r*Math.cos(l),o[w+1]=e[1]+r*Math.sin(l)}t.changed()}Hb.default=Sa,Hb.circular=Ck,Hb.fromExtent=Ib,Hb.fromCircle=Dc,Hb.makeRegular=Re;function Dk(r,e,t,$){for(var n=[],a=bb(),i=0,o=t.length;i<o;++i){var s=t[i];a=Cg(r,e,s[0],$),n.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=s[s.length-1]}return n}var Ek=Ne&&Ne.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Se=function(t){function e(e,i,r){var o=t.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var s=o.getLayout(),n=e,a=[],h=[],l=0,u=n.length;l<u;++l){var $=n[l];0===l&&(s=$.getLayout());for(var d=a.length,p=$.getEnds(),f=0,c=p.length;f<c;++f)p[f]+=d;Ja(a,$.getFlatCoordinates()),h.push(p)}i=s,e=a,r=h}return void 0!==i&&r?(o.setFlatCoordinates(i,e),o.endss_=r):o.setCoordinates(e,i),o}return Ek(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;Ja(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,o=(e=t.getEnds().slice()).length;r<o;++r)e[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),r=0;r<t;++r)i[r]=this.endss_[r].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,r){return r<yb(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fk(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gk(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))},e.prototype.containsXY=function(t,e){return qk(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return vk(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),nh(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,eh(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Dk(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=xk(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new gd(this.getFlatInteriorPoints().slice(),pa.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;zk(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=nh(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=kk(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,r),new e(i,pa.XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var r=this.endss_[t].slice(),o=r[r.length-1];if(0!==e)for(var s=0,n=r.length;s<n;++s)r[s]-=e;return new Sa(this.flatCoordinates.slice(e,o),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[],o=0,s=0,n=i.length;s<n;++s){var a=i[s].slice(),h=a[a.length-1];if(0!==o)for(var l=0,u=a.length;l<u;++l)a[l]-=o;var $=new Sa(e.slice(o,h),t,a);r.push($),o=h}return r},e.prototype.getType=function(){return aa.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return ok(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=hk(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(fb);Ne.default=Se;var Fk=Zd&&Zd.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),oh=function(e){function r(r){var t=this,o=r||{};return(t=e.call(this)||this).dataProjection=ua(o.dataProjection?o.dataProjection:"EPSG:4326"),o.featureProjection&&(t.defaultFeatureProjection=ua(o.featureProjection)),t.geometryName_=o.geometryName,t.extractGeometryName_=o.extractGeometryName,t}return Fk(r,e),r.prototype.readFeatureFromObject=function(e,r){var t=null,o=Te((t="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null}).geometry,r),i=new Pa;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in t!==void 0&&i.setGeometryName(t.geometry_name),i.setGeometry(o),"id"in t&&i.setId(t.id),t.properties&&i.setProperties(t.properties,!0),i},r.prototype.readFeaturesFromObject=function(e,r){var t=null;if("FeatureCollection"===e.type){t=[];for(var o=e.features,i=0,$=o.length;i<$;++i)t.push(this.readFeatureFromObject(o[i],r))}else t=[this.readFeatureFromObject(e,r)];return t},r.prototype.readGeometryFromObject=function(e,r){return Te(e,r)},r.prototype.readProjectionFromObject=function(e){var r,t=e.crs;return t?"name"==t.type?r=ua(t.properties.name):"EPSG"===t.type?r=ua("EPSG:"+t.properties.code):ja(!1,36):r=this.dataProjection,r},r.prototype.writeFeatureObject=function(e,r){r=this.adaptOptions(r);var t={type:"Feature",geometry:null,properties:null},o=e.getId();if(void 0!==o&&(t.id=o),!e.hasProperties())return t;var i=e.getProperties(),$=e.getGeometry();return $&&(t.geometry=Ue($,r),delete i[e.getGeometryName()]),Ub(i)||(t.properties=i),t},r.prototype.writeFeaturesObject=function(e,r){r=this.adaptOptions(r);for(var t=[],o=0,i=e.length;o<i;++o)t.push(this.writeFeatureObject(e[o],r));return{type:"FeatureCollection",features:t}},r.prototype.writeGeometryObject=function(e,r){return Ue(e,this.adaptOptions(r))},r}($g);function Te(e,r){if(!e)return null;var t;switch(e.type){case aa.POINT:t=Hk(e);break;case aa.LINE_STRING:t=Ik(e);break;case aa.POLYGON:t=Mk(e);break;case aa.MULTI_POINT:t=Kk(e);break;case aa.MULTI_LINE_STRING:t=Jk(e);break;case aa.MULTI_POLYGON:t=Lk(e);break;case aa.GEOMETRY_COLLECTION:t=Gk(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type);}return Zg(t,!1,r)}function Gk(e,r){var t=e.geometries.map(function(e){return Te(e,r)});return new Xg(t)}function Hk(e){return new gb(e.coordinates)}function Ik(e){return new Gb(e.coordinates)}function Jk(e){return new Ke(e.coordinates)}function Kk(e){return new gd(e.coordinates)}function Lk(e){return new Se(e.coordinates)}function Mk(e){return new Sa(e.coordinates)}function Ue(e,r){var t,o=(e=Zg(e,!0,r)).getType();switch(o){case aa.POINT:t=Sk(e,r);break;case aa.LINE_STRING:t=Ok(e,r);break;case aa.POLYGON:t=Tk(e,r);break;case aa.MULTI_POINT:t=Qk(e,r);break;case aa.MULTI_LINE_STRING:t=Pk(e,r);break;case aa.MULTI_POLYGON:t=Rk(e,r);break;case aa.GEOMETRY_COLLECTION:t=Nk(e,r);break;case aa.CIRCLE:t={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+o);}return t}function Nk(e,r){return{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(e){var t=Aa({},r);return delete t.featureProjection,Ue(e,t)})}}function Ok(e,r){return{type:"LineString",coordinates:e.getCoordinates()}}function Pk(e,r){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function Qk(e,r){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function Rk(e,r){var t;return r&&(t=r.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(t)}}function Sk(e,r){return{type:"Point",coordinates:e.getCoordinates()}}function Tk(e,r){var t;return r&&(t=r.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(t)}}Zd.default=oh;var Ve={};var We={};var Xe={};var Uk=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Vk=/^([a-z]*)$|^hsla?\(.*\)$/i;function Wk(r){return"string"==typeof r?r:rh(r)}function Xk(r){var e=document.createElement("div");if(e.style.color=r,""!==e.style.color){document.body.appendChild(e);var $=getComputedStyle(e).color;return document.body.removeChild(e),$}return""}var Yk=function(){var r={},e=0;return function($){var t;if(r.hasOwnProperty($))t=r[$];else{if(e>=1024){var o=0;for(var a in r)0==(3&o++)&&(delete r[a],--e)}t=Zk($),r[$]=t,++e}return t}}();function ph(r){return Array.isArray(r)?r:Yk(r)}function Zk(r){var e,$,t,o,a;if(Vk.exec(r)&&(r=Xk(r)),Uk.exec(r)){var u=r.length-1,n=void 0;n=u<=4?1:2;var c=4===u||8===u;e=parseInt(r.substr(1+0*n,n),16),$=parseInt(r.substr(1+1*n,n),16),t=parseInt(r.substr(1+2*n,n),16),o=c?parseInt(r.substr(1+3*n,n),16):255,1==n&&(e=(e<<4)+e,$=($<<4)+$,t=(t<<4)+t,c&&(o=(o<<4)+o)),a=[e,$,t,o/255]}else 0==r.indexOf("rgba(")?qh(a=r.slice(5,-1).split(",").map(Number)):0==r.indexOf("rgb(")?((a=r.slice(4,-1).split(",").map(Number)).push(1),qh(a)):ja(!1,14);return a}function qh(r){return r[0]=wa(r[0]+.5|0,0,255),r[1]=wa(r[1]+.5|0,0,255),r[2]=wa(r[2]+.5|0,0,255),r[3]=wa(r[3],0,1),r}function rh(r){var e=r[0];e!=(0|e)&&(e=e+.5|0);var $=r[1];$!=(0|$)&&($=$+.5|0);var t=r[2];return t!=(0|t)&&(t=t+.5|0),"rgba("+e+","+$+","+t+","+(void 0===r[3]?1:r[3])+")"}var $k=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var r=this.cache_[t];0!=(3&e++)||r.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}},e.prototype.get=function(e,t,r){var i=sh(e,t,r);return i in this.cache_?this.cache_[i]:null},e.prototype.set=function(e,t,r,i){var o=sh(e,t,r);this.cache_[o]=i,++this.cacheSize_},e.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},e}();function sh(e,t,r){return t+":"+e+":"+(r?Wk(r):"null")}var hd=new $k;var id={};var Ye={};var ka={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"};var _k=Ye&&Ye.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Ze=function(t){function e(e){var r=t.call(this)||this,o=Aa({},e);return o[ka.OPACITY]=void 0!==e.opacity?e.opacity:1,ja("number"==typeof o[ka.OPACITY],64),o[ka.VISIBLE]=void 0===e.visible||e.visible,o[ka.Z_INDEX]=e.zIndex,o[ka.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,o[ka.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,o[ka.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,o[ka.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==o.className?e.className:"ol-layer",delete o.className,r.setProperties(o),r.state_=null,r}return _k(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=wa(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r?r:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return ca()},e.prototype.getLayerStatesArray=function(t){return ca()},e.prototype.getExtent=function(){return this.get(ka.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(ka.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(ka.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(ka.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(ka.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(ka.OPACITY)},e.prototype.getSourceState=function(){return ca()},e.prototype.getVisible=function(){return this.get(ka.VISIBLE)},e.prototype.getZIndex=function(){return this.get(ka.Z_INDEX)},e.prototype.setExtent=function(t){this.set(ka.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(ka.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(ka.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(ka.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(ka.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){ja("number"==typeof t,64),this.set(ka.OPACITY,t)},e.prototype.setVisible=function(t){this.set(ka.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(ka.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(Ka);Ye.default=Ze;var Jb={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var Kb={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};var al=id&&id.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),th=function(e){function r(r){var t=this,n=Aa({},r);delete n.source,(t=e.call(this,n)||this).mapPrecomposeKey_=null,t.mapRenderKey_=null,t.sourceChangeKey_=null,t.renderer_=null,r.render&&(t.render=r.render),r.map&&t.setMap(r.map),t.addEventListener(oa(ka.SOURCE),t.handleSourcePropertyChange_);var o=r.source?r.source:null;return t.setSource(o),t}return al(r,e),r.prototype.getLayersArray=function(e){var r=e||[];return r.push(this),r},r.prototype.getLayerStatesArray=function(e){var r=e||[];return r.push(this.getLayerState()),r},r.prototype.getSource=function(){return this.get(ka.SOURCE)||null},r.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():Kb.UNDEFINED},r.prototype.handleSourceChange_=function(){this.changed()},r.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(ia(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=ea(e,ba.CHANGE,this.handleSourceChange_,this)),this.changed()},r.prototype.getFeatures=function(e){return this.renderer_.getFeatures(e)},r.prototype.render=function(e,r){var t=this.getRenderer();if(t.prepareFrame(e))return t.renderFrame(e,r)},r.prototype.setMap=function(e){this.mapPrecomposeKey_&&(ia(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ia(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=ea(e,Jb.PRECOMPOSE,function(e){var r=e.frameState.layerStatesArray,t=this.getLayerState(!1);ja(!r.some(function(e){return e.layer===t.layer}),67),r.push(t)},this),this.mapRenderKey_=ea(this,ba.CHANGE,e.render,e),this.changed())},r.prototype.setSource=function(e){this.set(ka.SOURCE,e)},r.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},r.prototype.hasRenderer=function(){return!!this.renderer_},r.prototype.createRenderer=function(){return null},r.prototype.disposeInternal=function(){this.setSource(null),e.prototype.disposeInternal.call(this)},r}(Ze);function Ec(e,r){if(!e.visible)return!1;var t=r.resolution;if(t<e.minResolution||t>=e.maxResolution)return!1;var n=r.zoom;return n>e.minZoom&&n<=e.maxZoom}id.inView=Ec,id.default=th;function bl(e,r){r&&r.clear();for(var t=e.declutterItems,$=t.length-1;$>=0;--$)for(var o=t[$],i=o.items,n=0,a=i.length;n<a;n+=3)r=i[n].renderDeclutter(i[n+1],i[n+2],o.opacity,r);return t.length=0,r}var $e={};var uh=function(){function t(){}return t.prototype.drawCustom=function(t,o,e){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,o){},t.prototype.drawFeature=function(t,o){},t.prototype.drawGeometryCollection=function(t,o){},t.prototype.drawLineString=function(t,o){},t.prototype.drawMultiLineString=function(t,o){},t.prototype.drawMultiPoint=function(t,o){},t.prototype.drawMultiPolygon=function(t,o){},t.prototype.drawPoint=function(t,o){},t.prototype.drawPolygon=function(t,o){},t.prototype.drawText=function(t,o){},t.prototype.setFillStrokeStyle=function(t,o){},t.prototype.setImageStyle=function(t,o){},t.prototype.setTextStyle=function(t,o){},t}();function Ta(r){return Array.isArray(r)?rh(r):r}var cc="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",cl=-1!==cc.indexOf("firefox");var d=-1!==cc.indexOf("safari")&&-1==cc.indexOf("chrom");var dl=-1!==cc.indexOf("webkit")&&-1==cc.indexOf("edge");var el=-1!==cc.indexOf("macintosh");var jd="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;var _e="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope;var vh="undefined"!=typeof Image&&Image.prototype.decode;var wh=function(){var e=!1;try{var $=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,$),window.removeEventListener("_",null,$)}catch(r){}return e}();function Ua(e,o,r){var t=r&&r.length?r.shift():_e?new OffscreenCanvas(e||300,o||300):document.createElement("canvas");return e&&(t.width=e),o&&(t.height=o),t.getContext("2d")}function fl(e){var o=e.offsetWidth,r=getComputedStyle(e);return o+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function gl(e){var o=e.offsetHeight,r=getComputedStyle(e);return o+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function dc(e,o){var r=o.parentNode;r&&r.replaceChild(e,o)}function kd(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function xh(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function hl(e,o){for(var r=e.childNodes,t=0;;++t){var n=r[t],$=o[t];if(!n&&!$)break;n!==$&&(n?$?e.insertBefore($,n):(e.removeChild(n),--t):e.appendChild($))}}var ld="ol-hidden";var il="ol-selectable";var Va="ol-unselectable";var jl="ol-unsupported";var Lb="ol-control";var md="ol-collapsed";var kl=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),yh=["style","variant","weight","size","lineHeight","family"],zh=function(e){var $=e.match(kl);if(!$)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},t=0,a=yh.length;t<a;++t){var o=$[t+1];void 0!==o&&(r[yh[t]]=o)}return r.families=r.family.split(/,\s?/),r};var Ah="10px sans-serif";var hb="#000";var ec="round";var nd=[];var od=0;var fc="round";var Fc=10;var Gc="#000";var Hc="center";var pd="middle";var Mb=[0,0,0,0];var Ic=1;var ib=new Ka;var ll=new Vb;ll.setSize=function(){console.warn("labelCache is deprecated.")};var ml,qd=null,af={};var nl=function(){var e,t,$=100,r="32px ",i=["monospace","serif"],a=i.length,o="wmytzilWMYTZIL@#/&?$%10\uF013";function n(e,$,n){for(var s=!0,A=0;A<a;++A){var x=i[A];if(t=rd(e+" "+$+" "+r+x,o),n!=x){var l=rd(e+" "+$+" "+r+n+","+x,o);s=s&&l!=t}}return!!s}function s(){for(var t=!0,r=ib.getKeys(),i=0,a=r.length;i<a;++i){var o=r[i];ib.get(o)<$&&(n.apply(this,o.split("\n"))?(Tb(af),qd=null,ml=void 0,ib.set(o,$)):(ib.set(o,ib.get(o)+1,!0),t=!1))}t&&(clearInterval(e),e=void 0)}return function(t){var r=zh(t);if(r)for(var i=r.families,a=0,o=i.length;a<o;++a){var A=i[a],x=r.style+"\n"+r.weight+"\n"+A;void 0===ib.get(x)&&(ib.set(x,$,!0),n(r.style,r.weight,A)||(ib.set(x,0,!0),void 0===e&&(e=setInterval(s,32))))}}}();var ol=function(){var e,t=af;return function($){var r=t[$];if(null==r)if(_e){var i=zh($),a=Bh($,"\u017Dg"),o=isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight);af[$]=o*(a.actualBoundingBoxAscent+a.actualBoundingBoxDescent)}else e||((e=document.createElement("div")).innerHTML="M",e.style.margin="0 !important",e.style.padding="0 !important",e.style.position="absolute !important",e.style.left="-99999px !important"),e.style.font=$,document.body.appendChild(e),r=e.offsetHeight,t[$]=r,document.body.removeChild(e);return r}}();function Bh(e,t){return qd||(qd=Ua(1,1)),e!=ml&&(qd.font=e,ml=qd.font),qd.measureText(t)}function rd(e,t){return Bh(e,t).width}function Ch(e,t,$){if(t in $)return $[t];var r=rd(e,t);return $[t]=r,r}function pl(e,t,$){for(var r=t.length,i=0,a=0;a<r;++a){var o=rd(e,t[a]);i=Math.max(i,o),$.push(o)}return i}function Dh(e,t,$,r){0!==t&&(e.translate($,r),e.rotate(t),e.translate(-$,-r))}function Eh(e,t,$,r,i,a,o,n,s,A,x){e.save(),1!==$&&(e.globalAlpha*=$),t&&e.setTransform.apply(e,t),r.contextInstructions?(e.translate(s,A),e.scale(x[0],x[1]),ql(r,e)):x[0]<0||x[1]<0?(e.translate(s,A),e.scale(x[0],x[1]),e.drawImage(r,i,a,o,n,0,0,o,n)):e.drawImage(r,i,a,o,n,s,A,o*x[0],n*x[1]),e.restore()}function ql(e,t){for(var $=e.contextInstructions,r=0,i=$.length;r<i;r+=2)Array.isArray($[r+1])?t[$[r]].apply(t,$[r+1]):t[$[r]]=$[r+1]}var rl=$e&&$e.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Fh=function(t){function e(e,i,o,s,a,r,n){var l=t.call(this)||this;return l.context_=e,l.pixelRatio_=i,l.extent_=o,l.transform_=s,l.viewRotation_=a,l.squaredTolerance_=r,l.userTransform_=n,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=[0,0],l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=[0,0],l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=Qa(),l}return rl(e,t),e.prototype.drawImages_=function(t,e,i,o){if(this.image_){var s=Db(t,e,i,2,this.transform_,this.pixelCoordinates_),a=this.context_,r=this.tmpLocalTransform_,n=a.globalAlpha;1!=this.imageOpacity_&&(a.globalAlpha=n*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var h=0,f=s.length;h<f;h+=2){var _=s[h]-this.imageAnchorX_,m=s[h+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var g=_+this.imageAnchorX_,p=m+this.imageAnchorY_;xb(r,g,p,1,1,l,-g,-p),a.setTransform.apply(a,r),a.translate(g,p),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.setTransform(1,0,0,1,0,0)}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,_,m,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(a.globalAlpha=n)}},e.prototype.drawText_=function(t,e,i,o){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var s=Db(t,e,i,o,this.transform_,this.pixelCoordinates_),a=this.context_,r=this.textRotation_;for(this.textRotateWithView_&&(r+=this.viewRotation_);e<i;e+=o){var n=s[e]+this.textOffsetX_,l=s[e+1]+this.textOffsetY_;if(0!==r||1!=this.textScale_[0]||1!=this.textScale_[1]){var h=xb(this.tmpLocalTransform_,n,l,1,1,r,-n,-l);a.setTransform.apply(a,h),a.translate(n,l),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&a.strokeText(this.text_,n,l),this.textFillState_&&a.fillText(this.text_,n,l)}}},e.prototype.moveToLineTo_=function(t,e,i,o,s){var a=this.context_,r=Db(t,e,i,o,this.transform_,this.pixelCoordinates_);a.moveTo(r[0],r[1]);var n=r.length;s&&(n-=2);for(var l=2;l<n;l+=2)a.lineTo(r[l],r[l+1]);return s&&a.closePath(),i},e.prototype.drawRings_=function(t,e,i,o){for(var s=0,a=i.length;s<a;++s)e=this.moveToLineTo_(t,e,i[s],o,!0);return e},e.prototype.drawCircle=function(t){if(Ga(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=_g(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],o=e[3]-e[1],s=Math.sqrt(i*i+o*o),a=this.context_;a.beginPath(),a.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case aa.POINT:this.drawPoint(t);break;case aa.LINE_STRING:this.drawLineString(t);break;case aa.POLYGON:this.drawPolygon(t);break;case aa.MULTI_POINT:this.drawMultiPoint(t);break;case aa.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case aa.MULTI_POLYGON:this.drawMultiPolygon(t);break;case aa.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case aa.CIRCLE:this.drawCircle(t);}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&Ga(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,o=e.length;i<o;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ga(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var o=t.getFlatMidpoint();this.drawText_(o,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Ga(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=t.getFlatCoordinates(),s=0,a=t.getEnds(),r=t.getStride();i.beginPath();for(var n=0,l=a.length;n<l;++n)s=this.moveToLineTo_(o,s,a[n],r,!1);i.stroke()}if(""!==this.text_){var h=t.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ga(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ga(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),o=0,s=t.getEndss(),a=t.getStride();e.beginPath();for(var r=0,n=s.length;r<n;++r){var l=s[r];o=this.drawRings_(i,o,l,a)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var h=t.getFlatInteriorPoints();this.drawText_(h,0,h.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(Sb(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,o=t.textAlign?t.textAlign:Hc;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=o&&(i.textAlign=o,e.textAlign=o),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=o,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:Ta(i||hb)}}else this.fillState_=null;if(e){var o=e.getColor(),s=e.getLineCap(),a=e.getLineDash(),r=e.getLineDashOffset(),n=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit();this.strokeState_={lineCap:void 0!==s?s:ec,lineDash:a||nd,lineDashOffset:r||od,lineJoin:void 0!==n?n:fc,lineWidth:this.pixelRatio_*(void 0!==l?l:Ic),miterLimit:void 0!==h?h:Fc,strokeStyle:Ta(o||Gc)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getSize();if(e){var i=t.getAnchor(),o=t.getImage(1),s=t.getOrigin(),a=t.getScaleArray();this.imageAnchorX_=i[0],this.imageAnchorY_=i[1],this.imageHeight_=e[1],this.image_=o,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=[this.pixelRatio_*a[0],this.pixelRatio_*a[1]],this.imageWidth_=e[0]}else this.image_=null}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:Ta(i||hb)}}else this.textFillState_=null;var o=t.getStroke();if(o){var s=o.getColor(),a=o.getLineCap(),r=o.getLineDash(),n=o.getLineDashOffset(),l=o.getLineJoin(),h=o.getWidth(),f=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==a?a:ec,lineDash:r||nd,lineDashOffset:n||od,lineJoin:void 0!==l?l:fc,lineWidth:void 0!==h?h:Ic,miterLimit:void 0!==f?f:Fc,strokeStyle:Ta(s||Gc)}}else this.textStrokeState_=null;var _=t.getFont(),m=t.getOffsetX(),g=t.getOffsetY(),p=t.getRotateWithView(),$=t.getRotation(),x=t.getScaleArray(),S=t.getText(),c=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:void 0!==_?_:Ah,textAlign:void 0!==c?c:Hc,textBaseline:void 0!==d?d:pd},this.text_=void 0!==S?S:"",this.textOffsetX_=void 0!==m?this.pixelRatio_*m:0,this.textOffsetY_=void 0!==g?this.pixelRatio_*g:0,this.textRotateWithView_=void 0!==p&&p,this.textRotation_=void 0!==$?$:0,this.textScale_=[this.pixelRatio_*x[0],this.pixelRatio_*x[1]]}else this.text_=""},e}(uh);$e.default=Fh;var ma={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};var na={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var sl=.5,Gh={Point:Bl,LineString:yl,Polygon:Dl,MultiPoint:Cl,MultiLineString:zl,MultiPolygon:Al,GeometryCollection:xl,Circle:vl};function tl(e,r){return parseInt(ga(e),10)-parseInt(ga(r),10)}function ul(e,r){var t=Hh(e,r);return t*t}function Hh(e,r){return sl*e/r}function vl(e,r,t,a){var $=t.getFill(),i=t.getStroke();if($||i){var n=e.getBuilder(t.getZIndex(),ma.CIRCLE);n.setFillStrokeStyle($,i),n.drawCircle(r,a)}var o=t.getText();if(o){var l=e.getBuilder(t.getZIndex(),ma.TEXT);l.setTextStyle(o,e.addDeclutter(!1)),l.drawText(r,a)}}function Ih(e,r,t,a,$,i){var n=!1,o=t.getImage();if(o){var l=o.getImageState();l==na.LOADED||l==na.ERROR?o.unlistenImageChange($):(l==na.IDLE&&o.load(),l=o.getImageState(),o.listenImageChange($),n=!0)}return wl(e,r,t,a,i),n}function wl(e,r,t,a,$){var i=t.getGeometryFunction()(r);if(i){var n=i.simplifyTransformed(a,$);if(t.getRenderer())Jh(e,n,t,r);else(0,Gh[n.getType()])(e,n,t,r)}}function Jh(e,r,t,a){if(r.getType()!=aa.GEOMETRY_COLLECTION)e.getBuilder(t.getZIndex(),ma.DEFAULT).drawCustom(r,a,t.getRenderer());else for(var $=r.getGeometries(),i=0,n=$.length;i<n;++i)Jh(e,$[i],t,a)}function xl(e,r,t,a){var $,i,n=r.getGeometriesArray();for($=0,i=n.length;$<i;++$){(0,Gh[n[$].getType()])(e,n[$],t,a)}}function yl(e,r,t,a){var $=t.getStroke();if($){var i=e.getBuilder(t.getZIndex(),ma.LINE_STRING);i.setFillStrokeStyle(null,$),i.drawLineString(r,a)}var n=t.getText();if(n){var o=e.getBuilder(t.getZIndex(),ma.TEXT);o.setTextStyle(n,e.addDeclutter(!1)),o.drawText(r,a)}}function zl(e,r,t,a){var $=t.getStroke();if($){var i=e.getBuilder(t.getZIndex(),ma.LINE_STRING);i.setFillStrokeStyle(null,$),i.drawMultiLineString(r,a)}var n=t.getText();if(n){var o=e.getBuilder(t.getZIndex(),ma.TEXT);o.setTextStyle(n,e.addDeclutter(!1)),o.drawText(r,a)}}function Al(e,r,t,a){var $=t.getFill(),i=t.getStroke();if(i||$){var n=e.getBuilder(t.getZIndex(),ma.POLYGON);n.setFillStrokeStyle($,i),n.drawMultiPolygon(r,a)}var o=t.getText();if(o){var l=e.getBuilder(t.getZIndex(),ma.TEXT);l.setTextStyle(o,e.addDeclutter(!1)),l.drawText(r,a)}}function Bl(e,r,t,a){var $=t.getImage();if($){if($.getImageState()!=na.LOADED)return;var i=e.getBuilder(t.getZIndex(),ma.IMAGE);i.setImageStyle($,e.addDeclutter(!1)),i.drawPoint(r,a)}var n=t.getText();if(n){var o=e.getBuilder(t.getZIndex(),ma.TEXT);o.setTextStyle(n,e.addDeclutter(!!$)),o.drawText(r,a)}}function Cl(e,r,t,a){var $=t.getImage();if($){if($.getImageState()!=na.LOADED)return;var i=e.getBuilder(t.getZIndex(),ma.IMAGE);i.setImageStyle($,e.addDeclutter(!1)),i.drawMultiPoint(r,a)}var n=t.getText();if(n){var o=e.getBuilder(t.getZIndex(),ma.TEXT);o.setTextStyle(n,e.addDeclutter(!!$)),o.drawText(r,a)}}function Dl(e,r,t,a){var $=t.getFill(),i=t.getStroke();if($||i){var n=e.getBuilder(t.getZIndex(),ma.POLYGON);n.setFillStrokeStyle($,i),n.drawPolygon(r,a)}var o=t.getText();if(o){var l=e.getBuilder(t.getZIndex(),ma.TEXT);l.setTextStyle(o,e.addDeclutter(!1)),l.drawText(r,a)}}var El=Xe&&Xe.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),Kh=function(e){function r(r){var t=e.call(this)||this;return t.map_=r,t.declutterTree_=null,t}return El(r,e),r.prototype.dispatchRenderEvent=function(e,r){ca()},r.prototype.calculateMatrices2D=function(e){var r=e.viewState,t=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;xb(t,e.size[0]/2,e.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]),zg(o,t)},r.prototype.forEachFeatureAtCoordinate=function(e,r,t,o,n,a,i,$){var c,p=r.viewState;function u(e,r,t){return n.call(a,r,e?t:null)}var h=p.projection,s=Ug(e.slice(),h),l=[[0,0]];if(h.canWrapX()&&o){var f=h.getExtent(),I=Fa(f);l.push([-I,0],[I,0])}var d,m=r.layerStatesArray,v=m.length;this.declutterTree_&&(d=this.declutterTree_.all().map(function(e){return e.value}));for(var y=[],_=0;_<l.length;_++)for(var x=v-1;x>=0;--x){var g=m[x],j=g.layer;if(j.hasRenderer()&&Ec(g,p)&&i.call($,j)){var C=j.getRenderer(),T=j.getSource();if(C&&T){var q=T.getWrapX()?s:e,E=u.bind(null,g.managed);y[0]=q[0]+l[_][0],y[1]=q[1]+l[_][1],c=C.forEachFeatureAtCoordinate(y,r,t,E,d)}if(c)return c}}},r.prototype.forEachLayerAtPixel=function(e,r,t,o,n){return ca()},r.prototype.hasFeatureAtCoordinate=function(e,r,t,o,n,a){return void 0!==this.forEachFeatureAtCoordinate(e,r,t,o,Ea,this,n,a)},r.prototype.getMap=function(){return this.map_},r.prototype.renderFrame=function(e){this.declutterTree_=bl(e,this.declutterTree_)},r.prototype.scheduleExpireIconCache=function(e){hd.canExpireCache()&&e.postRenderFunctions.push(Fl)},r}(_d);function Fl(e,r){hd.expire()}Xe.default=Kh;var bf={};var Gl=bf&&bf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cf=function(t){function e(e,r,n,o){var $=t.call(this,e)||this;return $.inversePixelTransform=r,$.frameState=n,$.context=o,$}return Gl(e,t),e}(Da);bf.default=cf;var Hl=We&&We.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),df=function(e){function r(r){var t=e.call(this,r)||this;t.fontChangeListenerKey_=ea(ib,mb.PROPERTYCHANGE,r.redrawText.bind(r)),t.element_=document.createElement("div");var n=t.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",t.element_.className=Va+" ol-layers";var s=r.getViewport();return s.insertBefore(t.element_,s.firstChild||null),t.children_=[],t.renderedVisible_=!0,t}return Hl(r,e),r.prototype.dispatchRenderEvent=function(e,r){var t=this.getMap();if(t.hasListener(e)){var n=new cf(e,void 0,r);t.dispatchEvent(n)}},r.prototype.disposeInternal=function(){ia(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},r.prototype.renderFrame=function(r){if(r){this.calculateMatrices2D(r),this.dispatchRenderEvent(Jb.PRECOMPOSE,r);var t=r.layerStatesArray.sort(function(e,r){return e.zIndex-r.zIndex}),n=r.viewState;this.children_.length=0;for(var s=null,i=0,a=t.length;i<a;++i){var o=t[i];if(r.layerIndex=i,Ec(o,n)&&(o.sourceState==Kb.READY||o.sourceState==Kb.UNDEFINED)){var $=o.layer.render(r,s);$&&$!==s&&(this.children_.push($),s=$)}}e.prototype.renderFrame.call(this,r),hl(this.element_,this.children_),this.dispatchRenderEvent(Jb.POSTCOMPOSE,r),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(r)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},r.prototype.forEachLayerAtPixel=function(e,r,t,n,s){for(var i=r.viewState,a=r.layerStatesArray,o=a.length-1;o>=0;--o){var $=a[o],l=$.layer;if(l.hasRenderer()&&Ec($,i)&&s(l)){var p=l.getRenderer().getDataAtPixel(e,r,t);if(p){var c=n(l,p);if(c)return c}}}},r}(Kh);We.default=df;var ef={};var sd={};var qa={ADD:"add",REMOVE:"remove"};var Lh=sd&&sd.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mh={LENGTH:"length"},Jc=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.element=r,o.index=n,o}return Lh(e,t),e}(Da);sd.CollectionEvent=Jc;var xa=function(t){function e(e,r){var n=t.call(this)||this,o=r||{};if(n.unique_=!!o.unique,n.array_=e||[],n.unique_)for(var i=0,a=n.array_.length;i<a;++i)n.assertUnique_(n.array_[i],i);return n.updateLength_(),n}return Lh(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(Mh.LENGTH)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Jc(qa.ADD,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Jc(qa.REMOVE,e,t)),e},e.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Jc(qa.REMOVE,n,t)),this.dispatchEvent(new Jc(qa.ADD,e,t))}else{for(var o=r;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(Mh.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new ge(58)},e}(Ka);sd.default=xa;var ff={};var Il=ff&&ff.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gf={LAYERS:"layers"},Nh=function(e){function t(t){var n=this,r=t||{},i=Aa({},r);delete i.layers;var o=r.layers;return(n=e.call(this,i)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addEventListener(oa(gf.LAYERS),n.handleLayersChanged_),o?Array.isArray(o)?o=new xa(o.slice(),{unique:!0}):ja("function"==typeof o.getArray,43):o=new xa(void 0,{unique:!0}),n.setLayers(o),n}return Il(t,e),t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(ia),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var t in this.layersListenerKeys_.push(ea(e,qa.ADD,this.handleLayersAdd_,this),ea(e,qa.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[t].forEach(ia);Tb(this.listenerKeys_);for(var n=e.getArray(),r=0,i=n.length;r<i;r++){var o=n[r];this.listenerKeys_[ga(o)]=[ea(o,mb.PROPERTYCHANGE,this.handleLayerChange_,this),ea(o,ba.CHANGE,this.handleLayerChange_,this)]}this.changed()},t.prototype.handleLayersAdd_=function(e){var t=e.element;this.listenerKeys_[ga(t)]=[ea(t,mb.PROPERTYCHANGE,this.handleLayerChange_,this),ea(t,ba.CHANGE,this.handleLayerChange_,this)],this.changed()},t.prototype.handleLayersRemove_=function(e){var t=e.element,n=ga(t);this.listenerKeys_[n].forEach(ia),delete this.listenerKeys_[n],this.changed()},t.prototype.getLayers=function(){return this.get(gf.LAYERS)},t.prototype.setLayers=function(e){this.set(gf.LAYERS,e)},t.prototype.getLayersArray=function(e){var t=void 0!==e?e:[];return this.getLayers().forEach(function(e){e.getLayersArray(t)}),t},t.prototype.getLayerStatesArray=function(e){var t=void 0!==e?e:[],n=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});for(var r=this.getLayerState(),i=n,o=t.length;i<o;i++){var s=t[i];s.opacity*=r.opacity,s.visible=s.visible&&r.visible,s.maxResolution=Math.min(s.maxResolution,r.maxResolution),s.minResolution=Math.max(s.minResolution,r.minResolution),s.minZoom=Math.max(s.minZoom,r.minZoom),s.maxZoom=Math.min(s.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==s.extent?s.extent=Cj(s.extent,r.extent):s.extent=r.extent)}return t},t.prototype.getSourceState=function(){return Kb.READY},t}(Ze);ff.default=Nh;var hf={};var jf={};var Jl=jf&&jf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kc=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.map=r,o.frameState=void 0!==n?n:null,o}return Jl(e,t),e}(Da);jf.default=Kc;var Kl=hf&&hf.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Wa=function(t){function e(e,o,n,r,i){var p=t.call(this,e,o,i)||this;return p.originalEvent=n,p.pixel_=null,p.coordinate_=null,p.dragging=void 0!==r&&r,p}return Kl(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Kc);hf.default=Wa;var kf={};var fa={SINGLECLICK:"singleclick",CLICK:ba.CLICK,DBLCLICK:ba.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Xa={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Ll=kf&&kf.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),Oh=function(e){function t(t,o){var i=e.call(this,t)||this;i.map_=t,i.clickTimeoutId_,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=o?o*jd:jd,i.down_=null;var n=i.map_.getViewport();return i.activePointers_=0,i.trackedTouches_={},i.element_=n,i.pointerdownListenerKey_=ea(n,Xa.POINTERDOWN,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=ea(n,Xa.POINTERMOVE,i.relayEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(ba.TOUCHMOVE,i.boundHandleTouchMove_,!!wh&&{passive:!1}),i}return Ll(t,e),t.prototype.emulateClick_=function(e){var t=new Wa(fa.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Wa(fa.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var t=new Wa(fa.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}.bind(this),250)},t.prototype.updateActivePointers_=function(e){var t=e;t.type==fa.POINTERUP||t.type==fa.POINTERCANCEL?delete this.trackedTouches_[t.pointerId]:t.type==fa.POINTERDOWN&&(this.trackedTouches_[t.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},t.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var t=new Wa(fa.POINTERUP,this.map_,e);this.dispatchEvent(t),t.propagationStopped||this.dragging_||!this.isMouseActionButton_(e)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(ia),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(e){return 0===e.button},t.prototype.handlePointerDown_=function(e){this.updateActivePointers_(e);var t=new Wa(fa.POINTERDOWN,this.map_,e);this.dispatchEvent(t),this.down_=e,0===this.dragListenerKeys_.length&&(this.dragListenerKeys_.push(ea(document,fa.POINTERMOVE,this.handlePointerMove_,this),ea(document,fa.POINTERUP,this.handlePointerUp_,this),ea(this.element_,fa.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==document&&this.dragListenerKeys_.push(ea(this.element_.getRootNode(),fa.POINTERUP,this.handlePointerUp_,this)))},t.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=!0;var t=new Wa(fa.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(t)}},t.prototype.relayEvent_=function(e){this.originalPointerMoveEvent_=e;var t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new Wa(e.type,this.map_,e,t))},t.prototype.handleTouchMove_=function(e){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||e.preventDefault()},t.prototype.isMoving_=function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(ia(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ba.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ia(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ia),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},t}(Vb);kf.default=Oh;var gc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"};var ya={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var td={};var ud=1/0;var Ml=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Tb(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},t.prototype.enqueue=function(t){ja(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=ud&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,r=e[t],s=i[t],o=t;t<n>>1;){var u=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),p=h<n&&i[h]<i[u]?h:u;e[t]=e[p],i[t]=i[p],t=p}e[t]=r,i[t]=s,this.siftDown_(o,t)},t.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,r=i[e],s=n[e];e>t;){var o=this.getParentIndex_(e);if(!(n[o]>s))break;i[e]=i[o],n[e]=n[o],e=o}i[e]=r,n[e]=s},t.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,r=this.elements_,s=this.priorities_,o=0,u=r.length;for(e=0;e<u;++e)(i=n(t=r[e]))==ud?delete this.queuedElements_[this.keyFunction_(t)]:(s[o]=i,r[o++]=t);r.length=o,s.length=o,this.heapify_()},t}();var vd={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var Nl=td&&td.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ph=function(t){function e(e,i){var r=t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=i,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return Nl(e,t),e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);i&&e[0].addEventListener(ba.CHANGE,this.boundHandleTileChange_);return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(e.hifi&&i===vd.LOADED||i===vd.ERROR||i===vd.EMPTY){e.removeEventListener(ba.CHANGE,this.boundHandleTileChange_);var r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,r,n=0;this.tilesLoading_<t&&n<e&&this.getCount()>0;)r=(i=this.dequeue()[0]).getKey(),i.getState()!==vd.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++n,i.load())},e}(Ml);function Qh(t,e,i,r,n){if(!(t&&i in t.wantedTiles))return ud;if(!t.wantedTiles[i][e.getKey()])return ud;var o=t.viewState.center,a=r[0]-o[0],$=r[1]-o[1];return 65536*Math.log(n)+Math.sqrt(a*a+$*$)/n}td.default=Ph,td.getTilePriority=Qh;var Nb={};var va={ANIMATING:0,INTERACTING:1};var La={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var Ol=256;function Rh(t,$,e){return function(r,a,c,o){if(r){var n=$?0:c[0]*a,x=$?0:c[1]*a,p=t[0]+n/2,z=t[2]-n/2,R=t[1]+x/2,h=t[3]-x/2;p>z&&(z=p=(z+p)/2),R>h&&(h=R=(h+R)/2);var m=wa(r[0],p,z),M=wa(r[1],R,h),i=30*a;return o&&e&&(m+=-i*Math.log(1+Math.max(0,p-r[0])/i)+i*Math.log(1+Math.max(0,r[0]-z)/i),M+=-i*Math.log(1+Math.max(0,R-r[1])/i)+i*Math.log(1+Math.max(0,r[1]-h)/i)),[m,M]}}}function Pl(t){return t}function lf(o,t,e,n){var r=Fa(t)/e[0],a=ob(t)/e[1];return n?Math.min(o,Math.max(r,a)):Math.min(o,Math.min(r,a))}function mf(o,t,e){var n=Math.min(o,t);return n*=Math.log(1+50*Math.max(0,o/t-1))/50+1,e&&(n=Math.max(n,e),n/=Math.log(1+50*Math.max(0,e/o-1))/50+1),wa(n,e/2,2*t)}function Ql(o,t,e,n){return function(r,a,$,l){if(void 0!==r){var i=o[0],p=o[o.length-1],m=e?lf(i,e,$,n):i;if(l)return void 0===t||t?mf(r,m,p):wa(r,p,m);var u=Math.min(m,r),h=Math.floor(vg(o,u,a));return o[h]>m&&h<o.length-1?o[h+1]:o[h]}}}function Rl(o,t,e,n,r,a){return function($,l,i,p){if(void 0!==$){var m=r?lf(t,r,i,a):t,u=void 0!==e?e:0;if(p)return void 0===n||n?mf($,m,u):wa($,u,m);var h=Math.ceil(Math.log(t/m)/Math.log(o)-1e-9),M=-l*(.5-1e-9)+.5,c=Math.min(m,$),s=Math.floor(Math.log(t/c)/Math.log(o)+M),v=Math.max(h,s),g=t/Math.pow(o,v);return wa(g,u,m)}}}function Sh(o,t,e,n,r){return function(a,$,l,i){if(void 0!==a){var p=n?lf(o,n,l,r):o;return(void 0===e||e)&&i?mf(a,p,t):wa(a,t,p)}}}function nf(e){return void 0!==e?0:void 0}function Th(e){return void 0!==e?e:void 0}function Sl(e){var o=2*Math.PI/e;return function(e,r){return r?e:void 0!==e?e=Math.floor(e/o+.5)*o:void 0}}function Tl(e){var o=e||db(5);return function(e,r){return r?e:void 0!==e?Math.abs(e)<=o?0:e:void 0}}function Ul(e){return Math.pow(e,3)}function Ob(e){return 1-Ul(1-e)}function Vl(e){return 3*e*e-2*e*e*e}function Wl(e){return e}var Xl=Nb&&Nb.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function i(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),of=0,wd=function(t){function o(o){var e=t.call(this)||this,i=Aa({},o);return e.hints_=[0,0],e.animations_=[],e.updateAnimationKey_,e.projection_=ne(i.projection,"EPSG:3857"),e.viewportSize_=[100,100],e.targetCenter_=null,e.targetResolution_,e.targetRotation_,e.cancelAnchor_=void 0,i.center&&(i.center=ha(i.center,e.projection_)),i.extent&&(i.extent=ac(i.extent,e.projection_)),e.applyOptions_(i),e}return Xl(o,t),o.prototype.applyOptions_=function(t){var o=Vh(t);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=o.minZoom;var e=Uh(t),i=o.constraint,n=Wh(t);this.constraints_={center:e,resolution:i,rotation:n},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},o.prototype.getUpdatedOptions_=function(t){var o=Aa({},this.options_);return void 0!==o.resolution?o.resolution=this.getResolution():o.zoom=this.getZoom(),o.center=this.getCenterInternal(),o.rotation=this.getRotation(),Aa({},o,t)},o.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var o=new Array(arguments.length),e=0;e<o.length;++e){var i=arguments[e];i.center&&((i=Aa({},i)).center=ha(i.center,this.getProjection())),i.anchor&&((i=Aa({},i)).anchor=ha(i.anchor,this.getProjection())),o[e]=i}this.animateInternal.apply(this,o)},o.prototype.animateInternal=function(t){var o,e=arguments.length;if(e>1&&"function"==typeof arguments[e-1]&&(o=arguments[e-1],--e),!this.isDef()){var i=arguments[e-1];return i.center&&this.setCenterInternal(i.center),void 0!==i.zoom&&this.setZoom(i.zoom),void 0!==i.rotation&&this.setRotation(i.rotation),void(o&&xd(o,!0))}for(var n=Date.now(),r=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_,h=[],p=0;p<e;++p){var $=arguments[p],u={start:n,complete:!1,anchor:$.anchor,duration:void 0!==$.duration?$.duration:1e3,easing:$.easing||Vl,callback:o};if($.center&&(u.sourceCenter=r,u.targetCenter=$.center.slice(),r=u.targetCenter),void 0!==$.zoom?(u.sourceResolution=s,u.targetResolution=this.getResolutionForZoom($.zoom),s=u.targetResolution):$.resolution&&(u.sourceResolution=s,u.targetResolution=$.resolution,s=u.targetResolution),void 0!==$.rotation){u.sourceRotation=a;var l=pe($.rotation-a+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=a+l,a=u.targetRotation}Xh(u)?u.complete=!0:n+=u.duration,h.push(u)}this.animations_.push(h),this.setHint(va.ANIMATING,1),this.updateAnimations_()},o.prototype.getAnimating=function(){return this.hints_[va.ANIMATING]>0},o.prototype.getInteracting=function(){return this.hints_[va.INTERACTING]>0},o.prototype.cancelAnimations=function(){var t;this.setHint(va.ANIMATING,-this.hints_[va.ANIMATING]);for(var o=0,e=this.animations_.length;o<e;++o){var i=this.animations_[o];if(i[0].callback&&xd(i[0].callback,!1),!t)for(var n=0,r=i.length;n<r;++n){var s=i[n];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},o.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),o=!1,e=this.animations_.length-1;e>=0;--e){for(var i=this.animations_[e],n=!0,r=0,s=i.length;r<s;++r){var a=i[r];if(!a.complete){var h=t-a.start,p=a.duration>0?h/a.duration:1;p>=1?(a.complete=!0,p=1):n=!1;var $=a.easing(p);if(a.sourceCenter){var u=a.sourceCenter[0],l=a.sourceCenter[1],c=u+$*(a.targetCenter[0]-u),m=l+$*(a.targetCenter[1]-l);this.targetCenter_=[c,m]}if(a.sourceResolution&&a.targetResolution){var g=1===$?a.targetResolution:a.sourceResolution+$*(a.targetResolution-a.sourceResolution);if(a.anchor){var E=this.getViewportSize_(this.getRotation()),N=this.constraints_.resolution(g,0,E,!0);this.targetCenter_=this.calculateCenterZoom(N,a.anchor)}this.targetResolution_=g,this.applyTargetState_(!0)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var _=1===$?pe(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+$*(a.targetRotation-a.sourceRotation);if(a.anchor){var q=this.constraints_.rotation(_,!0);this.targetCenter_=this.calculateCenterRotate(q,a.anchor)}this.targetRotation_=_}if(this.applyTargetState_(!0),o=!0,!a.complete)break}}if(n){this.animations_[e]=null,this.setHint(va.ANIMATING,-1);var R=i[0].callback;R&&xd(R,!0)}}this.animations_=this.animations_.filter(Boolean),o&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},o.prototype.calculateCenterRotate=function(t,o){var e,i=this.getCenterInternal();return void 0!==i&&(e=[i[0]-o[0],i[1]-o[1]],ve(e,t-this.getRotation()),Vj(e,o)),e},o.prototype.calculateCenterZoom=function(t,o){var e,i=this.getCenterInternal(),n=this.getResolution();void 0!==i&&void 0!==n&&(e=[o[0]-t*(o[0]-i[0])/n,o[1]-t*(o[1]-i[1])/n]);return e},o.prototype.getViewportSize_=function(t){var o=this.viewportSize_;if(t){var e=o[0],i=o[1];return[Math.abs(e*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(e*Math.sin(t))+Math.abs(i*Math.cos(t))]}return o},o.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},o.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Cb(t,this.getProjection()):t},o.prototype.getCenterInternal=function(){return this.get(La.CENTER)},o.prototype.getConstraints=function(){return this.constraints_},o.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},o.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},o.prototype.calculateExtent=function(t){var o=this.calculateExtentInternal(t);return Ac(o,this.getProjection())},o.prototype.calculateExtentInternal=function(t){var o=t||this.getViewportSize_(),e=this.getCenterInternal();ja(e,1);var i=this.getResolution();ja(void 0!==i,2);var n=this.getRotation();return ja(void 0!==n,3),Fg(e,i,n,o)},o.prototype.getMaxResolution=function(){return this.maxResolution_},o.prototype.getMinResolution=function(){return this.minResolution_},o.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},o.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},o.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},o.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},o.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},o.prototype.getProjection=function(){return this.projection_},o.prototype.getResolution=function(){return this.get(La.RESOLUTION)},o.prototype.getResolutions=function(){return this.resolutions_},o.prototype.getResolutionForExtent=function(t,o){return this.getResolutionForExtentInternal(ac(t,this.getProjection()),o)},o.prototype.getResolutionForExtentInternal=function(t,o){var e=o||this.getViewportSize_(),i=Fa(t)/e[0],n=ob(t)/e[1];return Math.max(i,n)},o.prototype.getResolutionForValueFunction=function(t){var o=t||2,e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(o);return function(t){return e/Math.pow(o,t*n)}},o.prototype.getRotation=function(){return this.get(La.ROTATION)},o.prototype.getValueForResolutionFunction=function(t){var o=Math.log(t||2),e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/o;return function(t){return Math.log(e/t)/o/n}},o.prototype.getState=function(){var t=this.getCenterInternal(),o=this.getProjection(),e=this.getResolution(),i=this.getRotation();return{center:t.slice(0),projection:void 0!==o?o:null,resolution:e,rotation:i,zoom:this.getZoom()}},o.prototype.getZoom=function(){var t,o=this.getResolution();return void 0!==o&&(t=this.getZoomForResolution(o)),t},o.prototype.getZoomForResolution=function(t){var o,e,i=this.minZoom_||0;if(this.resolutions_){var n=vg(this.resolutions_,t,1);i=n,o=this.resolutions_[n],e=n==this.resolutions_.length-1?2:o/this.resolutions_[n+1]}else o=this.maxResolution_,e=this.zoomFactor_;return i+Math.log(o/t)/Math.log(e)},o.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var o=wa(Math.floor(t),0,this.resolutions_.length-2),e=this.resolutions_[o]/this.resolutions_[o+1];return this.resolutions_[o]/Math.pow(e,wa(t-o,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},o.prototype.fit=function(t,o){var e,i=Aa({size:this.getViewportSize_()},o||{});if(ja(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){ja(!le(t),25);var n=ac(t,this.getProjection());e=Ib(n)}else if(t.getType()===aa.CIRCLE){n=ac(t.getExtent(),this.getProjection());(e=Ib(n)).rotate(this.getRotation(),Yb(n))}else{var r=Ia();e=r?t.clone().transform(r,this.getProjection()):t}this.fitInternal(e,i)},o.prototype.fitInternal=function(t,o){var e=o||{},i=e.size;i||(i=this.getViewportSize_());var n,r=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0!==e.nearest&&e.nearest;n=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;for(var a=t.getFlatCoordinates(),h=this.getRotation(),p=Math.cos(-h),$=Math.sin(-h),u=1/0,l=1/0,c=-1/0,m=-1/0,g=t.getStride(),E=0,N=a.length;E<N;E+=g){var _=a[E]*p-a[E+1]*$,q=a[E]*$+a[E+1]*p;u=Math.min(u,_),l=Math.min(l,q),c=Math.max(c,_),m=Math.max(m,q)}var R=this.getResolutionForExtentInternal([u,l,c,m],[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);R=isNaN(R)?n:Math.max(R,n),R=this.getConstrainedResolution(R,s?0:1),$=-$;var v=(u+c)/2,f=(l+m)/2,d=[(v+=(r[1]-r[3])/2*R)*p-(f+=(r[0]-r[2])/2*R)*$,f*p+v*$],y=e.callback?e.callback:wb;void 0!==e.duration?this.animateInternal({resolution:R,center:this.getConstrainedCenter(d,R),duration:e.duration,easing:e.easing},y):(this.targetResolution_=R,this.targetCenter_=d,this.applyTargetState_(!1,!0),xd(y,!0))},o.prototype.centerOn=function(t,o,e){this.centerOnInternal(ha(t,this.getProjection()),o,e)},o.prototype.centerOnInternal=function(t,o,e){var i=this.getRotation(),n=Math.cos(-i),r=Math.sin(-i),s=t[0]*n-t[1]*r,a=t[1]*n+t[0]*r,h=this.getResolution(),p=(s+=(o[0]/2-e[0])*h)*n-(a+=(e[1]-o[1]/2)*h)*(r=-r),$=a*n+s*r;this.setCenterInternal([p,$])},o.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},o.prototype.adjustCenter=function(t){var o=Cb(this.targetCenter_,this.getProjection());this.setCenter([o[0]+t[0],o[1]+t[1]])},o.prototype.adjustCenterInternal=function(t){var o=this.targetCenter_;this.setCenterInternal([o[0]+t[0],o[1]+t[1]])},o.prototype.adjustResolution=function(t,o){var e=o&&ha(o,this.getProjection());this.adjustResolutionInternal(t,e)},o.prototype.adjustResolutionInternal=function(t,o){var e=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(this.targetResolution_*t,0,i,e);o&&(this.targetCenter_=this.calculateCenterZoom(n,o)),this.targetResolution_*=t,this.applyTargetState_()},o.prototype.adjustZoom=function(t,o){this.adjustResolution(Math.pow(this.zoomFactor_,-t),o)},o.prototype.adjustRotation=function(t,o){o&&(o=ha(o,this.getProjection())),this.adjustRotationInternal(t,o)},o.prototype.adjustRotationInternal=function(t,o){var e=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,e);o&&(this.targetCenter_=this.calculateCenterRotate(i,o)),this.targetRotation_+=t,this.applyTargetState_()},o.prototype.setCenter=function(t){this.setCenterInternal(ha(t,this.getProjection()))},o.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},o.prototype.setHint=function(t,o){return this.hints_[t]+=o,this.changed(),this.hints_[t]},o.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},o.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},o.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},o.prototype.applyTargetState_=function(t,o){var e=this.getAnimating()||this.getInteracting()||o,i=this.constraints_.rotation(this.targetRotation_,e),n=this.getViewportSize_(i),r=this.constraints_.resolution(this.targetResolution_,0,n,e),s=this.constraints_.center(this.targetCenter_,r,n,e);this.get(La.ROTATION)!==i&&this.set(La.ROTATION,i),this.get(La.RESOLUTION)!==r&&this.set(La.RESOLUTION,r),this.get(La.CENTER)&&Ra(this.get(La.CENTER),s)||this.set(La.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},o.prototype.resolveConstraints=function(t,o,e){var i=void 0!==t?t:200,n=o||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,n,s),h=this.constraints_.center(this.targetCenter_,a,s);if(0===i&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=h,void this.applyTargetState_();var p=e||(0===i?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&Ra(this.getCenterInternal(),h)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:h,resolution:a,duration:i,easing:Ob,anchor:p}))},o.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(va.INTERACTING,1)},o.prototype.endInteraction=function(t,o,e){var i=e&&ha(e,this.getProjection());this.endInteractionInternal(t,o,i)},o.prototype.endInteractionInternal=function(t,o,e){this.setHint(va.INTERACTING,-1),this.resolveConstraints(t,o,e)},o.prototype.getConstrainedCenter=function(t,o){var e=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,o||this.getResolution(),e)},o.prototype.getConstrainedZoom=function(t,o){var e=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(e,o))},o.prototype.getConstrainedResolution=function(t,o){var e=o||0,i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)},o}(Ka);function xd(t,o){setTimeout(function(){t(o)},0)}function Uh(t){if(void 0!==t.extent){var o=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Rh(t.extent,t.constrainOnlyCenter,o)}var e=ne(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){var i=e.getExtent().slice();return i[0]=-1/0,i[2]=1/0,Rh(i,!1,!1)}return Pl}function Vh(t){var o,e,i,n=void 0!==t.minZoom?t.minZoom:of,r=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2,a=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,p=void 0!==t.showFullExtent&&t.showFullExtent,$=ne(t.projection,"EPSG:3857"),u=$.getExtent(),l=t.constrainOnlyCenter,c=t.extent;if(a||c||!$.isGlobal()||(l=!1,c=u),void 0!==t.resolutions){var m=t.resolutions;e=m[n],i=void 0!==m[r]?m[r]:m[m.length-1],o=t.constrainResolution?Ql(m,h,!l&&c,p):Sh(e,i,h,!l&&c,p)}else{var g=(u?Math.max(Fa(u),ob(u)):360*_a[Ba.DEGREES]/$.getMetersPerUnit())/Ol/Math.pow(2,of),E=g/Math.pow(2,28-of);void 0!==(e=t.maxResolution)?n=0:e=g/Math.pow(s,n),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?e/Math.pow(s,r):g/Math.pow(s,r):E),r=n+Math.floor(Math.log(e/i)/Math.log(s)),i=e/Math.pow(s,r-n),o=t.constrainResolution?Rl(s,e,i,h,!l&&c,p):Sh(e,i,h,!l&&c,p)}return{constraint:o,maxResolution:e,minResolution:i,minZoom:n,zoomFactor:s}}function Wh(t){if(void 0===t.enableRotation||t.enableRotation){var o=t.constrainRotation;return void 0===o||!0===o?Tl():!1===o?Th:"number"==typeof o?Sl(o):Th}return nf}function Xh(t){return!(t.sourceCenter&&t.targetCenter&&!Ra(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}Nb.createCenterConstraint=Uh,Nb.createResolutionConstraint=Vh,Nb.createRotationConstraint=Wh,Nb.isNoopAnimation=Xh,Nb.default=wd;function Yl($){return $[0]>0&&$[1]>0}function yd($,r){return Array.isArray($)?$:(void 0===r?r=[$,$]:(r[0]=$,r[1]=$),r)}var Zl=ef&&ef.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),pf=function(e){function t(t){var r=e.call(this)||this,i=$l(t);return r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(r),r.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,r.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:jd,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(r),r.coordinateToPixelTransform_=Qa(),r.pixelToCoordinateTransform_=Qa(),r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.style.pointerEvents="none",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.style.pointerEvents="none",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=null,r.moveTolerance_=t.moveTolerance,r.keyboardEventTarget_=i.keyboardEventTarget,r.keyHandlerKeys_=null,r.controls=i.controls||new xa,r.interactions=i.interactions||new xa,r.overlays_=i.overlays,r.overlayIdIndex_={},r.renderer_=null,r.handleResize_,r.postRenderFunctions_=[],r.tileQueue_=new Ph(r.getTilePriority.bind(r),r.handleTileChange_.bind(r)),r.addEventListener(oa(ya.LAYERGROUP),r.handleLayerGroupChanged_),r.addEventListener(oa(ya.VIEW),r.handleViewChanged_),r.addEventListener(oa(ya.SIZE),r.handleSizeChanged_),r.addEventListener(oa(ya.TARGET),r.handleTargetChanged_),r.setProperties(i.values),r.controls.forEach(function(e){e.setMap(this)}.bind(r)),r.controls.addEventListener(qa.ADD,function(e){e.element.setMap(this)}.bind(r)),r.controls.addEventListener(qa.REMOVE,function(e){e.element.setMap(null)}.bind(r)),r.interactions.forEach(function(e){e.setMap(this)}.bind(r)),r.interactions.addEventListener(qa.ADD,function(e){e.element.setMap(this)}.bind(r)),r.interactions.addEventListener(qa.REMOVE,function(e){e.element.setMap(null)}.bind(r)),r.overlays_.forEach(r.addOverlayInternal_.bind(r)),r.overlays_.addEventListener(qa.ADD,function(e){this.addOverlayInternal_(e.element)}.bind(r)),r.overlays_.addEventListener(qa.REMOVE,function(e){var t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)}.bind(r)),r}return Zl(t,e),t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(e){this.getControls().push(e)},t.prototype.addInteraction=function(e){this.getInteractions().push(e)},t.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)},t.prototype.addOverlay=function(e){this.getOverlays().push(e)},t.prototype.addOverlayInternal_=function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)},t.prototype.disposeInternal=function(){this.setTarget(null),e.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(e,t,r){if(this.frameState_){var i=this.getCoordinateFromPixelInternal(e),n=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==r.layerFilter?r.layerFilter:Ea,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,n,a,t,null,o,null)}},t.prototype.getFeaturesAtPixel=function(e,t){var r=[];return this.forEachFeatureAtPixel(e,function(e){r.push(e)},t),r},t.prototype.forEachLayerAtPixel=function(e,t,r){if(this.frameState_){var i=r||{},n=void 0!==i.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=i.layerFilter||Ea;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,n,t,o)}},t.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(e),i=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:Ea,n=void 0!==t.hitTolerance?t.hitTolerance*this.frameState_.pixelRatio:0,o=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,n,o,i,null)},t.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},t.prototype.getEventCoordinateInternal=function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))},t.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect(),r="changedTouches"in e?e.changedTouches[0]:e;return[r.clientX-t.left,r.clientY-t.top]},t.prototype.getTarget=function(){return this.get(ya.TARGET)},t.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},t.prototype.getCoordinateFromPixel=function(e){return Cb(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(e){var t=this.frameState_;return t?ra(t.pixelToCoordinateTransform,e.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(ya.LAYERGROUP)},t.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},t.prototype.getLoading=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var i=e[t].layer.getSource();if(i&&i.loading)return!0}return!1},t.prototype.getPixelFromCoordinate=function(e){var t=ha(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)},t.prototype.getPixelFromCoordinateInternal=function(e){var t=this.frameState_;return t?ra(t.coordinateToPixelTransform,e.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(ya.SIZE)},t.prototype.getView=function(){return this.get(ya.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getTilePriority=function(e,t,r,i){return Qh(this.frameState_,e,t,r,i)},t.prototype.handleBrowserEvent=function(e,t){var r=t||e.type,i=new Wa(r,this,e);this.handleMapBrowserEvent(i)},t.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){var t=e.originalEvent,r=t.type;if(r===Xa.POINTERDOWN||r===ba.WHEEL||r===ba.KEYDOWN){var i=this.viewport_.getRootNode?this.viewport_.getRootNode():document,n=i===document?t.target:i.elementFromPoint(t.clientX,t.clientY);if(this.overlayContainerStopEvent_.contains(n)||!(i===document?document.documentElement:i).contains(n))return}e.frameState=this.frameState_;var o=this.getInteractions().getArray();if(!1!==this.dispatchEvent(e))for(var a=o.length-1;a>=0;a--){var s=o[a];if(s.getActive())if(!s.handleEvent(e))break}}},t.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var r=this.maxTilesLoading_,i=r;if(e){var n=e.viewHints;if(n[va.ANIMATING]||n[va.INTERACTING]){var o=!vh&&Date.now()-e.time>8;r=o?0:8,i=o?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,i))}!e||!this.hasListener(Jb.RENDERCOMPLETE)||e.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(Jb.RENDERCOMPLETE,e);for(var a=this.postRenderFunctions_,s=0,p=a.length;s<p;++s)a[s](this,e);a.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.mapBrowserEventHandler_){for(var t=0,r=this.keyHandlerKeys_.length;t<r;++t)ia(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(ba.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ba.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(ba.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,kd(this.viewport_)}if(e){for(var i in e.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Oh(this,this.moveTolerance_),fa)this.mapBrowserEventHandler_.addEventListener(fa[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ba.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ba.WHEEL,this.boundHandleBrowserEvent_,!!wh&&{passive:!1});var n=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[ea(n,ba.KEYDOWN,this.handleBrowserEvent,this),ea(n,ba.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(ba.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(ia(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ia(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=ea(e,mb.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ea(e,ba.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ia),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[ea(e,mb.PROPERTYCHANGE,this.render,this),ea(e,ba.CHANGE,this.render,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(e){return this.getControls().remove(e)},t.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},t.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)},t.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},t.prototype.renderFrame_=function(e){var t=this.getSize(),r=this.getView(),i=this.frameState_,n=null;if(void 0!==t&&Yl(t)&&r&&r.isDef()){var o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();n={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:i?i.declutterItems:[],extent:Fg(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{}}}if(this.frameState_=n,this.renderer_.renderFrame(n),n){if(n.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,n.postRenderFunctions),i)(!this.previousExtent_||!le(this.previousExtent_)&&!uc(n.extent,this.previousExtent_))&&(this.dispatchEvent(new Kc(gc.MOVESTART,this,i)),this.previousExtent_=Wb(this.previousExtent_));this.previousExtent_&&!n.viewHints[va.ANIMATING]&&!n.viewHints[va.INTERACTING]&&!uc(n.extent,this.previousExtent_)&&(this.dispatchEvent(new Kc(gc.MOVEEND,this,n)),Ag(n.extent,this.previousExtent_))}this.dispatchEvent(new Kc(gc.POSTRENDER,this,n)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},t.prototype.setLayerGroup=function(e){this.set(ya.LAYERGROUP,e)},t.prototype.setSize=function(e){this.set(ya.SIZE,e)},t.prototype.setTarget=function(e){this.set(ya.TARGET,e)},t.prototype.setView=function(e){this.set(ya.VIEW,e)},t.prototype.updateSize=function(){var e=this.getTargetElement();if(e){var t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var e=this.getView();if(e){var t=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(t=[parseInt(r.width,10),parseInt(r.height,10)]),e.setViewportSize(t)}},t}(Ka);function $l(e){var t=null;void 0!==e.keyboardEventTarget&&(t="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r,i,n,o={},a=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new Nh({layers:e.layers});return o[ya.LAYERGROUP]=a,o[ya.TARGET]=e.target,o[ya.VIEW]=void 0!==e.view?e.view:new wd,void 0!==e.controls&&(Array.isArray(e.controls)?r=new xa(e.controls.slice()):(ja("function"==typeof e.controls.getArray,47),r=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?i=new xa(e.interactions.slice()):(ja("function"==typeof e.interactions.getArray,48),i=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?n=new xa(e.overlays.slice()):(ja("function"==typeof e.overlays.getArray,49),n=e.overlays):n=new xa,{controls:r,interactions:i,keyboardEventTarget:t,overlays:n,values:o}}ef.default=pf;function Yh(o){var r=o||{},t=new xa;return(void 0===r.zoom||r.zoom)&&t.push(new _h(r.zoomOptions)),(void 0===r.rotate||r.rotate)&&t.push(new $h(r.rotateOptions)),(void 0===r.attribution||r.attribution)&&t.push(new Zh(r.attributionOptions)),t}var qf={};var rf={};var _l=rf&&rf.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ya=function(e){function t(t){var r=e.call(this)||this,n=t.element;return!n||t.target||n.style.pointerEvents||(n.style.pointerEvents="auto"),r.element=n||null,r.target_=null,r.map_=null,r.listenerKeys=[],t.render&&(r.render=t.render),t.target&&r.setTarget(t.target),r}return _l(t,e),t.prototype.disposeInternal=function(){kd(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(e){this.map_&&kd(this.element);for(var t=0,r=this.listenerKeys.length;t<r;++t)ia(this.listenerKeys[t]);(this.listenerKeys.length=0,this.map_=e,this.map_)&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==wb&&this.listenerKeys.push(ea(e,gc.POSTRENDER,this.render,this)),e.render())},t.prototype.render=function(e){},t.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},t}(Ka);rf.default=Ya;var am=qf&&qf.__extends||function(){var e=function(t,l){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var l in t)t.hasOwnProperty(l)&&(e[l]=t[l])})(t,l)};return function(t,l){function o(){this.constructor=t}e(t,l),t.prototype=null===l?Object.create(l):(o.prototype=l.prototype,new o)}}(),Zh=function(e){function t(t){var l=this,o=t||{};(l=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this).ulElement_=document.createElement("ul"),l.collapsed_=void 0===o.collapsed||o.collapsed,l.overrideCollapsible_=void 0!==o.collapsible,l.collapsible_=void 0===o.collapsible||o.collapsible,l.collapsible_||(l.collapsed_=!1);var i=void 0!==o.className?o.className:"ol-attribution",r=void 0!==o.tipLabel?o.tipLabel:"Attributions",a=void 0!==o.collapseLabel?o.collapseLabel:"\xBB";"string"==typeof a?(l.collapseLabel_=document.createElement("span"),l.collapseLabel_.textContent=a):l.collapseLabel_=a;var s=void 0!==o.label?o.label:"i";"string"==typeof s?(l.label_=document.createElement("span"),l.label_.textContent=s):l.label_=s;var n=l.collapsible_&&!l.collapsed_?l.collapseLabel_:l.label_,p=document.createElement("button");p.setAttribute("type","button"),p.title=r,p.appendChild(n),p.addEventListener(ba.CLICK,l.handleClick_.bind(l),!1);var c=i+" "+Va+" "+Lb+(l.collapsed_&&l.collapsible_?" "+md:"")+(l.collapsible_?"":" ol-uncollapsible"),d=l.element;return d.className=c,d.appendChild(l.ulElement_),d.appendChild(p),l.renderedAttributions_=[],l.renderedVisible_=!0,l}return am(t,e),t.prototype.collectSourceAttributions_=function(e){for(var t={},l=[],o=e.layerStatesArray,i=0,r=o.length;i<r;++i){var a=o[i];if(Ec(a,e.viewState)){var s=a.layer.getSource();if(s){var n=s.getAttributions();if(n){var p=n(e);if(p)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(p))for(var c=0,d=p.length;c<d;++c)p[c]in t||(l.push(p[c]),t[p[c]]=!0);else p in t||(l.push(p),t[p]=!0)}}}}return l},t.prototype.updateElement_=function(e){if(e){var t=this.collectSourceAttributions_(e),l=t.length>0;if(this.renderedVisible_!=l&&(this.element.style.display=l?"":"none",this.renderedVisible_=l),!Sb(t,this.renderedAttributions_)){xh(this.ulElement_);for(var o=0,i=t.length;o<i;++o){var r=document.createElement("li");r.innerHTML=t[o],this.ulElement_.appendChild(r)}this.renderedAttributions_=t}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},t.prototype.handleToggle_=function(){this.element.classList.toggle(md),this.collapsed_?dc(this.collapseLabel_,this.label_):dc(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(e){this.updateElement_(e.frameState)},t}(Ya);qf.default=Zh;var sf={};var bm=sf&&sf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),$h=function(t){function e(e){var r=this,o=e||{};r=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var a=void 0!==o.className?o.className:"ol-rotate",s=void 0!==o.label?o.label:"\u21E7";r.label_=null,"string"==typeof s?(r.label_=document.createElement("span"),r.label_.className="ol-compass",r.label_.textContent=s):(r.label_=s,r.label_.classList.add("ol-compass"));var i=o.tipLabel?o.tipLabel:"Reset rotation",n=document.createElement("button");n.className=a+"-reset",n.setAttribute("type","button"),n.title=i,n.appendChild(r.label_),n.addEventListener(ba.CLICK,r.handleClick_.bind(r),!1);var l=a+" "+Va+" "+Lb,$=r.element;return $.className=l,$.appendChild(n),r.callResetNorth_=o.resetNorth?o.resetNorth:void 0,r.duration_=void 0!==o.duration?o.duration:250,r.autoHide_=void 0===o.autoHide||o.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add(ld),r}return bm(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Ob}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var o="rotate("+r+"rad)";if(this.autoHide_){var a=this.element.classList.contains(ld);a||0!==r?a&&0!==r&&this.element.classList.remove(ld):this.element.classList.add(ld)}this.label_.style.transform=o}this.rotation_=r}},e}(Ya);sf.default=$h;var tf={};var cm=tf&&tf.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),_h=function(t){function e(e){var o=this,n=e||{};o=t.call(this,{element:document.createElement("div"),target:n.target})||this;var r=void 0!==n.className?n.className:"ol-zoom",a=void 0!==n.delta?n.delta:1,i=void 0!==n.zoomInLabel?n.zoomInLabel:"+",p=void 0!==n.zoomOutLabel?n.zoomOutLabel:"\u2212",l=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",d=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",s=document.createElement("button");s.className=r+"-in",s.setAttribute("type","button"),s.title=l,s.appendChild("string"==typeof i?document.createTextNode(i):i),s.addEventListener(ba.CLICK,o.handleClick_.bind(o,a),!1);var u=document.createElement("button");u.className=r+"-out",u.setAttribute("type","button"),u.title=d,u.appendChild("string"==typeof p?document.createTextNode(p):p),u.addEventListener(ba.CLICK,o.handleClick_.bind(o,-a),!1);var c=r+" "+Va+" "+Lb,$=o.element;return $.className=c,$.appendChild(s),$.appendChild(u),o.duration_=void 0!==n.duration?n.duration:250,o}return cm(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var o=e.getZoom();if(void 0!==o){var n=e.getConstrainedZoom(o+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:Ob})):e.setZoom(n)}}},e}(Ya);tf.default=_h;var uf={};var dm=uf&&uf.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function l(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(l.prototype=r.prototype,new l)}}(),ai=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],bi={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},em=function(e){function t(t){var r=this,l=t||{};(r=e.call(this,{element:document.createElement("div"),target:l.target})||this).cssClassName_=void 0!==l.className?l.className:"ol-full-screen";var s=void 0!==l.label?l.label:"\u2922";r.labelNode_="string"==typeof s?document.createTextNode(s):s;var n=void 0!==l.labelActive?l.labelActive:"\xD7";r.labelActiveNode_="string"==typeof n?document.createTextNode(n):n,r.button_=document.createElement("button");var o=l.tipLabel?l.tipLabel:"Toggle full-screen";r.setClassName_(r.button_,vf()),r.button_.setAttribute("type","button"),r.button_.title=o,r.button_.appendChild(r.labelNode_),r.button_.addEventListener(ba.CLICK,r.handleClick_.bind(r),!1);var u=r.cssClassName_+" "+Va+" "+Lb+" "+(ci()?"":jl),c=r.element;return c.className=u,c.appendChild(r.button_),r.keys_=void 0!==l.keys&&l.keys,r.source_=l.source,r}return dm(t,e),t.prototype.handleClick_=function(e){e.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){if(ci()){var e=this.getMap();if(e)if(vf())gm();else{var t=void 0;t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?fm(t):di(t)}}},t.prototype.handleFullScreenChange_=function(){var e=this.getMap();vf()?(this.setClassName_(this.button_,!0),dc(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(bi.ENTERFULLSCREEN)):(this.setClassName_(this.button_,!1),dc(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(bi.LEAVEFULLSCREEN)),e&&e.updateSize()},t.prototype.setClassName_=function(e,t){var r=this.cssClassName_+"-true",l=this.cssClassName_+"-false",s=t?r:l;e.classList.remove(r),e.classList.remove(l),e.classList.add(s)},t.prototype.setMap=function(t){if(e.prototype.setMap.call(this,t),t)for(var r=0,l=ai.length;r<l;++r)this.listenerKeys.push(ea(document,ai[r],this.handleFullScreenChange_,this))},t}(Ya);function ci(){var e=document.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)}function vf(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function di(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function fm(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():di(e)}function gm(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}uf.default=em;var wf={};var hm=wf&&wf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),xf="projection",ei="coordinateFormat",im=function(t){function e(e){var r=this,o=e||{},n=document.createElement("div");return n.className=void 0!==o.className?o.className:"ol-mouse-position",(r=t.call(this,{element:n,render:o.render,target:o.target})||this).addEventListener(oa(xf),r.handleProjectionChanged_),o.coordinateFormat&&r.setCoordinateFormat(o.coordinateFormat),o.projection&&r.setProjection(o.projection),r.undefinedHTML_=void 0!==o.undefinedHTML?o.undefinedHTML:"&#160;",r.renderOnMouseOut_=!!r.undefinedHTML_,r.renderedHTML_=n.innerHTML,r.mapProjection_=null,r.transform_=null,r}return hm(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(ei)},e.prototype.getProjection=function(){return this.get(xf)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var r=e.getViewport();this.listenerKeys.push(ea(r,Xa.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(ea(r,Xa.POINTEROUT,this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set(ei,t)},e.prototype.setProjection=function(t){this.set(xf,ua(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?Zb(this.mapProjection_,r):Hg}var o=this.getMap().getCoordinateFromPixelInternal(t);if(o){var n=Ia();n&&(this.transform_=Zb(this.mapProjection_,n)),this.transform_(o,o);var i=this.getCoordinateFormat();e=i?i(o):o.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e.prototype.render=function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},e}(Ya);wf.default=im;var yf={};var zf={};var Ca={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};var jm=zf&&zf.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),za={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},Af=function(t){function e(e){var i=t.call(this)||this;i.options=e,i.id=e.id,i.insertFirst=void 0===e.insertFirst||e.insertFirst,i.stopEvent=void 0===e.stopEvent||e.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==e.className?e.className:"ol-overlay-container "+il,i.element.style.position="absolute",i.element.style.pointerEvents="auto";var n=e.autoPan;return n&&"object"!=typeof n&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addEventListener(oa(za.ELEMENT),i.handleElementChanged),i.addEventListener(oa(za.MAP),i.handleMapChanged),i.addEventListener(oa(za.OFFSET),i.handleOffsetChanged),i.addEventListener(oa(za.POSITION),i.handlePositionChanged),i.addEventListener(oa(za.POSITIONING),i.handlePositioningChanged),void 0!==e.element&&i.setElement(e.element),i.setOffset(void 0!==e.offset?e.offset:[0,0]),i.setPositioning(void 0!==e.positioning?e.positioning:Ca.TOP_LEFT),void 0!==e.position&&i.setPosition(e.position),i}return jm(e,t),e.prototype.getElement=function(){return this.get(za.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(za.MAP)},e.prototype.getOffset=function(){return this.get(za.OFFSET)},e.prototype.getPosition=function(){return this.get(za.POSITION)},e.prototype.getPositioning=function(){return this.get(za.POSITIONING)},e.prototype.handleElementChanged=function(){xh(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(kd(this.element),ia(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=ea(t,gc.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(za.ELEMENT,t)},e.prototype.setMap=function(t){this.set(za.MAP,t)},e.prototype.setOffset=function(t){this.set(za.OFFSET,t)},e.prototype.setPosition=function(t){this.set(za.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(za.POSITION)){var i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),o=this.getRect(n,[fl(n),gl(n)]),r=t||{},s=void 0===r.margin?20:r.margin;if(!ab(i,o)){var a=o[0]-i[0],p=i[2]-o[2],$=o[1]-i[1],c=i[3]-o[3],l=[0,0];if(a<0?l[0]=a-s:p<0&&(l[0]=Math.abs(p)+s),$<0?l[1]=$-s:c<0&&(l[1]=Math.abs(c)+s),0!==l[0]||0!==l[1]){var d=e.getView().getCenterInternal(),h=e.getPixelFromCoordinateInternal(d),P=[h[0]+l[0],h[1]+l[1]],g=r.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(P),duration:g.duration,easing:g.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(za.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var r=Math.round(t[0]+n[0])+"px",s=Math.round(t[1]+n[1])+"px",a="0%",p="0%";o==Ca.BOTTOM_RIGHT||o==Ca.CENTER_RIGHT||o==Ca.TOP_RIGHT?a="-100%":o!=Ca.BOTTOM_CENTER&&o!=Ca.CENTER_CENTER&&o!=Ca.TOP_CENTER||(a="-50%"),o==Ca.BOTTOM_LEFT||o==Ca.BOTTOM_CENTER||o==Ca.BOTTOM_RIGHT?p="-100%":o!=Ca.CENTER_LEFT&&o!=Ca.CENTER_CENTER&&o!=Ca.CENTER_RIGHT||(p="-50%");var $="translate("+a+", "+p+") translate("+r+", "+s+")";this.rendered.transform_!=$&&(this.rendered.transform_=$,i.transform=$,i.msTransform=$)},e.prototype.getOptions=function(){return this.options},e}(Ka);zf.default=Af;var fi=yf&&yf.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),zd=.75,Lc=.1,km=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fi(t,e),t.prototype.createRenderer=function(){return new df(this)},t}(pf),lm=function(e){function t(t){var i=this,o=t||{};(i=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this).boundHandleRotationChanged_=i.handleRotationChanged_.bind(i),i.collapsed_=void 0===o.collapsed||o.collapsed,i.collapsible_=void 0===o.collapsible||o.collapsible,i.collapsible_||(i.collapsed_=!1),i.rotateWithView_=void 0!==o.rotateWithView&&o.rotateWithView,i.viewExtent_=void 0;var a=void 0!==o.className?o.className:"ol-overviewmap",r=void 0!==o.tipLabel?o.tipLabel:"Overview map",n=void 0!==o.collapseLabel?o.collapseLabel:"\xAB";"string"==typeof n?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=n):i.collapseLabel_=n;var l=void 0!==o.label?o.label:"\xBB";"string"==typeof l?(i.label_=document.createElement("span"),i.label_.textContent=l):i.label_=l;var p=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,s=document.createElement("button");s.setAttribute("type","button"),s.title=r,s.appendChild(p),s.addEventListener(ba.CLICK,i.handleClick_.bind(i),!1),i.ovmapDiv_=document.createElement("div"),i.ovmapDiv_.className="ol-overviewmap-map",i.view_=o.view,i.ovmap_=new km({view:o.view});var h=i.ovmap_;o.layers&&o.layers.forEach(function(e){h.addLayer(e)});var $=document.createElement("div");$.className="ol-overviewmap-box",$.style.boxSizing="border-box",i.boxOverlay_=new Af({position:[0,0],positioning:Ca.CENTER_CENTER,element:$}),i.ovmap_.addOverlay(i.boxOverlay_);var v=a+" "+Va+" "+Lb+(i.collapsed_&&i.collapsible_?" "+md:"")+(i.collapsible_?"":" ol-uncollapsible"),c=i.element;c.className=v,c.appendChild(i.ovmapDiv_),c.appendChild(s);var d=i,_=i.boxOverlay_,u=i.boxOverlay_.getElement(),M=function(e){var t,i={clientX:(t=e).clientX,clientY:t.clientY},o=h.getEventCoordinateInternal(i);_.setPosition(o)},m=function(e){var t=h.getEventCoordinateInternal(e);d.getMap().getView().setCenterInternal(t),window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",m)};return u.addEventListener("mousedown",function(){window.addEventListener("mousemove",M),window.addEventListener("mouseup",m)}),i}return fi(t,e),t.prototype.setMap=function(t){var i=this.getMap();if(t!==i){if(i){var o=i.getView();o&&this.unbindView_(o),this.ovmap_.setTarget(null)}if(e.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(ea(t,mb.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var a=t.getView();a&&(this.bindView_(a),a.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},t.prototype.handleMapPropertyChange_=function(e){if(e.key===ya.VIEW){var t=e.oldValue;t&&this.unbindView_(t);var i=this.getMap().getView();this.bindView_(i)}},t.prototype.bindView_=function(e){if(!this.view_){var t=new wd({projection:e.getProjection()});this.ovmap_.setView(t)}e.addEventListener(oa(La.ROTATION),this.boundHandleRotationChanged_),this.handleRotationChanged_()},t.prototype.unbindView_=function(e){e.removeEventListener(oa(La.ROTATION),this.boundHandleRotationChanged_)},t.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},t.prototype.validateExtent_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView().calculateExtentInternal(i);if(!this.viewExtent_||!uc(o,this.viewExtent_)){this.viewExtent_=o;var a=t.getSize(),r=t.getView().calculateExtentInternal(a),n=t.getPixelFromCoordinateInternal(wc(o)),l=t.getPixelFromCoordinateInternal(vc(o)),p=Math.abs(n[0]-l[0]),s=Math.abs(n[1]-l[1]),h=a[0],$=a[1];p<h*Lc||s<$*Lc||p>h*zd||s>$*zd?this.resetExtent_():ab(r,o)||this.recenter_()}}},t.prototype.resetExtent_=function(){if(0!==zd&&0!==Lc){var e=this.getMap(),t=this.ovmap_,i=e.getSize(),o=e.getView().calculateExtentInternal(i),a=t.getView(),r=Math.log(zd/Lc)/Math.LN2,n=1/(Math.pow(2,r/2)*Lc);Gg(o,n),a.fitInternal(Ib(o))}},t.prototype.recenter_=function(){var e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())},t.prototype.updateBox_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),o=e.getView(),a=t.getView(),r=this.rotateWithView_?0:-o.getRotation(),n=this.boxOverlay_,l=this.boxOverlay_.getElement(),p=o.getCenterInternal(),s=o.getResolution(),h=a.getResolution(),$=i[0]*s/h,v=i[1]*s/h;if(n.setPosition(p),l){l.style.width=$+"px",l.style.height=v+"px";var c="rotate("+r+"rad)";l.style.transform=c}}},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},t.prototype.handleToggle_=function(){this.element.classList.toggle(md),this.collapsed_?dc(this.collapseLabel_,this.label_):dc(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;if(!this.collapsed_){if(e.isRendered())return this.viewExtent_=void 0,void e.render();e.updateSize(),this.resetExtent_(),tc(e,gc.POSTRENDER,function(e){this.updateBox_()},this)}},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.setRotateWithView=function(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},t.prototype.getOverviewMap=function(){return this.ovmap_},t.prototype.render=function(e){this.validateExtent_(),this.updateBox_()},t}(Ya);yf.default=lm;var Ad={};var mm=Ad&&Ad.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Bf="units",qb={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};Ad.Units=qb;var nm=[1,2,5],Cf=25.4/.28,om=function(e){function t(t){var r=this,i=t||{},s=void 0!==i.className?i.className:i.bar?"ol-scale-bar":"ol-scale-line";return(r=e.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this).innerElement_=document.createElement("div"),r.innerElement_.className=s+"-inner",r.element.className=s+" "+Va,r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==i.minWidth?i.minWidth:64,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",r.addEventListener(oa(Bf),r.handleUnitsChanged_),r.setUnits(i.units||qb.METRIC),r.scaleBar_=i.bar||!1,r.scaleBarSteps_=i.steps||4,r.scaleBarText_=i.text||!1,r.dpi_=i.dpi||void 0,r}return mm(t,e),t.prototype.getUnits=function(){return this.get(Bf)},t.prototype.handleUnitsChanged_=function(){this.updateElement_()},t.prototype.setUnits=function(e){this.set(Bf,e)},t.prototype.setDpi=function(e){this.dpi_=e},t.prototype.updateElement_=function(){var e=this.viewState_;if(e){var t=e.center,r=e.projection,i=this.getUnits(),s=i==qb.DEGREES?Ba.DEGREES:Ba.METERS,n=Ig(r,e.resolution,t,s),a=this.minWidth_*(this.dpi_||Cf)/Cf,o=a*n,d="";if(i==qb.DEGREES){var $=_a[Ba.DEGREES];(o*=$)<$/60?(d="\u2033",n*=3600):o<$?(d="\u2032",n*=60):d="\xB0"}else i==qb.IMPERIAL?o<.9144?(d="in",n/=.0254):o<1609.344?(d="ft",n/=.3048):(d="mi",n/=1609.344):i==qb.NAUTICAL?(n/=1852,d="nm"):i==qb.METRIC?o<.001?(d="\u03BCm",n*=1e6):o<1?(d="mm",n*=1e3):o<1e3?d="m":(d="km",n/=1e3):i==qb.US?o<.9144?(d="in",n*=39.37):o<1609.344?(d="ft",n/=.30480061):(d="mi",n/=1609.3472):ja(!1,33);for(var l,p,c,h,_=3*Math.floor(Math.log(a*n)/Math.log(10));;){c=Math.floor(_/3);var u=Math.pow(10,c);if(l=nm[(_%3+3)%3]*u,p=Math.round(l/n),isNaN(p))return this.element.style.display="none",void(this.renderedVisible_=!1);if(p>=a)break;++_}h=this.scaleBar_?this.createScaleBar(p,l,d):l.toFixed(c<0?-c:0)+" "+d,this.renderedHTML_!=h&&(this.innerElement_.innerHTML=h,this.renderedHTML_=h),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.createScaleBar=function(e,t,r){for(var i="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),s=[],n=e/this.scaleBarSteps_,a="#ffffff",o=0;o<this.scaleBarSteps_;o++)0===o&&s.push(this.createMarker("absolute",o)),s.push("<div><div class=\"ol-scale-singlebar\" style=\"width: "+n+"px;background-color: "+a+";\"></div>"+this.createMarker("relative",o)+(o%2==0||2===this.scaleBarSteps_?this.createStepText(o,e,!1,t,r):"")+"</div>"),o===this.scaleBarSteps_-1&&s.push(this.createStepText(o+1,e,!0,t,r)),a="#ffffff"===a?"#000000":"#ffffff";return"<div style=\"display: flex;\">"+(this.scaleBarText_?"<div class=\"ol-scale-text\" style=\"width: "+e+"px;\">"+i+"</div>":"")+s.join("")+"</div>"},t.prototype.createMarker=function(e,t){return"<div class=\"ol-scale-step-marker\" style=\"position: "+e+";top: "+("absolute"===e?3:-10)+"px;\"></div>"},t.prototype.createStepText=function(e,t,r,i,s){var n=(0===e?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+s);return"<div class=\"ol-scale-step-text\" style=\"margin-left: "+(0===e?-3:t/this.scaleBarSteps_*-1)+"px;text-align: "+(0===e?"left":"center")+"; min-width: "+(0===e?0:t/this.scaleBarSteps_*2)+"px;left: "+(r?t+"px":"unset")+";\">"+n+"</div>"},t.prototype.getScaleForResolution=function(){var e=Ig(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center),t=this.dpi_||Cf,r=this.viewState_.projection.getMetersPerUnit();return parseFloat(e.toString())*r*39.37*t},t.prototype.render=function(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()},t}(Ya);Ad.default=om;var Df={};var pm=Df&&Df.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Mc={VERTICAL:0,HORIZONTAL:1},qm=function(t){function e(e){var i=this,r=e||{};(i=t.call(this,{element:document.createElement("div"),render:r.render})||this).dragListenerKeys_=[],i.currentResolution_=void 0,i.direction_=Mc.VERTICAL,i.dragging_,i.heightLimit_=0,i.widthLimit_=0,i.startX_,i.startY_,i.thumbSize_=null,i.sliderInitialized_=!1,i.duration_=void 0!==r.duration?r.duration:200;var n=void 0!==r.className?r.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=n+"-thumb "+Va;var s=i.element;return s.className=n+" "+Va+" "+Lb,s.appendChild(o),s.addEventListener(Xa.POINTERDOWN,i.handleDraggerStart_.bind(i),!1),s.addEventListener(Xa.POINTERMOVE,i.handleDraggerDrag_.bind(i),!1),s.addEventListener(Xa.POINTERUP,i.handleDraggerEnd_.bind(i),!1),s.addEventListener(ba.CLICK,i.handleContainerClick_.bind(i),!1),o.addEventListener(ba.CLICK,ij,!1),i}return pm(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight;if(0===e&&0===i)return this.sliderInitialized_=!1;var r=t.firstElementChild,n=getComputedStyle(r),o=r.offsetWidth+parseFloat(n.marginRight)+parseFloat(n.marginLeft),s=r.offsetHeight+parseFloat(n.marginTop)+parseFloat(n.marginBottom);return this.thumbSize_=[o,s],e>i?(this.direction_=Mc.HORIZONTAL,this.widthLimit_=e-o):(this.direction_=Mc.VERTICAL,this.heightLimit_=i-s),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(i),n=e.getConstrainedZoom(e.getZoomForResolution(r));e.animateInternal({zoom:n,duration:this.duration_,easing:Ob})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var i=this.handleDraggerDrag_,r=this.handleDraggerEnd_;this.dragListenerKeys_.push(ea(document,Xa.POINTERMOVE,i,this),ea(document,Xa.POINTERUP,r,this))}}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,i=t.clientY-this.startY_,r=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(r),this.getMap().getView().setResolution(this.currentResolution_)}},e.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(ia),this.dragListenerKeys_.length=0)},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==Mc.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){var i;return i=this.direction_===Mc.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,wa(i,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){var e=this.getMap().getView().getValueForResolutionFunction();return wa(1-e(t),0,1)},e.prototype.render=function(t){if(t.frameState&&(this.sliderInitialized_||this.initSlider_())){var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}},e}(Ya);Df.default=qm;var Ef={};var rm=Ef&&Ef.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),sm=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,{element:document.createElement("div"),target:o.target})||this).extent=o.extent?o.extent:null;var r=void 0!==o.className?o.className:"ol-zoom-extent",i=void 0!==o.label?o.label:"E",a=void 0!==o.tipLabel?o.tipLabel:"Fit to extent",$=document.createElement("button");$.setAttribute("type","button"),$.title=a,$.appendChild("string"==typeof i?document.createTextNode(i):i),$.addEventListener(ba.CLICK,n.handleClick_.bind(n),!1);var l=r+" "+Va+" "+Lb,p=n.element;return p.className=l,p.appendChild($),n}return rm(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(Ib(e))},e}(Ya);Ef.default=sm;function tm(o){var a=o||{},r=new xa,e=new Hm(-.005,.05,100);return(void 0===a.altShiftDragRotate||a.altShiftDragRotate)&&r.push(new pi),(void 0===a.doubleClickZoom||a.doubleClickZoom)&&r.push(new hi({delta:a.zoomDelta,duration:a.zoomDuration})),(void 0===a.dragPan||a.dragPan)&&r.push(new oi({onFocusOnly:a.onFocusOnly,kinetic:e})),(void 0===a.pinchRotate||a.pinchRotate)&&r.push(new xi),(void 0===a.pinchZoom||a.pinchZoom)&&r.push(new yi({duration:a.zoomDuration})),(void 0===a.keyboard||a.keyboard)&&(r.push(new ui),r.push(new vi({delta:a.zoomDelta,duration:a.zoomDuration}))),(void 0===a.mouseWheelZoom||a.mouseWheelZoom)&&r.push(new wi({onFocusOnly:a.onFocusOnly,duration:a.zoomDuration})),(void 0===a.shiftDragZoom||a.shiftDragZoom)&&r.push(new ti({duration:a.zoomDuration})),r}var Ff={};var Nc={};var Bd={ACTIVE:"active"};var um=Nc&&Nc.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rb=function(t){function e(e){var r=t.call(this)||this;return e&&e.handleEvent&&(r.handleEvent=e.handleEvent),r.map_=null,r.setActive(!0),r}return um(e,t),e.prototype.getActive=function(){return this.get(Bd.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Bd.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(Ka);function gi(t,e,r){var n=t.getCenterInternal();if(n){var o=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==r?r:250,easing:Wl,center:t.getConstrainedCenter(o)})}}function Cd(t,e,r,n){var o=t.getZoom();if(void 0!==o){var p=t.getConstrainedZoom(o+e),a=t.getResolutionForZoom(p);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:r,duration:void 0!==n?n:250,easing:Ob})}}Nc.pan=gi,Nc.zoomByDelta=Cd,Nc.default=rb;var vm=Ff&&Ff.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),hi=function(t){function e(e){var r=t.call(this)||this,a=e||{};return r.delta_=a.delta?a.delta:1,r.duration_=void 0!==a.duration?a.duration:250,r}return vm(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==fa.DBLCLICK){var r=t.originalEvent,a=t.map,o=t.coordinate,n=r.shiftKey?-this.delta_:this.delta_,i=a.getView();Cd(i,n,o,this.duration_),t.preventDefault(),e=!0}return!e},e}(rb);Ff.default=hi;var Gf={};var Dd={};var wm=Dd&&Dd.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ma=function(e){function t(t){var n=this,r=t||{};return n=e.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return wm(t,e),t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(e){return!1},t.prototype.handleDragEvent=function(e){},t.prototype.handleEvent=function(e){if(!e.originalEvent)return!0;var t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==fa.POINTERDRAG)this.handleDragEvent(e),e.preventDefault();else if(e.type==fa.POINTERUP){var n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==fa.POINTERDOWN){var r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==fa.POINTERMOVE&&this.handleMoveEvent(e);return!t},t.prototype.handleMoveEvent=function(e){},t.prototype.handleUpEvent=function(e){return!1},t.prototype.stopDown=function(e){return e},t.prototype.updateTrackedPointers_=function(e){if(xm(e)){var t=e.originalEvent,n=t.pointerId.toString();e.type==fa.POINTERUP?delete this.trackedPointers_[n]:e.type==fa.POINTERDOWN?this.trackedPointers_[n]=t:n in this.trackedPointers_&&(this.trackedPointers_[n]=t),this.targetPointers=ae(this.trackedPointers_)}},t}(rb);function Ed(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++)n+=e[o].clientX,r+=e[o].clientY;return[n/t,r/t]}function xm(e){var t=e.type;return t===fa.POINTERDOWN||t===fa.POINTERDRAG||t===fa.POINTERUP}Dd.centroid=Ed,Dd.default=Ma;function Hf(e){var t=arguments;return function(e){for(var r=!0,$=0,o=t.length;$<o&&(r=r&&t[$](e));++$);return r}}var ym=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var zm=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};var Am=function(e){return e.target.getTargetElement().contains(document.activeElement)};var ii=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||Am(e)};var Fd=Ea;var ji=function(e){var t=e.originalEvent;return 0==t.button&&!(dl&&el&&t.ctrlKey)};var ki=vb;var li=function(e){return e.type==fa.SINGLECLICK};var If=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var Gd=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};var mi=function(e){var t=e.originalEvent.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t};var hc=function(e){var t=e.originalEvent;return ja(void 0!==t,56),"mouse"==t.pointerType};var ni=function(e){var t=e.originalEvent;return ja(void 0!==t,56),t.isPrimary&&0===t.button};var Bm=Gf&&Gf.__extends||function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])})(n,i)};return function(n,i){function e(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),oi=function(t){function n(n){var i=t.call(this,{stopDown:vb})||this,e=n||{};i.kinetic_=e.kinetic,i.lastCentroid=null,i.lastPointersCount_,i.panning_=!1;var r=e.condition?e.condition:Hf(If,ni);return i.condition_=e.onFocusOnly?Hf(ii,r):r,i.noKinetic_=!1,i}return Bm(n,t),n.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=Ed(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],r=t.map.getView();Xj(e,r.getResolution()),ve(e,r.getRotation()),r.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()},n.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var e=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),s=n.getCoordinateFromPixelInternal([a[0]-e*Math.cos(r),a[1]-e*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(s),duration:500,easing:Ob})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},n}(Ma);Gf.default=oi;var Jf={};var Cm=Jf&&Jf.__extends||function(){var t=function(n,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])})(n,o)};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),pi=function(t){function n(n){var o=this,e=n||{};return(o=t.call(this,{stopDown:vb})||this).condition_=e.condition?e.condition:zm,o.lastAngle_=void 0,o.duration_=void 0!==e.duration?e.duration:250,o}return Cm(n,t),n.prototype.handleDragEvent=function(t){if(hc(t)){var n=t.map,o=n.getView();if(o.getConstraints().rotation!==nf){var e=n.getSize(),r=t.pixel,i=Math.atan2(e[1]/2-r[1],r[0]-e[0]/2);if(void 0!==this.lastAngle_){var a=i-this.lastAngle_;o.adjustRotationInternal(-a)}this.lastAngle_=i}}},n.prototype.handleUpEvent=function(t){return!hc(t)||(t.map.getView().endInteraction(this.duration_),!1)},n.prototype.handleDownEvent=function(t){return!!hc(t)&&!(!ji(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)},n}(Ma);Jf.default=pi;var Kf={};var Lf={};var Mf={};var Dm=Mf&&Mf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qi=function(t){function e(e){var r=t.call(this)||this;return r.geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.style.pointerEvents="auto",r.element_.className="ol-box "+e,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}return Dm(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,r=this.element_.style;r.left=Math.min(t[0],e[0])+"px",r.top=Math.min(t[1],e[1])+"px",r.width=Math.abs(e[0]-t[0])+"px",r.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Sa([r])},e.prototype.getGeometry=function(){return this.geometry_},e}(_d);Mf.default=qi;var ri=Lf&&Lf.__extends||function(){var t=function(n,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])})(n,o)};return function(n,o){function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),Nf={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},Of=function(t){function n(n,o,e){var r=t.call(this,n)||this;return r.coordinate=o,r.mapBrowserEvent=e,r}return ri(n,t),n}(Da),si=function(t){function n(n){var o=t.call(this)||this,e=n||{};return o.box_=new qi(e.className||"ol-dragbox"),o.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(o.onBoxEnd=e.onBoxEnd),o.startPixel_=null,o.condition_=e.condition?e.condition:ji,o.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:o.defaultBoxEndCondition,o}return ri(n,t),n.prototype.defaultBoxEndCondition=function(t,n,o){var e=o[0]-n[0],r=o[1]-n[1];return e*e+r*r>=this.minArea_},n.prototype.getGeometry=function(){return this.box_.getGeometry()},n.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Of(Nf.BOXDRAG,t.coordinate,t))},n.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd(t),this.dispatchEvent(new Of(Nf.BOXEND,t.coordinate,t))),!1},n.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Of(Nf.BOXSTART,t.coordinate,t)),!0)},n.prototype.onBoxEnd=function(t){},n}(Ma);Lf.default=si;var Em=Kf&&Kf.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),ti=function(t){function e(e){var o=this,r=e||{},n=r.condition?r.condition:Gd;return(o=t.call(this,{condition:n,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).duration_=void 0!==r.duration?r.duration:200,o.out_=void 0!==r.out&&r.out,o}return Em(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap(),o=e.getView(),r=e.getSize(),n=this.getGeometry().getExtent();if(this.out_){var i=o.calculateExtentInternal(r),a=xj([e.getPixelFromCoordinateInternal(Xb(n)),e.getPixelFromCoordinateInternal(xc(n))]),p=o.getResolutionForExtentInternal(a,r);Gg(i,1/p),n=i}var $=o.getConstrainedResolution(o.getResolutionForExtentInternal(n,r)),s=o.getConstrainedCenter(Yb(n),$);o.animateInternal({resolution:$,center:s,duration:this.duration_,easing:Ob})},e}(si);Kf.default=ti;var Pf={};var Pb={LEFT:37,UP:38,RIGHT:39,DOWN:40};var Fm=Pf&&Pf.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ui=function(o){function t(t){var e=o.call(this)||this,r=t||{};return e.defaultCondition_=function(o){return If(o)&&mi(o)},e.condition_=void 0!==r.condition?r.condition:e.defaultCondition_,e.duration_=void 0!==r.duration?r.duration:100,e.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,e}return Fm(t,o),t.prototype.handleEvent=function(o){var t=!1;if(o.type==ba.KEYDOWN){var e=o.originalEvent.keyCode;if(this.condition_(o)&&(e==Pb.DOWN||e==Pb.LEFT||e==Pb.RIGHT||e==Pb.UP)){var r=o.map.getView(),i=r.getResolution()*this.pixelDelta_,n=0,$=0;e==Pb.DOWN?$=-i:e==Pb.LEFT?n=-i:e==Pb.RIGHT?n=i:$=i;var a=[n,$];ve(a,r.getRotation()),gi(r,a,this.duration_),o.preventDefault(),t=!0}}return!t},t}(rb);Pf.default=ui;var Qf={};var Gm=Qf&&Qf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),vi=function(t){function e(e){var r=t.call(this)||this,o=e||{};return r.condition_=o.condition?o.condition:mi,r.delta_=o.delta?o.delta:1,r.duration_=void 0!==o.duration?o.duration:100,r}return Gm(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==ba.KEYDOWN||t.type==ba.KEYPRESS){var r=t.originalEvent.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var o=t.map,n=r=="+".charCodeAt(0)?this.delta_:-this.delta_,i=o.getView();Cd(i,n,void 0,this.duration_),t.preventDefault(),e=!0}}return!e},e}(rb);Qf.default=vi;var Hm=function(){function t(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,i){this.points_.push(t,i,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var n=i-3;n>0&&this.points_[n+2]>t;)n-=3;var e=this.points_[i+2]-this.points_[n+2];if(e<1e3/60)return!1;var s=this.points_[i]-this.points_[n],o=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/e,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();var Hd={};var Im=Hd&&Hd.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),Id={TRACKPAD:"trackpad",WHEEL:"wheel"};Hd.Mode=Id;var wi=function(t){function e(e){var o=this,i=e||{};(o=t.call(this,i)||this).totalDelta_=0,o.lastDelta_=0,o.maxDelta_=void 0!==i.maxDelta?i.maxDelta:1,o.duration_=void 0!==i.duration?i.duration:250,o.timeout_=void 0!==i.timeout?i.timeout:80,o.useAnchor_=void 0===i.useAnchor||i.useAnchor,o.constrainResolution_=void 0!==i.constrainResolution&&i.constrainResolution;var n=i.condition?i.condition:Fd;return o.condition_=i.onFocusOnly?Hf(ii,n):n,o.lastAnchor_=null,o.startTime_=void 0,o.timeoutId_,o.mode_=void 0,o.trackpadEventGap_=400,o.trackpadTimeoutId_,o.deltaPerZoom_=300,o}return Im(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==ba.WHEEL)return!0;t.preventDefault();var e,o=t.map,i=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==ba.WHEEL&&(e=i.deltaY,cl&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=jd),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var n=Date.now();void 0===this.startTime_&&(this.startTime_=n),(!this.mode_||n-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Id.TRACKPAD:Id.WHEEL);var r=o.getView();if(this.mode_===Id.TRACKPAD&&!r.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=n,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(n-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var o=-wa(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(o=o?o>0?1:-1:0),Cd(e,o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(rb);Hd.default=wi;var Rf={};var Jm=Rf&&Rf.__extends||function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xi=function(t){function n(n){var e=this,r=n||{},o=r;return o.stopDown||(o.stopDown=vb),(e=t.call(this,o)||this).anchor_=null,e.lastAngle_=void 0,e.rotating_=!1,e.rotationDelta_=0,e.threshold_=void 0!==r.threshold?r.threshold:.3,e.duration_=void 0!==r.duration?r.duration:250,e}return Jm(n,t),n.prototype.handleDragEvent=function(t){var n=0,e=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-e.clientY,r.clientX-e.clientX);if(void 0!==this.lastAngle_){var i=o-this.lastAngle_;this.rotationDelta_+=i,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=i}this.lastAngle_=o;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==nf){var h=a.getViewport().getBoundingClientRect(),l=Ed(this.targetPointers);l[0]-=h.left,l[1]-=h.top,this.anchor_=a.getCoordinateFromPixelInternal(l),this.rotating_&&(a.render(),s.adjustRotationInternal(n,this.anchor_))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(Ma);Rf.default=xi;var Sf={};var Km=Sf&&Sf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yi=function(t){function e(e){var r=this,n=e||{},o=n;return o.stopDown||(o.stopDown=vb),(r=t.call(this,o)||this).anchor_=null,r.duration_=void 0!==n.duration?n.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return Km(e,t),e.prototype.handleDragEvent=function(t){var e=1,r=this.targetPointers[0],n=this.targetPointers[1],o=r.clientX-n.clientX,i=r.clientY-n.clientY,a=Math.sqrt(o*o+i*i);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,c=s.getView();1!=e&&(this.lastScaleDelta_=e);var l=s.getViewport().getBoundingClientRect(),u=Ed(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(u),s.render(),c.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Ma);Sf.default=yi;var Tf={};var zi=Tf&&Tf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lm={ADD_FEATURES:"addfeatures"},Mm=function(t){function e(e,r,n,o){var i=t.call(this,e)||this;return i.features=n,i.file=r,i.projection=o,i}return zi(e,t),e}(Da),Nm=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{handleEvent:Ea})||this).formatConstructors_=n.formatConstructors?n.formatConstructors:[],r.projection_=n.projection?ua(n.projection):null,r.dropListenKeys_=null,r.source_=n.source||null,r.target=n.target?n.target:null,r}return zi(e,t),e.prototype.handleResult_=function(t,e){var r=e.target.result,n=this.getMap(),o=this.projection_;o||(o=n.getView().getProjection());for(var i=this.formatConstructors_,s=0,p=i.length;s<p;++s){var a=new i[s],$=this.tryReadFeatures_(a,r,{featureProjection:o});if($&&$.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures($)),this.dispatchEvent(new Mm(Lm.ADD_FEATURES,t,$,o));break}}},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[ea(e,ba.DROP,this.handleDrop,this),ea(e,ba.DRAGENTER,this.handleStop,this),ea(e,ba.DRAGOVER,this.handleStop,this),ea(e,ba.DROP,this.handleStop,this)]}},e.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(n){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(ia),this.dropListenKeys_=null)},e.prototype.handleDrop=function(t){for(var e=t.dataTransfer.files,r=0,n=e.length;r<n;++r){var o=e.item(r),i=new FileReader;i.addEventListener(ba.LOAD,this.handleResult_.bind(this,o)),i.readAsText(o)}},e.prototype.handleStop=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},e}(rb);Tf.default=Nm;var Uf={};var Om=Uf&&Uf.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Pm=function(t){function e(e){var n=this,i=e||{};return(n=t.call(this,i)||this).condition_=i.condition?i.condition:Gd,n.lastAngle_=void 0,n.lastMagnitude_=void 0,n.lastScaleDelta_=0,n.duration_=void 0!==i.duration?i.duration:400,n}return Om(e,t),e.prototype.handleDragEvent=function(t){if(hc(t)){var e=t.map,n=e.getSize(),i=t.pixel,o=i[0]-n[0]/2,a=n[1]/2-i[1],r=Math.atan2(a,o),s=Math.sqrt(o*o+a*a),l=e.getView();if(void 0!==this.lastAngle_){var u=this.lastAngle_-r;l.adjustRotationInternal(u)}this.lastAngle_=r,void 0!==this.lastMagnitude_&&l.adjustResolutionInternal(this.lastMagnitude_/s),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}},e.prototype.handleUpEvent=function(t){if(!hc(t))return!0;var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!hc(t)&&!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0)},e}(Ma);Uf.default=Pm;var Oc={};var Vf={};var Qm=Vf&&Vf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Jd=function(t){function e(e,r,o){var i=t.call(this)||this;if(void 0!==o&&void 0===r)i.setFlatCoordinates(o,e);else{var s=r||0;i.setCenterAndRadius(e,s,o)}return i}return Qm(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,r,o){var i=this.flatCoordinates,s=t-i[0],n=e-i[1],a=s*s+n*n;if(a<o){if(0===a)for(var p=0;p<this.stride;++p)r[p]=i[p];else{var d=this.getRadius()/Math.sqrt(a);r[0]=i[0]+d*s,r[1]=i[1]+d*n;for(p=2;p<this.stride;++p)r[p]=i[p]}return r.length=this.stride,a}return o},e.prototype.containsXY=function(t,e){var r=this.flatCoordinates,o=t-r[0],i=e-r[1];return o*o+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return nb(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return aa.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Ga(t,e)){var r=this.getCenter();return t[0]<=r[0]&&t[2]>=r[0]||t[1]<=r[1]&&t[3]>=r[1]||Eg(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],o=t.slice();o[e]=o[0]+r;for(var i=1;i<e;++i)o[e+i]=t[i];this.setFlatCoordinates(this.layout,o),this.changed()},e.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,i=bh(o,0,t,this.stride);o[i++]=o[0]+e;for(var s=1,n=this.stride;s<n;++s)o[i++]=o[s];o.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter(we(r,0,r.length,o,t,e,r)),this.changed()},e.prototype.translate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter(Vg(r,0,r.length,o,t,e,r)),this.changed()},e}(fb);Jd.prototype.transform,Vf.default=Jd;var Wf={};var Xf={};var Yf={};var Zf={};var Ai=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=yd(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return ca()},t.prototype.getImage=function(t){return ca()},t.prototype.getHitDetectionImage=function(){return ca()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return ca()},t.prototype.getImageSize=function(){return ca()},t.prototype.getHitDetectionImageSize=function(){return ca()},t.prototype.getOrigin=function(){return ca()},t.prototype.getSize=function(){return ca()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=yd(t)},t.prototype.listenImageChange=function(t){ca()},t.prototype.load=function(){ca()},t.prototype.unlistenImageChange=function(t){ca()},t}();var Rm=Zf&&Zf.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function r(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bi=function(t){function i(i){var e=this,r=void 0!==i.rotateWithView&&i.rotateWithView;return(e=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==i.rotation?i.rotation:0,scale:1,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this).canvas_={},e.hitDetectionCanvas_=null,e.fill_=void 0!==i.fill?i.fill:null,e.origin_=[0,0],e.points_=i.points,e.radius_=void 0!==i.radius?i.radius:i.radius1,e.radius2_=i.radius2,e.angle_=void 0!==i.angle?i.angle:0,e.stroke_=void 0!==i.stroke?i.stroke:null,e.anchor_=null,e.size_=null,e.imageSize_=null,e.hitDetectionImageSize_=null,e.render(),e}return Rm(i,t),i.prototype.clone=function(){var t=new i({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},i.prototype.getAnchor=function(){return this.anchor_},i.prototype.getAngle=function(){return this.angle_},i.prototype.getFill=function(){return this.fill_},i.prototype.getHitDetectionImage=function(){if(!this.hitDetectionCanvas_){var t=this.createRenderOptions();this.createHitDetectionCanvas_(t)}return this.hitDetectionCanvas_},i.prototype.getImage=function(t){if(!this.canvas_[t||1]){var i=this.createRenderOptions(),e=Ua(i.size*t||1,i.size*t||1);this.draw_(i,e,0,0,t||1),this.canvas_[t||1]=e.canvas}return this.canvas_[t||1]},i.prototype.getPixelRatio=function(t){return t},i.prototype.getImageSize=function(){return this.imageSize_},i.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},i.prototype.getImageState=function(){return na.LOADED},i.prototype.getOrigin=function(){return this.origin_},i.prototype.getPoints=function(){return this.points_},i.prototype.getRadius=function(){return this.radius_},i.prototype.getRadius2=function(){return this.radius2_},i.prototype.getSize=function(){return this.size_},i.prototype.getStroke=function(){return this.stroke_},i.prototype.listenImageChange=function(t){},i.prototype.load=function(){},i.prototype.unlistenImageChange=function(t){},i.prototype.createRenderOptions=function(){var t,i=ec,e=fc,r=0,s=null,o=0,n=0;return this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=Gc),t=Ta(t),void 0===(n=this.stroke_.getWidth())&&(n=Ic),s=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e=fc),void 0===(i=this.stroke_.getLineCap())&&(i=ec),void 0===(r=this.stroke_.getMiterLimit())&&(r=Fc)),{strokeStyle:t,strokeWidth:n,size:2*(this.radius_+n)+1,lineCap:i,lineDash:s,lineDashOffset:o,lineJoin:e,miterLimit:r}},i.prototype.render=function(){var t=this.createRenderOptions(),i=Ua(t.size,t.size);this.draw_(t,i,0,0,1),this.canvas_[1]=i.canvas;var e=i.canvas.width,r=e,s=this.getDisplacement();this.hitDetectionImageSize_=[t.size,t.size],this.createHitDetectionCanvas_(t),this.anchor_=[e/2-s[0],e/2+s[1]],this.size_=[e,e],this.imageSize_=[r,r]},i.prototype.draw_=function(t,i,e,r,s){var o,n,a;i.setTransform(s,0,0,s,0,0),i.translate(e,r),i.beginPath();var l=this.points_;if(l===1/0)i.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(l*=2),o=0;o<=l;o++)n=2*o*Math.PI/l-Math.PI/2+this.angle_,a=o%2==0?this.radius_:h,i.lineTo(t.size/2+a*Math.cos(n),t.size/2+a*Math.sin(n))}if(this.fill_){var p=this.fill_.getColor();null===p&&(p=hb),i.fillStyle=Ta(p),i.fill()}this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,i.setLineDash&&t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke()),i.closePath()},i.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionCanvas_=this.getImage(1),this.fill_){var i=this.fill_.getColor(),e=0;if("string"==typeof i&&(i=ph(i)),null===i?e=1:Array.isArray(i)&&(e=4===i.length?i[3]:1),0===e){var r=Ua(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r,0,0)}}},i.prototype.drawHitDetectionCanvas_=function(t,i,e,r){i.translate(e,r),i.beginPath();var s=this.points_;if(s===1/0)i.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(s*=2);var n=void 0,a=void 0,l=void 0;for(n=0;n<=s;n++)l=2*n*Math.PI/s-Math.PI/2+this.angle_,a=n%2==0?this.radius_:o,i.lineTo(t.size/2+a*Math.cos(l),t.size/2+a*Math.sin(l))}i.fillStyle=hb,i.fill(),this.stroke_&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.stroke()),i.closePath()},i}(Ai);Zf.default=Bi;var Sm=Yf&&Yf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$f=function(t){function e(e){var r=e||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,displacement:void 0!==r.displacement?r.displacement:[0,0]})||this}return Sm(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(Bi);Yf.default=$f;var ic=function(){function o(o){var r=o||{};this.color_=void 0!==r.color?r.color:null}return o.prototype.clone=function(){var r=this.getColor();return new o({color:Array.isArray(r)?r.slice():r||void 0})},o.prototype.getColor=function(){return this.color_},o.prototype.setColor=function(o){this.color_=o},o}();var Pc=function(){function t(t){var i=t||{};this.color_=void 0!==i.color?i.color:null,this.lineCap_=i.lineCap,this.lineDash_=void 0!==i.lineDash?i.lineDash:null,this.lineDashOffset_=i.lineDashOffset,this.lineJoin_=i.lineJoin,this.miterLimit_=i.miterLimit,this.width_=i.width}return t.prototype.clone=function(){var i=this.getColor();return new t({color:Array.isArray(i)?i.slice():i||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();var jc=function(){function e(e){var t=e||{};this.geometry_=null,this.geometryFunction_=Di,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return e.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.setRenderer=function(e){this.renderer_=e},e.prototype.getGeometry=function(){return this.geometry_},e.prototype.getGeometryFunction=function(){return this.geometryFunction_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(e){this.fill_=e},e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(e){this.image_=e},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(e){this.stroke_=e},e.prototype.getText=function(){return this.text_},e.prototype.setText=function(e){this.text_=e},e.prototype.getZIndex=function(){return this.zIndex_},e.prototype.setGeometry=function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Di,this.geometry_=e},e.prototype.setZIndex=function(e){this.zIndex_=e},e}();function Tm(e){var t;if("function"==typeof e)t=e;else{var r;if(Array.isArray(e))r=e;else ja("function"==typeof e.getZIndex,41),r=[e];t=function(){return r}}return t}var Ci=null;function Um(e,t){if(!Ci){var r=new ic({color:"rgba(255,255,255,0.4)"}),o=new Pc({color:"#3399CC",width:1.25});Ci=[new jc({image:new $f({fill:r,stroke:o,radius:5}),fill:r,stroke:o})]}return Ci}function Qc(){var e={},t=[255,255,255,1],r=[0,153,255,1];return e[aa.POLYGON]=[new jc({fill:new ic({color:[255,255,255,.5]})})],e[aa.MULTI_POLYGON]=e[aa.POLYGON],e[aa.LINE_STRING]=[new jc({stroke:new Pc({color:t,width:5})}),new jc({stroke:new Pc({color:r,width:3})})],e[aa.MULTI_LINE_STRING]=e[aa.LINE_STRING],e[aa.CIRCLE]=e[aa.POLYGON].concat(e[aa.LINE_STRING]),e[aa.POINT]=[new jc({image:new $f({radius:6,fill:new ic({color:r}),stroke:new Pc({color:t,width:1.5})}),zIndex:1/0})],e[aa.MULTI_POINT]=e[aa.POINT],e[aa.GEOMETRY_COLLECTION]=e[aa.POLYGON].concat(e[aa.LINE_STRING],e[aa.POINT]),e}function Di(e){return e.getGeometry()}var Vm=Xf&&Xf.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ei={RENDER_ORDER:"renderOrder"},Fi=function(t){function e(e){var r=this,n=e||{},i=Aa({},n);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(r=t.call(this,i)||this).declutter_=void 0!==n.declutter&&n.declutter,r.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(n.style),r.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,r.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,r}return Vm(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(Ei.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(Ei.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:Um,this.styleFunction_=null===t?void 0:Tm(this.style_),this.changed()},e}(th);Xf.default=Fi;var _f={};var ag={};var da={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Kd=[da.FILL];var sb=[da.STROKE];var Qb=[da.BEGIN_PATH];var Gi=[da.CLOSE_PATH];var Wm=ag&&ag.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),kc=function(t){function e(e,i,r,n){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=i,o.pixelRatio=n,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return Wm(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,i,r,n,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=r);var u,$,l,p=t[e],c=t[e+1],h=this.tmpCoordinate_,d=!0;for(u=e+r;u<i;u+=r)h[0]=t[u],h[1]=t[u+1],(l=je(a,h))!==$?(d&&(this.coordinates[s++]=p,this.coordinates[s++]=c),this.coordinates[s++]=h[0],this.coordinates[s++]=h[1],d=!1):l===ta.INTERSECTING?(this.coordinates[s++]=h[0],this.coordinates[s++]=h[1],d=!1):d=!0,p=h[0],c=h[1],$=l;return(n&&d||u===e+r)&&(this.coordinates[s++]=p,this.coordinates[s++]=c),s},e.prototype.drawCustomCoordinates_=function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o],u=this.appendFlatCoordinates(t,e,a,r,!1,!1);n.push(u),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var r,n,o,s,a,u=t.getType(),$=t.getStride(),l=this.coordinates.length;if(u==aa.MULTI_POLYGON){r=t.getOrientedFlatCoordinates(),s=[];var p=t.getEndss();a=0;for(var c=0,h=p.length;c<h;++c){var d=[];a=this.drawCustomCoordinates_(r,a,p[c],$,d),s.push(d)}this.instructions.push([da.CUSTOM,l,s,t,i,eh])}else u==aa.POLYGON||u==aa.MULTI_LINE_STRING?(o=[],r=u==aa.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(r,0,t.getEnds(),$,o),this.instructions.push([da.CUSTOM,l,o,t,i,ed])):u==aa.LINE_STRING||u==aa.MULTI_POINT?(r=t.getFlatCoordinates(),n=this.appendFlatCoordinates(r,0,r.length,$,!1,!1),this.instructions.push([da.CUSTOM,l,n,t,i,Cc])):u==aa.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),n=this.coordinates.length,this.instructions.push([da.CUSTOM,l,n,t,i]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var i=t.getExtent();this.beginGeometryInstruction1_=[da.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[da.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,r,n=e.length,o=-1;for(t=0;t<n;++t)(r=(i=e[t])[0])==da.END_GEOMETRY?o=t:r==da.BEGIN_GEOMETRY&&(i[2]=t,lj(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var r=t.getColor();i.fillStyle=Ta(r||hb)}else i.fillStyle=void 0;if(e){var n=e.getColor();i.strokeStyle=Ta(n||Gc);var o=e.getLineCap();i.lineCap=void 0!==o?o:ec;var s=e.getLineDash();i.lineDash=s?s.slice():nd;var a=e.getLineDashOffset();i.lineDashOffset=a||od;var u=e.getLineJoin();i.lineJoin=void 0!==u?u:fc;var $=e.getWidth();i.lineWidth=void 0!==$?$:Ic;var l=e.getMiterLimit();i.miterLimit=void 0!==l?l:Fc,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[da.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[da.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,r=t.lineCap,n=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||n!=t.currentLineDash&&!Sb(t.currentLineDash,n)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=u)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=n,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[da.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Ag(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Vc(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(uh);ag.default=kc;var bg={};var Xm=bg&&bg.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),Hi=function(t){function i(i,e,o,h){var s=t.call(this,i,e,o,h)||this;return s.declutterGroups_=null,s.hitDetectionImage_=null,s.image_=null,s.imagePixelRatio_=void 0,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s}return Xm(i,t),i.prototype.drawCoordinates_=function(t,i,e,o){return this.appendFlatCoordinates(t,i,e,o,!1,!1)},i.prototype.drawPoint=function(t,i){if(this.image_){this.beginGeometry(t,i);var e=t.getFlatCoordinates(),o=t.getStride(),h=this.coordinates.length,s=this.drawCoordinates_(e,0,e.length,o);this.instructions.push([da.DRAW_IMAGE,h,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([da.DRAW_IMAGE,h,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(i)}},i.prototype.drawMultiPoint=function(t,i){if(this.image_){this.beginGeometry(t,i);var e=t.getFlatCoordinates(),o=t.getStride(),h=this.coordinates.length,s=this.drawCoordinates_(e,0,e.length,o);this.instructions.push([da.DRAW_IMAGE,h,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([da.DRAW_IMAGE,h,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(i)}},i.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},i.prototype.setImageStyle=function(t,i){var e=t.getAnchor(),o=t.getSize(),h=t.getHitDetectionImage(),s=t.getImage(this.pixelRatio),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.declutterGroups_=i,this.hitDetectionImage_=h,this.image_=s,this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0]},i}(kc);bg.default=Hi;var cg={};var Ym=cg&&cg.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),Ii=function(t){function i(i,e,s,n){return t.call(this,i,e,s,n)||this}return Ym(i,t),i.prototype.drawFlatCoordinates_=function(t,i,e,s){var n=this.coordinates.length,o=this.appendFlatCoordinates(t,i,e,s,!1,!1),r=[da.MOVE_TO_LINE_TO,n,o];return this.instructions.push(r),this.hitDetectionInstructions.push(r),e},i.prototype.drawLineString=function(t,i){var e=this.state,s=e.strokeStyle,n=e.lineWidth;if(void 0!==s&&void 0!==n){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([da.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],Qb);var o=t.getFlatCoordinates(),r=t.getStride();this.drawFlatCoordinates_(o,0,o.length,r),this.hitDetectionInstructions.push(sb),this.endGeometry(i)}},i.prototype.drawMultiLineString=function(t,i){var e=this.state,s=e.strokeStyle,n=e.lineWidth;if(void 0!==s&&void 0!==n){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([da.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],Qb);for(var o=t.getEnds(),r=t.getFlatCoordinates(),p=t.getStride(),a=0,h=0,u=o.length;h<u;++h)a=this.drawFlatCoordinates_(r,a,o[h],p);this.hitDetectionInstructions.push(sb),this.endGeometry(i)}},i.prototype.finish=function(){var i=this.state;return null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&this.instructions.push(sb),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},i.prototype.applyStroke=function(i){null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&(this.instructions.push(sb),i.lastStroke=this.coordinates.length),i.lastStroke=0,t.prototype.applyStroke.call(this,i),this.instructions.push(Qb)},i}(kc);cg.default=Ii;var dg={};var Zm=dg&&dg.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),eg=function(t){function i(i,e,s,o){return t.call(this,i,e,s,o)||this}return Zm(i,t),i.prototype.drawFlatCoordinatess_=function(t,i,e,s){var o=this.state,n=void 0!==o.fillStyle,r=void 0!==o.strokeStyle,l=e.length;this.instructions.push(Qb),this.hitDetectionInstructions.push(Qb);for(var h=0;h<l;++h){var a=e[h],$=this.coordinates.length,u=this.appendFlatCoordinates(t,i,a,s,!0,!r),c=[da.MOVE_TO_LINE_TO,$,u];this.instructions.push(c),this.hitDetectionInstructions.push(c),r&&(this.instructions.push(Gi),this.hitDetectionInstructions.push(Gi)),i=a}return n&&(this.instructions.push(Kd),this.hitDetectionInstructions.push(Kd)),r&&(this.instructions.push(sb),this.hitDetectionInstructions.push(sb)),i},i.prototype.drawCircle=function(t,i){var e=this.state,s=e.fillStyle,o=e.strokeStyle;if(void 0!==s||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([da.SET_FILL_STYLE,hb]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([da.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var n=t.getFlatCoordinates(),r=t.getStride(),l=this.coordinates.length;this.appendFlatCoordinates(n,0,n.length,r,!1,!1);var h=[da.CIRCLE,l];this.instructions.push(Qb,h),this.hitDetectionInstructions.push(Qb,h),void 0!==e.fillStyle&&(this.instructions.push(Kd),this.hitDetectionInstructions.push(Kd)),void 0!==e.strokeStyle&&(this.instructions.push(sb),this.hitDetectionInstructions.push(sb)),this.endGeometry(i)}},i.prototype.drawPolygon=function(t,i){var e=this.state,s=e.fillStyle,o=e.strokeStyle;if(void 0!==s||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([da.SET_FILL_STYLE,hb]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([da.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var n=t.getEnds(),r=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(r,0,n,l),this.endGeometry(i)}},i.prototype.drawMultiPolygon=function(t,i){var e=this.state,s=e.fillStyle,o=e.strokeStyle;if(void 0!==s||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([da.SET_FILL_STYLE,hb]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([da.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);for(var n=t.getEndss(),r=t.getOrientedFlatCoordinates(),l=t.getStride(),h=0,a=0,$=n.length;a<$;++a)h=this.drawFlatCoordinatess_(r,h,n[a],l);this.endGeometry(i)}},i.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var i=this.tolerance;if(0!==i)for(var e=this.coordinates,s=0,o=e.length;s<o;++s)e[s]=Eb(e[s],i);return t.prototype.finish.call(this)},i.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},i}(kc);dg.default=eg;var Ld={};var Ji={POINT:"point",LINE:"line"};function $m(h,t,r,$,a){var n,o,C,i,c,e,u,v,p,s=r,x=r,g=0,k=0,m=r;for(n=r;n<$;n+=a){var d=t[n],f=t[n+1];void 0!==i&&(v=d-i,p=f-c,C=Math.sqrt(v*v+p*p),void 0!==e&&(k+=o,Math.acos((e*v+u*p)/(o*C))>h&&(k>g&&(g=k,s=m,x=n),k=0,m=n-a)),o=C,e=v,u=p),i=d,c=f}return(k+=C)>g?[m,n]:[s,x]}var _m=Ld&&Ld.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),lc={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};Ld.TEXT_ALIGN=lc;var Ki=function(t){function e(e,i,r,s){var o=t.call(this,e,i,r,s)||this;return o.declutterGroups_,o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o}return _m(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(""!==this.text_&&s&&(i||r)){var o,a,l=this.coordinates.length,n=t.getType(),$=null,h=2,p=t.getStride();if(s.placement===Ji.LINE){if(!Ga(this.getBufferedMaxExtent(),t.getExtent()))return;var u=void 0;if($=t.getFlatCoordinates(),n==aa.LINE_STRING)u=[$.length];else if(n==aa.MULTI_LINE_STRING)u=t.getEnds();else if(n==aa.POLYGON)u=t.getEnds().slice(0,1);else if(n==aa.MULTI_POLYGON){var f=t.getEndss();for(u=[],o=0,a=f.length;o<a;++o)u.push(f[o][0])}this.beginGeometry(t,e);for(var d=s.textAlign,c=0,_=void 0,g=0,x=u.length;g<x;++g){if(null==d){var y=$m(s.maxAngle,$,c,u[g],p);c=y[0],_=y[1]}else _=u[g];for(o=c;o<_;o+=p)this.coordinates.push($[o],$[o+1]);h=this.coordinates.length,c=u[g];var S=this.declutterGroups_?0===g?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(l,h,S),l=h}this.endGeometry(e)}else{var m=null;switch(s.overflow||(m=[]),n){case aa.POINT:case aa.MULTI_POINT:h=($=t.getFlatCoordinates()).length;break;case aa.LINE_STRING:$=t.getFlatMidpoint();break;case aa.CIRCLE:$=t.getCenter();break;case aa.MULTI_LINE_STRING:p=2,h=($=t.getFlatMidpoints()).length;break;case aa.POLYGON:$=t.getFlatInteriorPoint(),s.overflow||m.push($[2]/this.resolution),p=3;break;case aa.MULTI_POLYGON:var D=t.getFlatInteriorPoints();for($=[],o=0,a=D.length;o<a;o+=3)s.overflow||m.push(D[o+2]/this.resolution),$.push(D[o],D[o+1]);if(p=2,0==(h=$.length))return;}h=this.appendFlatCoordinates($,0,h,p,!1,!1),this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var w=s.padding;if(w!=Mb&&(s.scale[0]<0||s.scale[1]<0)){var E=s.padding[0],k=s.padding[1],v=s.padding[2],z=s.padding[3];s.scale[0]<0&&(k=-k,z=-z),s.scale[1]<0&&(E=-E,v=-v),w=[E,k,v,z]}var T=this.pixelRatio;this.instructions.push([da.DRAW_IMAGE,l,h,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,w==Mb?Mb:w.map(function(t){return t*T}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,m]);var G=1/T;this.hitDetectionInstructions.push([da.DRAW_IMAGE,l,h,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[G,G],NaN,w,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,m]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||Hc,textBaseline:e.textBaseline||pd,scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e,i){var r=this.textStrokeState_,s=this.textState_,o=this.strokeKey_,a=this.textKey_,l=this.fillKey_;this.saveTextStates_();var n=this.pixelRatio,$=lc[s.textBaseline],h=this.textOffsetY_*n,p=this.text_,u=r?r.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([da.DRAW_CHARS,t,e,$,i,s.overflow,l,s.maxAngle,n,h,o,u*n,p,a,1]),this.hitDetectionInstructions.push([da.DRAW_CHARS,t,e,$,i,s.overflow,l,s.maxAngle,1,h,o,u,p,a,1/n])},e.prototype.setTextStyle=function(t,e){var i,r,s;if(t){this.declutterGroups_=e;var o=t.getFill();o?((r=this.textFillState_)||(r={},this.textFillState_=r),r.fillStyle=Ta(o.getColor()||hb)):(r=null,this.textFillState_=r);var a=t.getStroke();if(a){(s=this.textStrokeState_)||(s={},this.textStrokeState_=s);var l=a.getLineDash(),n=a.getLineDashOffset(),$=a.getWidth(),h=a.getMiterLimit();s.lineCap=a.getLineCap()||ec,s.lineDash=l?l.slice():nd,s.lineDashOffset=void 0===n?od:n,s.lineJoin=a.getLineJoin()||fc,s.lineWidth=void 0===$?Ic:$,s.miterLimit=void 0===h?Fc:h,s.strokeStyle=Ta(a.getColor()||Gc)}else s=null,this.textStrokeState_=s;i=this.textState_;var p=t.getFont()||Ah;nl(p);var u=t.getScaleArray();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||pd,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Mb,i.scale=void 0===u?[1,1]:u;var f=t.getOffsetX(),d=t.getOffsetY(),c=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0===_?0:_,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:ga(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+ga(r.fillStyle):""}else this.text_=""},e}(kc);Ld.default=Ki;var an={Circle:eg,Default:kc,Image:Hi,LineString:Ii,Polygon:eg,Text:Ki},bn=function(){function e(e,r,t,i,d){this.declutter_=d,this.declutterGroups_=null,this.tolerance_=e,this.maxExtent_=r,this.pixelRatio_=i,this.resolution_=t,this.buildersByZIndex_={}}return e.prototype.addDeclutter=function(e){var r=null;return this.declutter_&&(e?(r=this.declutterGroups_)[0][0]++:(r=[[1]],this.declutterGroups_=r)),r},e.prototype.finish=function(){var e={};for(var r in this.buildersByZIndex_){e[r]=e[r]||{};var t=this.buildersByZIndex_[r];for(var i in t){var d=t[i].finish();e[r][i]=d}}return e},e.prototype.getBuilder=function(e,r){var t=void 0!==e?e.toString():"0",i=this.buildersByZIndex_[t];void 0===i&&(i={},this.buildersByZIndex_[t]=i);var d=i[r];void 0===d&&(d=new(0,an[r])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[r]=d);return d},e}();var fg={};var gg={};var cn=gg&&gg.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Li=function(t){function e(e){var r=t.call(this)||this;return r.boundHandleImageChange_=r.handleImageChange_.bind(r),r.layer_=e,r}return cn(e,t),e.prototype.getFeatures=function(t){return ca()},e.prototype.prepareFrame=function(t){return ca()},e.prototype.renderFrame=function(t,e){return ca()},e.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,e,r){return function(o,a){var n=this.loadedTileCallback.bind(this,r,o);return t.forEachLoadedTile(e,o,a,n)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,o,a){},e.prototype.getDataAtPixel=function(t,e,r){return ca()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===na.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=na.LOADED&&e!=na.ERROR&&t.addEventListener(ba.CHANGE,this.boundHandleImageChange_),e==na.IDLE&&(t.load(),e=t.getState()),e==na.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Kb.READY&&t.changed()},e}(be);gg.default=Li;var dn=fg&&fg.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Mi=function(t){function e(e){var r=t.call(this,e)||this;return r.container=null,r.renderedResolution,r.tempTransform=Qa(),r.pixelTransform=Qa(),r.inversePixelTransform=Qa(),r.context=null,r.containerReused=!1,r}return dn(e,t),e.prototype.useContainer=function(t,e,r){var o,n,a=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===a&&($=t.firstElementChild)instanceof HTMLCanvasElement&&(n=$.getContext("2d"));if(!n||0!==n.canvas.width&&n.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=n,this.containerReused=!0),!this.container){(o=document.createElement("div")).className=a;var i=o.style;i.position="absolute",i.width="100%",i.height="100%";var $=(n=Ua()).canvas;o.appendChild($),(i=$.style).position="absolute",i.left="0",i.transformOrigin="top left",this.container=o,this.context=n}},e.prototype.clip=function(t,e,r){var o=e.pixelRatio,n=e.size[0]*o/2,a=e.size[1]*o/2,i=e.viewState.rotation,$=wc(r),p=xc(r),s=vc(r),f=Xb(r);ra(e.coordinateToPixelTransform,$),ra(e.coordinateToPixelTransform,p),ra(e.coordinateToPixelTransform,s),ra(e.coordinateToPixelTransform,f),t.save(),Dh(t,-i,n,a),t.beginPath(),t.moveTo($[0]*o,$[1]*o),t.lineTo(p[0]*o,p[1]*o),t.lineTo(s[0]*o,s[1]*o),t.lineTo(f[0]*o,f[1]*o),t.clip(),Dh(t,i,n,a)},e.prototype.clipUnrotated=function(t,e,r){var o=wc(r),n=xc(r),a=vc(r),i=Xb(r);ra(e.coordinateToPixelTransform,o),ra(e.coordinateToPixelTransform,n),ra(e.coordinateToPixelTransform,a),ra(e.coordinateToPixelTransform,i);var $=this.inversePixelTransform;ra($,o),ra($,n),ra($,a),ra($,i),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,r){var o=this.getLayer();if(o.hasListener(t)){var n=new cf(t,this.inversePixelTransform,r,e);o.dispatchEvent(n)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(Jb.PRERENDER,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(Jb.POSTRENDER,t,e)},e.prototype.getRenderTransform=function(t,e,r,o,n,a,i){var $=n/2,p=a/2,s=o/e,f=-s,v=-t[0]+i,m=-t[1];return xb(this.tempTransform,$,p,s,f,-r,v,m)},e.prototype.getDataAtPixel=function(t,e,r){var o,n=ra(this.inversePixelTransform,t.slice()),a=this.context;try{var i=Math.round(n[0]),$=Math.round(n[1]),p=document.createElement("canvas"),s=p.getContext("2d");p.width=1,p.height=1,s.clearRect(0,0,1,1),s.drawImage(a.canvas,i,$,1,1,0,0,1,1),o=s.getImageData(0,0,1,1).data}catch(f){return"SecurityError"===f.name?new Uint8Array:o}return 0===o[3]?null:o},e}(Li);fg.default=Mi;var hg,Md={},e=arguments[0];!function(t,i){"object"==typeof Md?Md=i():"function"==typeof hg&&hg.amd?hg(i):(t=t||self).RBush=i()}(Md,function(){function t(t,r,e,a,o){!function t(n,r,e,a,o){for(;a>e;){if(a-e>600){var h=a-e+1,s=r-e+1,l=Math.log(h),f=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*f*(h-f)/h)*(s-h/2<0?-1:1),u=Math.max(e,Math.floor(r-s*f/h+p)),m=Math.min(a,Math.floor(r+(h-s)*f/h+p));t(n,r,u,m,o)}var c=n[r],d=e,x=a;for(i(n,e,r),o(n[a],c)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;o(n[d],c)<0;)d++;for(;o(n[x],c)>0;)x--}0===o(n[e],c)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,o||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){o(t,0,t.children.length,i,t)}function o(t,i,n,r,e){e||(e=c(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var o=t.children[a];h(e,t.leaf?r(o):o)}return e}function h(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function m(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function c(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var o=[n,r];o.length;)if(!((r=o.pop())-(n=o.pop())<=e)){var h=n+Math.ceil((r-n)/e/2)*e;t(i,h,n,r,a),o.push(n,h,h,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!m(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var o=i.children[a],h=i.leaf?r(o):o;m(t,h)&&(i.leaf?n.push(o):u(t,h)?this._all(o,n):e.push(o))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!m(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(m(t,a)){if(i.leaf||u(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=c([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,o=this.data,h=this.toBBox(t),s=[],l=[];o||s.length;){if(o||(o=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),o.leaf){var f=e(t,o.children,i);if(-1!==f)return o.children.splice(f,1),s.push(o),this._condense(s),this}a||o.leaf||!u(o,h)?r?(n++,o=r.children[n],a=!1):o=null:(s.push(o),l.push(n),n=0,r=o,o=o.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,o=n-i+1,h=this._maxEntries;if(o<=h)return a(e=c(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(o)/Math.log(h)),h=Math.ceil(o/Math.pow(h,r-1))),(e=c([])).leaf=!1,e.height=r;var s=Math.ceil(o/h),l=s*Math.ceil(Math.sqrt(h));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var p=Math.min(f+l-1,n);d(t,f,p,s,this.compareMinY);for(var u=f;u<=p;u+=s){var m=Math.min(u+s-1,p);e.children.push(this._build(t,u,m,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,o=void 0,h=0;h<i.children.length;h++){var s=i.children[h],l=f(s),p=(u=t,m=s,(Math.max(m.maxX,u.maxX)-Math.min(m.minX,u.minX))*(Math.max(m.maxY,u.maxY)-Math.min(m.minY,u.minY))-l);p<a?(a=p,e=l<e?l:e,o=s):p===a&&l<e&&(e=l,o=s)}i=o||i.children[0]}var u,m;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),h(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var o=this._chooseSplitIndex(n,e,r),h=c(n.children.splice(o,n.children.length-o));h.height=n.height,h.leaf=n.leaf,a(n,this.toBBox),a(h,this.toBBox),i?t[i-1].children.push(h):this._splitRoot(n,h)},r.prototype._splitRoot=function(t,i){this.data=c([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,h,s,l,p,u=1/0,m=1/0,c=i;c<=n-i;c++){var d=o(t,0,c,this.toBBox),x=o(t,c,n,this.toBBox),v=(e=d,a=x,h=void 0,s=void 0,l=void 0,p=void 0,h=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),p=Math.min(e.maxY,a.maxY),Math.max(0,l-h)*Math.max(0,p-s)),M=f(d)+f(x);v<u?(u=v,r=c,m=M<m?M:m):v===u&&M<m&&(m=M,r=c)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=o(t,0,i,e),s=o(t,n-i,n,e),l=p(a)+p(s),f=i;f<n-i;f++){var u=t.children[f];h(a,t.leaf?e(u):u),l+=p(a)}for(var m=n-i-1;m>=i;m--){var c=t.children[m];h(s,t.leaf?e(c):c),l+=p(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)h(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});function en(t,r,a,$,e,h,o,x,p,M,n,i){var l,s=[];if(i){var v=we(t,r,a,$,i,[t[r],t[r+1]]);l=v[0]>v[v.length-$]}else l=t[r]>t[a-$];for(var J,N,P=e.length,f=t[r],w=t[r+1],u=t[r+=$],I=t[r+1],m=0,d=Math.sqrt(Math.pow(u-f,2)+Math.pow(I-w,2)),q=!1,c=0;c<P;++c){for(var O=e[J=l?P-c-1:c],T=x*p(M,O,n),g=h+T/2;r<a-$&&m+d<g;)f=u,w=I,u=t[r+=$],I=t[r+1],m+=d,d=Math.sqrt(Math.pow(u-f,2)+Math.pow(I-w,2));var j=g-m,b=Math.atan2(I-w,u-f);if(l&&(b+=b>0?-Math.PI:Math.PI),void 0!==N){var k=b-N;if(q=q||0!==k,k+=k>Math.PI?-2*Math.PI:k<-Math.PI?2*Math.PI:0,Math.abs(k)>o)return null}N=b;var y=j/d,z=yc(f,u,y),A=yc(w,I,y);s[J]=[z,A,T/2,b,O],h+=T}return q?s:[[s[0][0],s[0][1],s[0][2],s[0][3],e]]}var jb=bb(),Rc=Qa(),kb=[],Za=[],$a=[],lb=[],fn=function(){function t(t,e,r,i,a){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderBuffer_=a,this.renderedTransform_=Qa(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,r,i){var a=t+e+r+i;if(this.labels_[a])return this.labels_[a];var $=i?this.strokeStates[i]:null,p=r?this.fillStates[r]:null,s=this.textStates[e],o=this.pixelRatio,n=[s.scale[0]*o,s.scale[1]*o],l=lc[s.textAlign||Hc],h=i&&$.lineWidth?$.lineWidth:0,E=t.split("\n"),v=E.length,u=[],m=pl(s.font,E,u),c=ol(s.font),K=m+h,Z=[],f=(K+2)*n[0],d=(c*v+h)*n[1],_={width:f<0?Math.floor(f):Math.ceil(f),height:d<0?Math.floor(d):Math.ceil(d),contextInstructions:Z};(1==n[0]&&1==n[1]||Z.push("scale",n),Z.push("font",s.font),i)&&(Z.push("strokeStyle",$.strokeStyle),Z.push("lineWidth",h),Z.push("lineCap",$.lineCap),Z.push("lineJoin",$.lineJoin),Z.push("miterLimit",$.miterLimit),(_e?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(Z.push("setLineDash",[$.lineDash]),Z.push("lineDashOffset",$.lineDashOffset)));r&&Z.push("fillStyle",p.fillStyle),Z.push("textBaseline","middle"),Z.push("textAlign","center");var x,g=.5-l,T=l*K+g*h;if(i)for(x=0;x<v;++x)Z.push("strokeText",[E[x],T+g*u[x],.5*(h+c)+x*c]);if(r)for(x=0;x<v;++x)Z.push("fillText",[E[x],T+g*u[x],.5*(h+c)+x*c]);return this.labels_[a]=_,_},t.prototype.replayTextBackground_=function(t,e,r,i,a,$,p,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,e),$&&(this.alignFill_=$[2],s&&(t.fillStyle=$[1]),this.fill_(t)),p&&(this.setStrokeStyle_(t,p),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,r,i,a,$,p,s,o,n,l,h,E,v,u,m,c,K,Z){var f=K||Z;r-=$*=v[0],i-=p*=v[1];var d=m+l>a.width?a.width-l:m,_=o+h>a.height?a.height-h:o,x=c[3]+d*v[0]+c[1],g=c[0]+_*v[1]+c[2],T=r-c[3],y=i-c[0];(f||0!==E)&&(kb[0]=T,lb[0]=T,kb[1]=y,Za[1]=y,Za[0]=T+x,$a[0]=Za[0],$a[1]=y+g,lb[1]=$a[1]);var b=null;if(0!==E){var I=r+$,S=i+p;b=xb(Rc,I,S,1,1,E,-I,-S),ra(Rc,kb),ra(Rc,Za),ra(Rc,$a),ra(Rc,lb),nb(Math.min(kb[0],Za[0],$a[0],lb[0]),Math.min(kb[1],Za[1],$a[1],lb[1]),Math.max(kb[0],Za[0],$a[0],lb[0]),Math.max(kb[1],Za[1],$a[1],lb[1]),jb)}else nb(T,y,T+x,y+g,jb);var C=0,k=0;if(s){var L=this.renderBuffer_;L[0]=Math.max(L[0],Fa(jb)),C=L[0],L[1]=Math.max(L[1],ob(jb)),k=L[1]}var R=t.canvas,w=Z?Z[2]*v[0]/2:0,A=jb[0]-w<=(R.width+C)/e&&jb[2]+w>=-C/e&&jb[1]-w<=(R.height+k)/e&&jb[3]+w>=-k/e;if(u&&(r=Math.round(r),i=Math.round(i)),s){if(!A&&1==s[0])return!1;var M=A?[t,b?b.slice(0):null,n,a,l,h,d,_,r,i,v,jb.slice()]:null;M&&(f&&M.push(K,Z,kb.slice(0),Za.slice(0),$a.slice(0),lb.slice(0)),s.push(M))}else A&&(f&&this.replayTextBackground_(t,kb,Za,$a,lb,K,Z,!1),Eh(t,b,n,a,l,h,d,_,r,i,v));return!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=ra(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,r,i){for(var a=[],$=1,p=t.length;$<p;++$){var s=(h=t[$])[11];a.push({minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:e})}var $C6Up$$interop$default=ug(Md);i||(i=new $C6Up$$interop$default.d(9));var o=!1;for($=0,p=a.length;$<p;++$)if(i.collides(a[$])){o=!0;break}if(!o){i.load(a);for(var n=1,l=t.length;n<l;++n){var h,E=(h=t[n])[0],v=E.globalAlpha;v!==r&&(E.globalAlpha=r),h.length>12&&this.replayTextBackground_(h[0],h[14],h[15],h[16],h[17],h[12],h[13],!0),Eh.apply(void 0,h),v!==r&&(E.globalAlpha=v)}}return t.length=1,i},t.prototype.drawLabelWithPointPlacement_=function(t,e,r,i){var a=this.textStates[e],$=this.createLabel(t,e,i,r),p=this.strokeStates[r],s=this.pixelRatio,o=lc[a.textAlign||Hc],n=lc[a.textBaseline||pd],l=p&&p.lineWidth?p.lineWidth:0;return{label:$,anchorX:o*($.width/s-2*a.scale[0])+2*(.5-o)*l,anchorY:n*$.height/s+2*(.5-n)*l}},t.prototype.execute_=function(t,e,r,i,a,$,p){var s;this.declutterItems.length=0,this.pixelCoordinates_&&Sb(r,this.renderedTransform_)?s=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),s=Db(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),sj(this.renderedTransform_,r));for(var o,n,l,h,E,v,u,m,c,K,Z,f,d,_,x,g,T,y=0,b=i.length,I=0,S=0,C=0,k=null,L=null,R=this.coordinateCache_,w=this.viewRotation_,A=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,M={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:w},O=this.instructions!=i||this.overlaps?0:200;y<b;){var D=i[y];switch(D[0]){case da.BEGIN_GEOMETRY:(x=D[1]).getGeometry()?void 0===p||Ga(p,D[3])?++y:y=D[2]+1:y=D[2];break;case da.BEGIN_PATH:S>O&&(this.fill_(t),S=0),C>O&&(t.stroke(),C=0),S||C||(t.beginPath(),h=NaN,E=NaN),++y;break;case da.CIRCLE:var W=s[I=D[1]],q=s[I+1],N=s[I+2]-W,P=s[I+3]-q,j=Math.sqrt(N*N+P*P);t.moveTo(W+j,q),t.arc(W,q,j,0,2*Math.PI,!0),++y;break;case da.CLOSE_PATH:t.closePath(),++y;break;case da.CUSTOM:I=D[1],o=D[2];var B=D[3],F=D[4],G=6==D.length?D[5]:void 0;M.geometry=B,M.feature=x,y in R||(R[y]=[]);var X=R[y];G?G(s,I,o,2,X):(X[0]=s[I],X[1]=s[I+1],X.length=2),F(X,M),++y;break;case da.DRAW_IMAGE:I=D[1],o=D[2],K=D[3],n=D[4],l=D[5],c=$?null:D[6];var Y=D[7],H=D[8],J=D[9],U=D[10],V=D[11],z=D[12],Q=D[13],tt=D[14];if(!K&&D.length>=19){Z=D[18],f=D[19],d=D[20],_=D[21];var et=this.drawLabelWithPointPlacement_(Z,f,d,_);K=et.label,D[3]=K;var rt=D[22];n=(et.anchorX-rt)*this.pixelRatio,D[4]=n;var it=D[23];l=(et.anchorY-it)*this.pixelRatio,D[5]=l,Y=K.height,D[7]=Y,tt=K.width,D[14]=tt}var at=void 0;D.length>24&&(at=D[24]);var $t=void 0,pt=void 0,st=void 0;D.length>16?($t=D[15],pt=D[16],st=D[17]):($t=Mb,pt=!1,st=!1),V&&A?z+=w:V||A||(z-=w);for(var ot=0,nt=0;I<o;I+=2)if(!(at&&at[ot++]<tt/this.pixelRatio)){if(c){var lt=Math.floor(nt);m=c.length<lt+1?[c[0][0]]:c[lt]}(Ct=this.replayImageOrLabel_(t,e,s[I],s[I+1],K,n,l,m,Y,H,J,U,z,Q,a,tt,$t,pt?k:null,st?L:null))&&m&&c[c.length-1]!==m&&c.push(m),m&&(m.length-1===m[0]&&this.declutterItems.push(this,m,x),nt+=1/m[0])}++y;break;case da.DRAW_CHARS:var ht=D[1],Et=D[2],vt=D[3];m=$?null:D[4];var ut=D[5];_=D[6];var mt=D[7],ct=D[8],Kt=D[9];d=D[10];var Zt=D[11];Z=D[12],f=D[13];var ft=[D[14],D[14]],dt=this.textStates[f],_t=dt.font,xt=[dt.scale[0]*ct,dt.scale[1]*ct],gt=void 0;_t in this.widths_?gt=this.widths_[_t]:(gt={},this.widths_[_t]=gt);var Tt=hh(s,ht,Et,2),yt=Math.abs(xt[0])*Ch(_t,Z,gt);if(ut||yt<=Tt){var bt=this.textStates[f].textAlign,It=(Tt-yt)*lc[bt],St=en(s,ht,Et,2,Z,It,mt,Math.abs(xt[0]),Ch,_t,gt,A?0:this.viewRotation_);if(St){var Ct=!1,kt=void 0,Lt=void 0,Rt=void 0,wt=void 0,At=void 0;if(d)for(kt=0,Lt=St.length;kt<Lt;++kt)Rt=(At=St[kt])[4],wt=this.createLabel(Rt,f,"",d),n=At[2]+Zt,l=vt*wt.height+2*(.5-vt)*Zt*xt[1]/xt[0]-Kt,Ct=this.replayImageOrLabel_(t,e,At[0],At[1],wt,n,l,m,wt.height,1,0,0,At[3],ft,!1,wt.width,Mb,null,null)||Ct;if(_)for(kt=0,Lt=St.length;kt<Lt;++kt)Rt=(At=St[kt])[4],wt=this.createLabel(Rt,f,_,""),n=At[2],l=vt*wt.height-Kt,Ct=this.replayImageOrLabel_(t,e,At[0],At[1],wt,n,l,m,wt.height,1,0,0,At[3],ft,!1,wt.width,Mb,null,null)||Ct;Ct&&this.declutterItems.push(this,m,x)}}++y;break;case da.END_GEOMETRY:if(void 0!==$){var Mt=$(x=D[1]);if(Mt)return Mt}++y;break;case da.FILL:O?S++:this.fill_(t),++y;break;case da.MOVE_TO_LINE_TO:for(I=D[1],o=D[2],g=s[I],u=(T=s[I+1])+.5|0,(v=g+.5|0)===h&&u===E||(t.moveTo(g,T),h=v,E=u),I+=2;I<o;I+=2)v=(g=s[I])+.5|0,u=(T=s[I+1])+.5|0,I!=o-2&&v===h&&u===E||(t.lineTo(g,T),h=v,E=u);++y;break;case da.SET_FILL_STYLE:k=D,this.alignFill_=D[2],S&&(this.fill_(t),S=0,C&&(t.stroke(),C=0)),t.fillStyle=D[1],++y;break;case da.SET_STROKE_STYLE:L=D,C&&(t.stroke(),C=0),this.setStrokeStyle_(t,D),++y;break;case da.STROKE:O?C++:t.stroke(),++y;break;default:++y;}}S&&this.fill_(t),C&&t.stroke()},t.prototype.execute=function(t,e,r,i,a){this.viewRotation_=i,this.execute_(t,e,r,this.instructions,a,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,r,i,a){return this.viewRotation_=r,this.execute_(t,1,e,this.hitDetectionInstructions,!0,i,a)},t}();var ig=[ma.POLYGON,ma.CIRCLE,ma.LINE_STRING,ma.IMAGE,ma.TEXT,ma.DEFAULT],gn=function(){function r(r,e,t,i,o,n){this.maxExtent_=r,this.overlaps_=i,this.pixelRatio_=t,this.resolution_=e,this.renderBuffer_=n,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Qa(),this.createExecutors_(o)}return r.prototype.clip=function(r,e){var t=this.getClipCoords(e);r.beginPath(),r.moveTo(t[0],t[1]),r.lineTo(t[2],t[3]),r.lineTo(t[4],t[5]),r.lineTo(t[6],t[7]),r.clip()},r.prototype.createExecutors_=function(r){for(var e in r){var t=this.executorsByZIndex_[e];void 0===t&&(t={},this.executorsByZIndex_[e]=t);var i=r[e],o=[this.renderBuffer_||0,this.renderBuffer_||0];for(var n in i){var c=i[n];t[n]=new fn(this.resolution_,this.pixelRatio_,this.overlaps_,c,o)}}},r.prototype.hasExecutors=function(r){for(var e in this.executorsByZIndex_)for(var t=this.executorsByZIndex_[e],i=0,o=r.length;i<o;++i)if(r[i]in t)return!0;return!1},r.prototype.forEachFeatureAtCoordinate=function(r,e,t,i,o,n){var c=2*(i=Math.round(i))+1,$=xb(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-t,-r[0],-r[1]);this.hitDetectionContext_||(this.hitDetectionContext_=Ua(c,c));var a,l=this.hitDetectionContext_;l.canvas.width!==c||l.canvas.height!==c?(l.canvas.width=c,l.canvas.height=c):l.clearRect(0,0,c,c),void 0!==this.renderBuffer_&&(a=bb(),ke(a,r),Vc(a,e*(this.renderBuffer_+i),a));var s,u=hn(i);function p(r){for(var e=l.getImageData(0,0,c,c).data,t=0;t<c;t++)for(var i=0;i<c;i++)if(u[t][i]&&e[4*(i*c+t)+3]>0){var $=void 0;return(!n||s!=ma.IMAGE&&s!=ma.TEXT||-1!==n.indexOf(r))&&($=o(r)),$||void l.clearRect(0,0,c,c)}}var E,g,f,d,h,v=Object.keys(this.executorsByZIndex_).map(Number);for(v.sort(Rb),E=v.length-1;E>=0;--E){var x=v[E].toString();for(f=this.executorsByZIndex_[x],g=ig.length-1;g>=0;--g)if(void 0!==(d=f[s=ig[g]])&&(h=d.executeHitDetection(l,$,t,p,a)))return h}},r.prototype.getClipCoords=function(r){var e=this.maxExtent_;if(!e)return null;var t=e[0],i=e[1],o=e[2],n=e[3],c=[t,i,t,n,o,n,o,i];return Db(c,0,8,2,r,c),c},r.prototype.isEmpty=function(){return Ub(this.executorsByZIndex_)},r.prototype.execute=function(r,e,t,i,o,n,c){var $=Object.keys(this.executorsByZIndex_).map(Number);$.sort(Rb),this.maxExtent_&&(r.save(),this.clip(r,t));var a,l,s,u,p,E,g=n||ig;for(a=0,l=$.length;a<l;++a){var f=$[a].toString();for(p=this.executorsByZIndex_[f],s=0,u=g.length;s<u;++s){var d=g[s];if(void 0!==(E=p[d]))if(!c||d!=ma.IMAGE&&d!=ma.TEXT)E.execute(r,e,t,i,o);else{var h=c[f];h?h.push(E,t.slice(0)):c[f]=[E,t.slice(0)]}}}this.maxExtent_&&r.restore()},r}(),jg={0:[[!0]]};function tb(r,e,t){var i,o=Math.floor(r.length/2);if(e>=o)for(i=o;i<e;i++)r[i][t]=!0;else if(e<o)for(i=e+1;i<o;i++)r[i][t]=!0}function hn(r){if(void 0!==jg[r])return jg[r];for(var e=2*r+1,t=new Array(e),i=0;i<e;i++)t[i]=new Array(e);for(var o=r,n=0,c=0;o>=n;)tb(t,r+o,r+n),tb(t,r+n,r+o),tb(t,r-n,r+o),tb(t,r-o,r+n),tb(t,r-o,r-n),tb(t,r-n,r-o),tb(t,r+n,r-o),tb(t,r+o,r-n),2*((c+=1+2*++n)-o)+1>0&&(c+=1-2*(o-=1));return jg[r]=t,t}function jn(r,e,t,i,o,n){for(var c=Object.keys(r).map(Number).sort(Rb),$=0,a=c.length;$<a;++$)for(var l=r[c[$].toString()],s=void 0,u=0,p=l.length;u<p;){var E=l[u++],g=l[u++];E.execute(e,1,g,t,o),E!==s&&E.declutterItems.length>0&&(s=E,n.push({items:E.declutterItems,opacity:i}))}}function kn(e,t,r,a,o,i,n){var $=e[0]/2,c=e[1]/2,m=Ua($,c);m.imageSmoothingEnabled=!1;for(var g=m.canvas,s=new Fh(m,.5,o,null,n),p=r.length,h=Math.floor(16777215/p),l={},C=1;C<=p;++C){var M=r[C-1],v=M.getStyleFunction()||a;if(a){var u=v(M,i);if(u){Array.isArray(u)||(u=[u]);for(var y="#"+("000000"+(C*h).toString(16)).slice(-6),d=0,f=u.length;d<f;++d){var I=u[d],x=I.clone(),S=x.getFill();S&&S.setColor(y);var D=x.getStroke();D&&D.setColor(y),x.setText(void 0);var w=I.getImage();if(w){var T=w.getImageSize();if(!T)continue;var G=document.createElement("canvas");G.width=T[0],G.height=T[1];var j=G.getContext("2d",{alpha:!1});j.fillStyle=y;var q=j.canvas;j.fillRect(0,0,q.width,q.height);var E=T?T[0]:q.width,A=T?T[1]:q.height;Ua(E,A).drawImage(q,0,0),x.setImage(new Qi({img:q,imgSize:T,anchor:w.getAnchor(),anchorXUnits:ub.PIXELS,anchorYUnits:ub.PIXELS,offset:w.getOrigin(),size:w.getSize(),opacity:w.getOpacity(),scale:w.getScale(),rotation:w.getRotation(),rotateWithView:w.getRotateWithView()}))}var N=Number(x.getZIndex());(L=l[N])||(L={},l[N]=L,L[aa.POLYGON]=[],L[aa.CIRCLE]=[],L[aa.LINE_STRING]=[],L[aa.POINT]=[]);var O=x.getGeometryFunction()(M);O&&Ga(o,O.getExtent())&&L[O.getType().replace("Multi","")].push(O,x)}}}}for(var R=Object.keys(l).map(Number).sort(Rb),b=(C=0,R.length);C<b;++C){var L=l[R[C]];for(var U in L){var z=L[U];for(d=0,f=z.length;d<f;d+=2){s.setStyle(z[d+1]);for(var F=0,P=t.length;F<P;++F)s.setTransform(t[F]),s.drawGeometry(z[d])}}}return m.getImageData(0,0,g.width,g.height)}function ln(e,t,r){var a=[];if(r){var o=4*(Math.round(e[0]/2)+Math.round(e[1]/2)*r.width),i=r.data[o],n=r.data[o+1],$=r.data[o+2]+256*(n+256*i),c=Math.floor(16777215/t.length);$&&$%c==0&&a.push(t[$/c-1])}return a}var ub={FRACTION:"fraction",PIXELS:"pixels"};var kg={};var Na={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};var Nd={};var Od={};var lg={};var mn=lg&&lg.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Ni=function(t){function e(e,r,o,n){var p=t.call(this)||this;return p.extent=e,p.pixelRatio_=o,p.resolution=r,p.state=n,p}return mn(e,t),e.prototype.changed=function(){this.dispatchEvent(ba.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return ca()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){ca()},e}(Vb);lg.default=Ni;var nn=Od&&Od.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),on=function(t){function e(e,n,i,r,o,a){var $=t.call(this,e,n,i,na.IDLE)||this;return $.src_=r,$.image_=new Image,null!==o&&($.image_.crossOrigin=o),$.unlisten_=null,$.state=na.IDLE,$.imageLoadFunction_=a,$}return nn(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=na.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=ob(this.extent)/this.image_.height),this.state=na.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=na.IDLE&&this.state!=na.ERROR||(this.state=na.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=mg(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Ni);function mg(t,e,n){var i=t;if(i.src&&vh){var r=i.decode(),o=!0;return r.then(function(){o&&e()}).catch(function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():n())}),function(){o=!1}}var a=[tc(i,ba.LOAD,e),tc(i,ba.ERROR,n)];return function(){a.forEach(ia)}}Od.listenImage=mg,Od.default=on;var pn=Nd&&Nd.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),ng=null,Oi=function(t){function e(e,i,a,n,r,o){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==n&&(s.image_.crossOrigin=n),s.canvas_={},s.color_=o,s.unlisten_=null,s.imageState_=r,s.size_=a,s.src_=i,s.tainted_,s}return pn(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===na.LOADED){ng||(ng=Ua(1,1)),ng.drawImage(this.image_,0,0);try{ng.getImageData(0,0,1,1),this.tainted_=!1}catch(t){ng=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(ba.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=na.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=na.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=Ua(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==na.IDLE){this.imageState_=na.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=mg(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),this.isTainted_()){var a=this.color_;return i.globalCompositeOperation="multiply",i.fillStyle="rgb("+a[0]+","+a[1]+","+a[2]+")",i.fillRect(0,0,e.width,e.height),i.globalCompositeOperation="destination-in",void i.drawImage(this.image_,0,0)}for(var n=i.getImageData(0,0,e.width,e.height),r=n.data,o=this.color_[0]/255,s=this.color_[1]/255,h=this.color_[2]/255,$=0,_=r.length;$<_;$+=4)r[$]*=o,r[$+1]*=s,r[$+2]*=h;i.putImageData(n,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Vb);function Pi(t,e,i,a,n,r){var o=hd.get(e,a,r);return o||(o=new Oi(t,e,i,a,n,r),hd.set(e,a,r,o)),o}Nd.get=Pi,Nd.default=Oi;var qn=kg&&kg.__extends||function(){var i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Qi=function(i){function t(t){var o=this,r=t||{},n=void 0!==r.opacity?r.opacity:1,e=void 0!==r.rotation?r.rotation:0,s=void 0!==r.scale?r.scale:1,c=void 0!==r.rotateWithView&&r.rotateWithView;(o=i.call(this,{opacity:n,rotation:e,scale:s,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:c})||this).anchor_=void 0!==r.anchor?r.anchor:[.5,.5],o.normalizedAnchor_=null,o.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:Na.TOP_LEFT,o.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:ub.FRACTION,o.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:ub.FRACTION,o.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var a=void 0!==r.img?r.img:null,h=void 0!==r.imgSize?r.imgSize:null,$=r.src;ja(!(void 0!==$&&a),4),ja(!a||a&&h,5),void 0!==$&&0!==$.length||!a||($=a.src||ga(a)),ja(void 0!==$&&$.length>0,6);var g=void 0!==r.src?na.IDLE:na.LOADED;return o.color_=void 0!==r.color?ph(r.color):null,o.iconImage_=Pi(a,$,h,o.crossOrigin_,g,o.color_),o.offset_=void 0!==r.offset?r.offset:[0,0],o.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:Na.TOP_LEFT,o.origin_=null,o.size_=void 0!==r.size?r.size:null,o}return qn(t,i),t.prototype.clone=function(){var i=this.getScale();return new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(i)?i.slice():i,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},t.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var i=this.anchor_,t=this.getSize();if(this.anchorXUnits_==ub.FRACTION||this.anchorYUnits_==ub.FRACTION){if(!t)return null;i=this.anchor_.slice(),this.anchorXUnits_==ub.FRACTION&&(i[0]*=t[0]),this.anchorYUnits_==ub.FRACTION&&(i[1]*=t[1])}if(this.anchorOrigin_!=Na.TOP_LEFT){if(!t)return null;i===this.anchor_&&(i=this.anchor_.slice()),this.anchorOrigin_!=Na.TOP_RIGHT&&this.anchorOrigin_!=Na.BOTTOM_RIGHT||(i[0]=-i[0]+t[0]),this.anchorOrigin_!=Na.BOTTOM_LEFT&&this.anchorOrigin_!=Na.BOTTOM_RIGHT||(i[1]=-i[1]+t[1])}return this.normalizedAnchor_=i,this.normalizedAnchor_},t.prototype.setAnchor=function(i){this.anchor_=i,this.normalizedAnchor_=null},t.prototype.getColor=function(){return this.color_},t.prototype.getImage=function(i){return this.iconImage_.getImage(i)},t.prototype.getPixelRatio=function(i){return this.iconImage_.getPixelRatio(i)},t.prototype.getImageSize=function(){return this.iconImage_.getSize()},t.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},t.prototype.getImageState=function(){return this.iconImage_.getImageState()},t.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},t.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var i=this.offset_,t=this.getDisplacement();if(this.offsetOrigin_!=Na.TOP_LEFT){var o=this.getSize(),r=this.iconImage_.getSize();if(!o||!r)return null;i=i.slice(),this.offsetOrigin_!=Na.TOP_RIGHT&&this.offsetOrigin_!=Na.BOTTOM_RIGHT||(i[0]=r[0]-o[0]-i[0]),this.offsetOrigin_!=Na.BOTTOM_LEFT&&this.offsetOrigin_!=Na.BOTTOM_RIGHT||(i[1]=r[1]-o[1]-i[1])}return i[0]+=t[0],i[1]+=t[1],this.origin_=i,this.origin_},t.prototype.getSrc=function(){return this.iconImage_.getSrc()},t.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},t.prototype.listenImageChange=function(i){this.iconImage_.addEventListener(ba.CHANGE,i)},t.prototype.load=function(){this.iconImage_.load()},t.prototype.unlistenImageChange=function(i){this.iconImage_.removeEventListener(ba.CHANGE,i)},t}(Ai);kg.default=Qi;var rn="#333",sn=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=yd(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new ic({color:rn}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:Ji.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=yd(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();var tn=_f&&_f.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ri=function(e){function t(t){var r=e.call(this,t)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.animatingOrInteracting_,r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=bb(),r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r.clipping=!0,r}return tn(t,e),t.prototype.useContainer=function(t,r,i){i<1&&(t=null),e.prototype.useContainer.call(this,t,r,i)},t.prototype.renderFrame=function(e,t){var r=e.pixelRatio,i=e.layerStatesArray[e.layerIndex];tj(this.pixelTransform,1/r,1/r),zg(this.inversePixelTransform,this.pixelTransform);var n=vj(this.pixelTransform);this.useContainer(t,n,i.opacity);var a=this.context,o=a.canvas,s=this.replayGroup_;if(!s||s.isEmpty())return!this.containerReused&&o.width>0&&(o.width=0),this.container;var $=Math.round(e.size[0]*r),d=Math.round(e.size[1]*r);o.width!=$||o.height!=d?(o.width=$,o.height=d,o.style.transform!==n&&(o.style.transform=n)):this.containerReused||a.clearRect(0,0,$,d),this.preRender(a,e);var p=e.extent,u=e.viewState,h=u.center,l=u.resolution,c=u.projection,g=u.rotation,m=c.getExtent(),F=this.getLayer().getSource(),f=!1;if(i.extent&&this.clipping){var v=ac(i.extent,c);(f=!ab(v,e.extent)&&Ga(v,e.extent))&&this.clipUnrotated(a,e,v)}var _=e.viewHints,y=!(_[va.ANIMATING]||_[va.INTERACTING]),x=this.getRenderTransform(h,l,g,r,$,d,0),R=this.getLayer().getDeclutter()?{}:null;if(s.execute(a,1,x,g,y,void 0,R),F.getWrapX()&&c.canWrapX()&&!ab(m,p)){for(var I=p[0],w=Fa(m),E=0,T=void 0;I<m[0];){T=w*--E;var C=this.getRenderTransform(h,l,g,r,$,d,T);s.execute(a,1,C,g,y,void 0,R),I+=w}for(E=0,I=p[2];I>m[2];){T=w*++E;var j=this.getRenderTransform(h,l,g,r,$,d,T);s.execute(a,1,j,g,y,void 0,R),I-=w}}if(R){var G=e.viewHints,S=!(G[va.ANIMATING]||G[va.INTERACTING]);jn(R,a,g,1,S,e.declutterItems)}f&&a.restore(),this.postRender(a,e);var D=i.opacity,A=this.container;return D!==parseFloat(A.style.opacity)&&(A.style.opacity=1===D?"":String(D)),this.renderedRotation_!==u.rotation&&(this.renderedRotation_=u.rotation,this.hitDetectionImageData_=null),this.container},t.prototype.getFeatures=function(e){return new Promise(function(t,r){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];ra(this.pixelTransform,i);var n=this.renderedCenter_,a=this.renderedResolution_,o=this.renderedRotation_,s=this.renderedProjection_,$=this.renderedExtent_,d=this.getLayer(),p=[],u=i[0]/2,h=i[1]/2;p.push(this.getRenderTransform(n,a,o,.5,u,h,0).slice());var l=d.getSource(),c=s.getExtent();if(l.getWrapX()&&s.canWrapX()&&!ab(c,$)){for(var g=$[0],m=Fa(c),F=0,f=void 0;g<c[0];)f=m*--F,p.push(this.getRenderTransform(n,a,o,.5,u,h,f).slice()),g+=m;for(F=0,g=$[2];g>c[2];)f=m*++F,p.push(this.getRenderTransform(n,a,o,.5,u,h,f).slice()),g-=m}this.hitDetectionImageData_=kn(i,p,this.renderedFeatures_,d.getStyleFunction(),$,a,o)}t(ln(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},t.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,n){if(this.replayGroup_){var a=t.viewState.resolution,o=t.viewState.rotation,s=this.getLayer(),$={};return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,function(e){var t=ga(e);if(!(t in $))return $[t]=!0,i(e,s)},s.getDeclutter()?n:null)}},t.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.prepareFrame=function(e){var t=this.getLayer(),r=t.getSource();if(!r)return!1;var i=e.viewHints[va.ANIMATING],n=e.viewHints[va.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(!this.dirty_&&!a&&i||!o&&n)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=e.extent,$=e.viewState,d=$.projection,p=$.resolution,u=e.pixelRatio,h=t.getRevision(),l=t.getRenderBuffer(),c=t.getRenderOrder();void 0===c&&(c=tl);var g=$.center.slice(),m=Vc(s,l*p),F=[m.slice()],f=d.getExtent();if(r.getWrapX()&&d.canWrapX()&&!ab(f,e.extent)){var v=Fa(f),_=Math.max(Fa(m)/2,v);m[0]=f[0]-_,m[2]=f[2]+_,Ug(g,d);var y=Gj(F[0],d);y[0]<f[0]&&y[2]<f[2]?F.push([y[0]+v,y[1],y[2]+v,y[3]]):y[0]>f[0]&&y[2]>f[2]&&F.push([y[0]-v,y[1],y[2]-v,y[3]])}if(!this.dirty_&&this.renderedResolution_==p&&this.renderedRevision_==h&&this.renderedRenderOrder_==c&&ab(this.renderedExtent_,m))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var x,R=new bn(Hh(p,u),m,p,u,t.getDeclutter()),I=Ia();if(I){for(var w=0,E=F.length;w<E;++w)r.loadFeatures(Ac(F[w],d),p,I);x=Zb(I,d)}else for(w=0,E=F.length;w<E;++w)r.loadFeatures(F[w],p,d);var T=ul(p,u),C=function(e){var r,i=e.getStyleFunction()||t.getStyleFunction();if(i&&(r=i(e,p)),r){var n=this.renderFeature(e,T,r,R,x);this.dirty_=this.dirty_||n}}.bind(this),j=Ac(m,d),G=r.getFeaturesInExtent(j);c&&G.sort(c);for(w=0,E=G.length;w<E;++w)C(G[w]);this.renderedFeatures_=G;var S=R.finish(),D=new gn(m,p,u,r.getOverlaps(),S,t.getRenderBuffer());return this.renderedResolution_=p,this.renderedRevision_=h,this.renderedRenderOrder_=c,this.renderedExtent_=m,this.renderedCenter_=g,this.renderedProjection_=d,this.replayGroup_=D,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},t.prototype.renderFeature=function(e,t,r,i,n){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var o=0,s=r.length;o<s;++o)a=Ih(i,e,r[o],t,this.boundHandleStyleImageChange_,n)||a;else a=Ih(i,e,r,t,this.boundHandleStyleImageChange_,n);return a},t}(Mi);_f.default=Ri;var un=Wf&&Wf.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),mc=function(e){function r(r){return e.call(this,r)||this}return un(r,e),r.prototype.createRenderer=function(){return new Ri(this)},r}(Fi);Wf.default=mc;var Pd={};var Qd=function(){function t(t){var $C6Up$$interop$default=ug(Md);this.rbush_=new $C6Up$$interop$default.d(t),this.items_={}}return t.prototype.insert=function(t,r){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:r};this.rbush_.insert(i),this.items_[ga(r)]=i},t.prototype.load=function(t,r){for(var i=new Array(r.length),e=0,n=r.length;e<n;e++){var o=t[e],s=r[e],u={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[e]=u,this.items_[ga(s)]=u}this.rbush_.load(i)},t.prototype.remove=function(t){var r=ga(t),i=this.items_[r];return delete this.items_[r],null!==this.rbush_.remove(i)},t.prototype.update=function(t,r){var i=this.items_[ga(r)],e=[i.minX,i.minY,i.maxX,i.maxY];uc(e,t)||(this.remove(r),this.insert(t,r))},t.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},t.prototype.getInExtent=function(t){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(r).map(function(t){return t.value})},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,r){return this.forEach_(this.getInExtent(t),r)},t.prototype.forEach_=function(t,r){for(var i,e=0,n=t.length;e<n;e++)if(i=r(t[e]))return i;return i},t.prototype.isEmpty=function(){return Ub(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var r=this.rbush_.toJSON();return nb(r.minX,r.minY,r.maxX,r.maxY,t)},t.prototype.concat=function(t){for(var r in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[r]=t.items_[r]},t}();var og={};var vn=og&&og.__extends||function(){var t=function(r,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(r,o)};return function(r,o){function e(){this.constructor=r}t(r,o),r.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),Si=function(t){function r(r){var o=t.call(this)||this;return o.projection_=ua(r.projection),o.attributions_=Ti(r.attributions),o.attributionsCollapsible_=void 0===r.attributionsCollapsible||r.attributionsCollapsible,o.loading=!1,o.state_=void 0!==r.state?r.state:Kb.READY,o.wrapX_=void 0!==r.wrapX&&r.wrapX,o}return vn(r,t),r.prototype.getAttributions=function(){return this.attributions_},r.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},r.prototype.getProjection=function(){return this.projection_},r.prototype.getResolutions=function(){return ca()},r.prototype.getState=function(){return this.state_},r.prototype.getWrapX=function(){return this.wrapX_},r.prototype.getContextOptions=function(){},r.prototype.refresh=function(){this.changed()},r.prototype.setAttributions=function(t){this.attributions_=Ti(t),this.changed()},r.prototype.setState=function(t){this.state_=t,this.changed()},r}(Ka);function Ti(t){return t?Array.isArray(t)?function(r){return t}:"function"==typeof t?t:function(r){return[t]}:null}og.default=Si;var Oa={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};function wn(t,e){return[[-1/0,-1/0,1/0,1/0]]}var xn=!1;function yn(e,t,r,$){return function(o,a,s){var i=new XMLHttpRequest;i.open("GET","function"==typeof e?e(o,a,s):e,!0),t.getType()==bc.ARRAY_BUFFER&&(i.responseType="arraybuffer"),i.withCredentials=xn,i.onload=function(e){if(!i.status||i.status>=200&&i.status<300){var a=t.getType(),n=void 0;a==bc.JSON||a==bc.TEXT?n=i.responseText:a==bc.XML?(n=i.responseXML)||(n=new DOMParser().parseFromString(i.responseText,"application/xml")):a==bc.ARRAY_BUFFER&&(n=i.response),n?r.call(this,t.readFeatures(n,{extent:o,featureProjection:s}),t.readProjection(n)):$.call(this)}else $.call(this)}.bind(this),i.onerror=function(){$.call(this)}.bind(this),i.send()}}function Ui(e,t){return yn(e,t,function(e,t){"function"==typeof this.addFeatures&&this.addFeatures(e)},wb)}var Vi=Pd&&Pd.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),nc=function(e){function t(t,r){var o=e.call(this,t)||this;return o.feature=r,o}return Vi(t,e),t}(Da);Pd.VectorSourceEvent=nc;var oc=function(e){function t(t){var r=this,o=t||{};(r=e.call(this,{attributions:o.attributions,projection:void 0,state:Kb.READY,wrapX:void 0===o.wrapX||o.wrapX})||this).loader_=wb,r.format_=o.format,r.overlaps_=void 0===o.overlaps||o.overlaps,r.url_=o.url,void 0!==o.loader?r.loader_=o.loader:void 0!==r.url_&&(ja(r.format_,7),r.loader_=Ui(r.url_,r.format_)),r.strategy_=void 0!==o.strategy?o.strategy:wn;var i,n,s=void 0===o.useSpatialIndex||o.useSpatialIndex;return r.featuresRtree_=s?new Qd:null,r.loadedExtentsRtree_=new Qd,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(o.features)?n=o.features:o.features&&(n=(i=o.features).getArray()),s||void 0!==i||(i=new xa(n)),void 0!==n&&r.addFeaturesInternal(n),void 0!==i&&r.bindFeaturesCollection_(i),r}return Vi(t,e),t.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},t.prototype.addFeatureInternal=function(e){var t=ga(e);if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var r=e.getGeometry();if(r){var o=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new nc(Oa.ADDFEATURE,e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)},t.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[ea(t,ba.CHANGE,this.handleFeatureChange_,this),ea(t,mb.PROPERTYCHANGE,this.handleFeatureChange_,this)]},t.prototype.addToIndex_=function(e,t){var r=!0,o=t.getId();return void 0!==o&&(o.toString()in this.idIndex_?r=!1:this.idIndex_[o.toString()]=t),r&&(ja(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r},t.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},t.prototype.addFeaturesInternal=function(e){for(var t=[],r=[],o=[],i=0,n=e.length;i<n;i++){var s=e[i],a=ga(s);this.addToIndex_(a,s)&&r.push(s)}i=0;for(var u=r.length;i<u;i++){s=r[i],a=ga(s);this.setupChangeEvents_(a,s);var $=s.getGeometry();if($){var l=$.getExtent();t.push(l),o.push(s)}else this.nullGeometryFeatures_[a]=s}this.featuresRtree_&&this.featuresRtree_.load(t,o);i=0;for(var p=r.length;i<p;i++)this.dispatchEvent(new nc(Oa.ADDFEATURE,r[i]))},t.prototype.bindFeaturesCollection_=function(e){var t=!1;this.addEventListener(Oa.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(Oa.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(qa.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)}.bind(this)),e.addEventListener(qa.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)}.bind(this)),this.featuresCollection_=e},t.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(ia)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var o=new nc(Oa.CLEAR);this.dispatchEvent(o),this.changed()},t.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},t.prototype.forEachFeatureAtCoordinateDirect=function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})},t.prototype.forEachFeatureInExtent=function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},t.prototype.forEachFeatureIntersectingExtent=function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var o=t(r);if(o)return o}})},t.prototype.getFeaturesCollection=function(){return this.featuresCollection_},t.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ub(this.nullGeometryFeatures_)||Ja(e,ae(this.nullGeometryFeatures_))),e},t.prototype.getFeaturesAtCoordinate=function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t},t.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray():[]},t.prototype.getClosestFeatureToCoordinate=function(e,t){var r=e[0],o=e[1],i=null,n=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],u=t||Ea;return this.featuresRtree_.forEachInExtent(a,function(e){if(u(e)){var t=e.getGeometry(),$=s;if((s=t.closestPointXY(r,o,n,s))<$){i=e;var l=Math.sqrt(s);a[0]=r-l,a[1]=o-l,a[2]=r+l,a[3]=o+l}}}),i},t.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},t.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null},t.prototype.getFeatureByUid=function(e){var t=this.uidIndex_[e];return void 0!==t?t:null},t.prototype.getFormat=function(){return this.format_},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.getUrl=function(){return this.url_},t.prototype.handleFeatureChange_=function(e){var t=e.target,r=ga(t),o=t.getGeometry();if(o){var i=o.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,t)):this.featuresRtree_&&this.featuresRtree_.update(i,t)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);var n=t.getId();if(void 0!==n){var s=n.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new nc(Oa.CHANGEFEATURE,t))},t.prototype.hasFeature=function(e){var t=e.getId();return void 0!==t?t in this.idIndex_:ga(e)in this.uidIndex_},t.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Ub(this.nullGeometryFeatures_)},t.prototype.loadFeatures=function(e,t,r){var o=this.loadedExtentsRtree_,i=this.strategy_(e,t);this.loading=!1;for(var n=function(e,n){var a=i[e];o.forEachInExtent(a,function(e){return ab(e.extent,a)})||(s.loader_.call(s,a,t,r),o.insert(a,{extent:a.slice()}),s.loading=s.loader_!==wb)},s=this,a=0,u=i.length;a<u;++a)n(a)},t.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),e.prototype.refresh.call(this)},t.prototype.removeLoadedExtent=function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if(uc(r.extent,e))return t=r,!0}),t&&r.remove(t)},t.prototype.removeFeature=function(e){var t=ga(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e),this.changed()},t.prototype.removeFeatureInternal=function(e){var t=ga(e);this.featureChangeKeys_[t].forEach(ia),delete this.featureChangeKeys_[t];var r=e.getId();void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new nc(Oa.REMOVEFEATURE,e))},t.prototype.removeFromIdIndex_=function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t},t.prototype.setLoader=function(e){this.loader_=e},t.prototype.setUrl=function(e){ja(this.format_,7),this.setLoader(Ui(e,this.format_))},t}(Si);Pd.default=oc;var Wi=Oc&&Oc.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),la={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},Rd={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},Sd=function(e){function t(t,i){var r=e.call(this,t)||this;return r.feature=i,r}return Wi(t,e),t}(Da),zn=function(e){function t(t){var i=this,r=t;r.stopDown||(r.stopDown=vb),(i=e.call(this,r)||this).shouldHandle_=!1,i.downPx_=null,i.downTimeout_,i.lastDragTime_,i.freehand_=!1,i.source_=t.source?t.source:null,i.features_=t.features?t.features:null,i.snapTolerance_=t.snapTolerance?t.snapTolerance:12,i.type_=t.type,i.mode_=Dn(i.type_),i.stopClick_=!!t.stopClick,i.minPoints_=t.minPoints?t.minPoints:i.mode_===la.POLYGON?3:2,i.maxPoints_=t.maxPoints?t.maxPoints:1/0,i.finishCondition_=t.finishCondition?t.finishCondition:Ea;var o=t.geometryFunction;if(!o)if(i.type_===aa.CIRCLE)o=function(e,t,i){var r=t||new Jd([NaN,NaN]),o=ha(e[0],i),s=Ha(o,ha(e[1],i));r.setCenterAndRadius(o,Math.sqrt(s));var n=Ia();return n&&r.transform(i,n),r};else{var s,n=i.mode_;n===la.POINT?s=gb:n===la.LINE_STRING?s=Gb:n===la.POLYGON&&(s=Sa),o=function(e,t,i){var r=t;return r?n===la.POLYGON?e[0].length?r.setCoordinates([e[0].concat([e[0][0]])]):r.setCoordinates([]):r.setCoordinates(e):r=new s(e),r}}return i.geometryFunction_=o,i.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,i.overlay_=new mc({source:new oc({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:An(),updateWhileInteracting:!0}),i.geometryName_=t.geometryName,i.condition_=t.condition?t.condition:If,i.freehandCondition_,t.freehand?i.freehandCondition_=Fd:i.freehandCondition_=t.freehandCondition?t.freehandCondition:Gd,i.addEventListener(oa(Bd.ACTIVE),i.updateState_),i}return Wi(t,e),t.prototype.setMap=function(t){e.prototype.setMap.call(this,t),this.updateState_()},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleEvent=function(t){t.originalEvent.type===ba.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==la.POINT&&this.freehandCondition_(t);var i=t.type===fa.POINTERMOVE,r=!0;!this.freehand_&&this.lastDragTime_&&t.type===fa.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===fa.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),r=!1):this.freehand_&&t.type===fa.POINTERDOWN?r=!1:i?(r=t.type===fa.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.preventDefault()):("mouse"==t.originalEvent.pointerType||t.type===fa.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===fa.DBLCLICK&&(r=!1),e.prototype.handleEvent.call(this,t)&&r},t.prototype.handleDownEvent=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Wa(fa.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)},t.prototype.handleUpEvent=function(e){var t=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);var i=this.mode_===la.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(e)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate):(this.startDrawing_(e),this.mode_===la.POINT&&this.finishDrawing()),t=!1):this.freehand_&&this.abortDrawing(),!t&&this.stopClick_&&e.stopPropagation(),t},t.prototype.handlePointerMove_=function(e){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,i=e.pixel,r=t[0]-i[0],o=t[1]-i[1],s=r*r+o*o;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(e):this.createOrUpdateSketchPoint_(e)},t.prototype.atFinish_=function(e){var t=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_];if(this.mode_===la.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===la.POLYGON){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,r=[o[0][0],o[0][o[0].length-2]]}if(i)for(var s=e.map,n=0,a=r.length;n<a;n++){var $=r[n],h=s.getPixelFromCoordinate($),p=e.pixel,d=p[0]-h[0],_=p[1]-h[1],c=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(d*d+_*_)<=c){this.finishCoordinate_=$;break}}}return t},t.prototype.createOrUpdateSketchPoint_=function(e){var t=e.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new Pa(new gb(t)),this.updateSketchFeatures_())},t.prototype.startDrawing_=function(e){var t=e.coordinate,i=e.map.getView().getProjection();this.finishCoordinate_=t,this.mode_===la.POINT?this.sketchCoords_=t.slice():this.mode_===la.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Pa(new Gb(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_,void 0,i);this.sketchFeature_=new Pa,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new Sd(Rd.DRAWSTART,this.sketchFeature_))},t.prototype.modifyDrawing_=function(e){var t,i,r,o=e.coordinate,s=this.sketchFeature_.getGeometry(),n=e.map.getView().getProjection();(this.mode_===la.POINT?i=this.sketchCoords_:this.mode_===la.POLYGON?(i=(t=this.sketchCoords_[0])[t.length-1],this.atFinish_(e)&&(o=this.finishCoordinate_.slice())):i=(t=this.sketchCoords_)[t.length-1],i[0]=o[0],i[1]=o[1],this.geometryFunction_(this.sketchCoords_,s,n),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(o);if(s.getType()==aa.POLYGON&&this.mode_!==la.POLYGON){this.sketchLine_||(this.sketchLine_=new Pa);var a=s.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(a.getLayout(),a.getFlatCoordinates()),r.changed()):(r=new Gb(a.getFlatCoordinates(),a.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},t.prototype.addToDrawing_=function(e){var t,i,r=this.sketchFeature_.getGeometry(),o=this.getMap().getView().getProjection();this.mode_===la.LINE_STRING?(this.finishCoordinate_=e.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(e.slice()),this.geometryFunction_(i,r,o)):this.mode_===la.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(e.slice()),t&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,r,o)),this.updateSketchFeatures_(),t&&this.finishDrawing()},t.prototype.removeLastPoint=function(){if(this.sketchFeature_){var e,t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===la.LINE_STRING?((e=this.sketchCoords_).splice(-2,1),this.geometryFunction_(e,t,i),e.length>=2&&(this.finishCoordinate_=e[e.length-2].slice())):this.mode_===la.POLYGON&&((e=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t,i)),0===e.length&&this.abortDrawing(),this.updateSketchFeatures_()}},t.prototype.finishDrawing=function(){var e=this.abortDrawing_();if(e){var t=this.sketchCoords_,i=e.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===la.LINE_STRING?(t.pop(),this.geometryFunction_(t,i,r)):this.mode_===la.POLYGON&&(t[0].pop(),this.geometryFunction_(t,i,r),t=i.getCoordinates()),this.type_===aa.MULTI_POINT?e.setGeometry(new gd([t])):this.type_===aa.MULTI_LINE_STRING?e.setGeometry(new Ke([t])):this.type_===aa.MULTI_POLYGON&&e.setGeometry(new Se([t])),this.dispatchEvent(new Sd(Rd.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}},t.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),e},t.prototype.abortDrawing=function(){var e=this.abortDrawing_();e&&this.dispatchEvent(new Sd(Rd.DRAWABORT,e))},t.prototype.appendCoordinates=function(e){var t=this.mode_,i=[];t===la.LINE_STRING?i=this.sketchCoords_:t===la.POLYGON&&(i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var r=i.pop(),o=0;o<e.length;o++)this.addToDrawing_(e[o]);this.addToDrawing_(r)},t.prototype.extend=function(e){var t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new Sd(Rd.DRAWSTART,this.sketchFeature_))},t.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)},t.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing(),this.overlay_.setMap(t?e:null)},t}(Ma);function An(){var e=Qc();return function(t,i){return e[t.getGeometry().getType()]}}function Bn(e,t){return function(i,r,o){var s=ha(i[0],o),n=ha(i[1],o),a=Math.sqrt(Ha(s,n)),$=r||Dc(new Jd(s),e),h=t;if(!t){var p=n[0]-s[0],d=n[1]-s[1];h=Math.atan(d/p)-(p<0?Math.PI:0)}Re($,s,a,h);var _=Ia();return _&&$.transform(o,_),$}}function Cn(){return function(e,t,i){var r=sa(e.map(function(e){return ha(e,i)})),o=[[Xb(r),vc(r),xc(r),wc(r),Xb(r)]],s=t;s?s.setCoordinates(o):s=new Sa(o);var n=Ia();return n&&s.transform(i,n),s}}function Dn(e){var t;return e===aa.POINT||e===aa.MULTI_POINT?t=la.POINT:e===aa.LINE_STRING||e===aa.MULTI_LINE_STRING?t=la.LINE_STRING:e===aa.POLYGON||e===aa.MULTI_POLYGON?t=la.POLYGON:e===aa.CIRCLE&&(t=la.CIRCLE),t}Oc.createRegularPolygon=Bn,Oc.createBox=Cn,Oc.default=zn;var pg={};var Xi=pg&&pg.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),En={EXTENTCHANGED:"extentchanged"},Fn=function(e){function t(t){var r=e.call(this,En.EXTENTCHANGED)||this;return r.extent=t,r}return Xi(t,e),t}(Da),Gn=function(e){function t(t){var r=this,n=t||{};return(r=e.call(this,n)||this).condition_=n.condition?n.condition:Fd,r.extent_=null,r.pointerHandler_=null,r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.snappedToVertex_=!1,r.extentFeature_=null,r.vertexFeature_=null,t||(t={}),r.extentOverlay_=new mc({source:new oc({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:Hn(),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.vertexOverlay_=new mc({source:new oc({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:In(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&r.setExtent(t.extent),r}return Xi(t,e),t.prototype.snapToVertex_=function(e,t){var r=t.getCoordinateFromPixelInternal(e),n=this.getExtentInternal();if(n){var o=Jn(n);o.sort(function(e,t){return bd(r,e)-bd(r,t)});var i=o[0],a=_c(r,i),$=t.getPixelFromCoordinateInternal(a);if(ad(e,$)<=this.pixelTolerance_){var l=t.getPixelFromCoordinateInternal(i[0]),p=t.getPixelFromCoordinateInternal(i[1]),u=Ha($,l),s=Ha($,p),c=Math.sqrt(Math.min(u,s));return this.snappedToVertex_=c<=this.pixelTolerance_,this.snappedToVertex_&&(a=u>s?i[1]:i[0]),a}}return null},t.prototype.handlePointerMove_=function(e){var t=e.pixel,r=e.map,n=this.snapToVertex_(t,r);n||(n=r.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(n)},t.prototype.createOrUpdateExtentFeature_=function(e){var t=this.extentFeature_;return t?e?t.setGeometry(Ib(e)):t.setGeometry(void 0):(t=e?new Pa(Ib(e)):new Pa({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t},t.prototype.createOrUpdatePointerFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new Pa(new gb(e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t));return t},t.prototype.handleEvent=function(t){return!t.originalEvent||!this.condition_(t)||(t.type!=fa.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),e.prototype.handleEvent.call(this,t),!1)},t.prototype.handleDownEvent=function(e){var t=e.pixel,r=e.map,n=this.getExtentInternal(),o=this.snapToVertex_(t,r),i=function(e){var t=null,r=null;return e[0]==n[0]?t=n[2]:e[0]==n[2]&&(t=n[0]),e[1]==n[1]?r=n[3]:e[1]==n[3]&&(r=n[1]),null!==t&&null!==r?[t,r]:null};if(o&&n){var a=o[0]==n[0]||o[0]==n[2]?o[0]:null,$=o[1]==n[1]||o[1]==n[3]?o[1]:null;null!==a&&null!==$?this.pointerHandler_=Yi(i(o)):null!==a?this.pointerHandler_=Zi(i([a,n[1]]),i([a,n[3]])):null!==$&&(this.pointerHandler_=Zi(i([n[0],$]),i([n[2],$])))}else o=r.getCoordinateFromPixelInternal(t),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=Yi(o);return!0},t.prototype.handleDragEvent=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}},t.prototype.handleUpEvent=function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return t&&0!==Bj(t)||this.setExtent(null),!1},t.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getExtent=function(){return Ac(this.getExtentInternal(),this.getMap().getView().getProjection())},t.prototype.getExtentInternal=function(){return this.extent_},t.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new Fn(this.extent_))},t}(Ma);function Hn(){var e=Qc();return function(t,r){return e[aa.POLYGON]}}function In(){var e=Qc();return function(t,r){return e[aa.POINT]}}function Yi(e){return function(t){return sa([e,t])}}function Zi(e,t){return e[0]==t[0]?function(r){return sa([e,[r[0],t[1]]])}:e[1]==t[1]?function(r){return sa([e,[t[0],r[1]]])}:null}function Jn(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}pg.default=Gn;var Td={};var $i=Td&&Td.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),_i=0,Sc=1,aj=[0,0,0,0],pc=[],qg={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},Ud=function(e){function t(t,r,o){var i=e.call(this,t)||this;return i.features=r,i.mapBrowserEvent=o,i}return $i(t,e),t}(Da);Td.ModifyEvent=Ud;var Kn=function(e){function t(t){var r,o=e.call(this,t)||this;if(o.boundHandleFeatureChange_=o.handleFeatureChange_.bind(o),o.condition_=t.condition?t.condition:ni,o.defaultDeleteCondition_=function(e){return ym(e)&&li(e)},o.deleteCondition_=t.deleteCondition?t.deleteCondition:o.defaultDeleteCondition_,o.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:Fd,o.vertexFeature_=null,o.vertexSegments_=null,o.lastPixel_=[0,0],o.ignoreNextSingleClick_=!1,o.modified_=!1,o.rBush_=new Qd,o.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,o.snappedToVertex_=!1,o.changingFeature_=!1,o.dragSegments_=[],o.overlay_=new mc({source:new oc({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:Mn(),updateWhileAnimating:!0,updateWhileInteracting:!0}),o.SEGMENT_WRITERS_={Point:o.writePointGeometry_.bind(o),LineString:o.writeLineStringGeometry_.bind(o),LinearRing:o.writeLineStringGeometry_.bind(o),Polygon:o.writePolygonGeometry_.bind(o),MultiPoint:o.writeMultiPointGeometry_.bind(o),MultiLineString:o.writeMultiLineStringGeometry_.bind(o),MultiPolygon:o.writeMultiPolygonGeometry_.bind(o),Circle:o.writeCircleGeometry_.bind(o),GeometryCollection:o.writeGeometryCollectionGeometry_.bind(o)},o.source_=null,t.source?(o.source_=t.source,r=new xa(o.source_.getFeatures()),o.source_.addEventListener(Oa.ADDFEATURE,o.handleSourceAdd_.bind(o)),o.source_.addEventListener(Oa.REMOVEFEATURE,o.handleSourceRemove_.bind(o))):r=t.features,!r)throw new Error("The modify interaction requires features or a source");return o.features_=r,o.features_.forEach(o.addFeature_.bind(o)),o.features_.addEventListener(qa.ADD,o.handleFeatureAdd_.bind(o)),o.features_.addEventListener(qa.REMOVE,o.handleFeatureRemove_.bind(o)),o.lastPointerEvent_=null,o}return $i(t,e),t.prototype.addFeature_=function(e){var t=e.getGeometry();if(t){var r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),e.addEventListener(ba.CHANGE,this.boundHandleFeatureChange_)},t.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new Ud(qg.MODIFYSTART,this.features_,e)))},t.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(ba.CHANGE,this.boundHandleFeatureChange_)},t.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(var o=r.length-1;o>=0;--o){for(var i=r[o],n=this.dragSegments_.length-1;n>=0;--n)this.dragSegments_[n][0]===i&&this.dragSegments_.splice(n,1);t.remove(i)}},t.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.prototype.setActive.call(this,t)},t.prototype.setMap=function(t){this.overlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},t.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},t.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},t.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},t.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},t.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),o={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),o)},t.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o){var n=r[o],a={feature:e,geometry:t,depth:[o],index:o,segment:[n,n]};this.rBush_.insert(t.getExtent(),a)}},t.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length-1;o<i;++o){var n=r.slice(o,o+2),a={feature:e,geometry:t,index:o,segment:n};this.rBush_.insert(sa(n),a)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length-1;a<s;++a){var $=n.slice(a,a+2),p={feature:e,geometry:t,depth:[o],index:a,segment:$};this.rBush_.insert(sa($),p)}},t.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length-1;a<s;++a){var $=n.slice(a,a+2),p={feature:e,geometry:t,depth:[o],index:a,segment:$};this.rBush_.insert(sa($),p)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),o=0,i=r.length;o<i;++o)for(var n=r[o],a=0,s=n.length;a<s;++a)for(var $=n[a],p=0,m=$.length-1;p<m;++p){var u=$.slice(p,p+2),d={feature:e,geometry:t,depth:[a,o],index:p,segment:u};this.rBush_.insert(sa(u),d)}},t.prototype.writeCircleGeometry_=function(e,t){var r=t.getCenter(),o={feature:e,geometry:t,index:_i,segment:[r,r]},i={feature:e,geometry:t,index:Sc,segment:[r,r]},n=[o,i];o.featureSegments=n,i.featureSegments=n,this.rBush_.insert(Wc(r),o);var a=t,s=Ia();if(s&&this.getMap()){var $=this.getMap().getView().getProjection();a=a.clone().transform(s,$),a=Dc(a).transform($,s)}this.rBush_.insert(a.getExtent(),i)},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),o=0;o<r.length;++o){var i=r[o];(0,this.SEGMENT_WRITERS_[i.getType()])(e,i)}},t.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new Pa(new gb(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t));return t},t.prototype.handleEvent=function(t){return!t.originalEvent||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=fa.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(r=!(t.type!=fa.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==fa.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),e.prototype.handleEvent.call(this,t)&&!r);var r},t.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,r=0,o=this.dragSegments_.length;r<o;++r){for(var i=this.dragSegments_[r],n=i[0],a=n.depth,s=n.geometry,$=void 0,p=n.segment,m=i[1];t.length<s.getStride();)t.push(p[m][t.length]);switch(s.getType()){case aa.POINT:$=t,p[0]=t,p[1]=t;break;case aa.MULTI_POINT:($=s.getCoordinates())[n.index]=t,p[0]=t,p[1]=t;break;case aa.LINE_STRING:($=s.getCoordinates())[n.index+m]=t,p[m]=t;break;case aa.MULTI_LINE_STRING:case aa.POLYGON:($=s.getCoordinates())[a[0]][n.index+m]=t,p[m]=t;break;case aa.MULTI_POLYGON:($=s.getCoordinates())[a[1]][a[0]][n.index+m]=t,p[m]=t;break;case aa.CIRCLE:if(p[0]=t,p[1]=t,n.index===_i)this.changingFeature_=!0,s.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;var u=e.map.getView().getProjection(),d=ad(ha(s.getCenter(),u),ha(t,u)),x=Ia();if(x){var g=s.clone().transform(x,u);g.setRadius(d),d=g.transform(u,x).getRadius()}s.setRadius(d),this.changingFeature_=!1}}$&&this.setGeometryCoordinates_(s,$)}this.createOrUpdateVertexFeature_(t)},t.prototype.handleDownEvent=function(e){if(!this.condition_(e))return!1;var t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.modified_=!1;var r=this.vertexFeature_;if(r){var o=e.map.getView().getProjection(),i=[],n=r.getGeometry().getCoordinates(),a=sa([n]),s=this.rBush_.getInExtent(a),$={};s.sort(Ln);for(var p=0,m=s.length;p<m;++p){var u=s[p],d=u.segment,x=ga(u.geometry),g=u.depth;if(g&&(x+="-"+g.join("-")),$[x]||($[x]=new Array(2)),u.geometry.getType()!==aa.CIRCLE||u.index!==Sc){if(!Ra(d[0],n)||$[x][0]){if(!Ra(d[1],n)||$[x][1])ga(d)in this.vertexSegments_&&!$[x][0]&&!$[x][1]&&this.insertVertexCondition_(e)&&i.push([u,n]);else{if((u.geometry.getType()===aa.LINE_STRING||u.geometry.getType()===aa.MULTI_LINE_STRING)&&$[x][0]&&0===$[x][0].index)continue;this.dragSegments_.push([u,1]),$[x][1]=u}}else this.dragSegments_.push([u,0]),$[x][0]=u;}else{var h=cj(t,u,o);Ra(h,n)&&!$[x][0]&&(this.dragSegments_.push([u,0]),$[x][0]=u)}}i.length&&this.willModifyFeatures_(e);for(var l=i.length-1;l>=0;--l)this.insertVertex_.apply(this,i[l])}return!!this.vertexFeature_},t.prototype.handleUpEvent=function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],o=r.geometry;if(o.getType()===aa.CIRCLE){var i=o.getCenter(),n=r.featureSegments[0],a=r.featureSegments[1];n.segment[0]=i,n.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.rBush_.update(Wc(i),n);var s=o,$=Ia();if($){var p=e.map.getView().getProjection();s=s.clone().transform($,p),s=Dc(s).transform(p,$)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update(sa(r.segment),r)}return this.modified_&&(this.dispatchEvent(new Ud(qg.MODIFYEND,this.features_,e)),this.modified_=!1),!1},t.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)},t.prototype.handlePointerAtPixel_=function(e,t,r){var o=r||t.getCoordinateFromPixel(e),i=t.getView().getProjection(),n=ac(Wc(o,aj),i),a=t.getView().getResolution()*this.pixelTolerance_,s=Ac(Vc(n,a,aj),i),$=this.rBush_.getInExtent(s);if($.length>0){$.sort(function(e,t){return bj(o,e,i)-bj(o,t,i)});var p=$[0],m=p.segment,u=cj(o,p,i),d=t.getPixelFromCoordinate(u),x=ad(e,d);if(x<=this.pixelTolerance_){var g={};if(p.geometry.getType()===aa.CIRCLE&&p.index===Sc)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u);else{var h=t.getPixelFromCoordinate(m[0]),l=t.getPixelFromCoordinate(m[1]),c=Ha(d,h),_=Ha(d,l);x=Math.sqrt(Math.min(c,_)),this.snappedToVertex_=x<=this.pixelTolerance_,this.snappedToVertex_&&(u=c>_?m[1]:m[0]),this.createOrUpdateVertexFeature_(u);for(var v=1,y=$.length;v<y;++v){var q=$[v].segment;if(!(Ra(m[0],q[0])&&Ra(m[1],q[1])||Ra(m[0],q[1])&&Ra(m[1],q[0])))break;g[ga(q)]=!0}}return g[ga(m)]=!0,void(this.vertexSegments_=g)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},t.prototype.insertVertex_=function(e,t){for(var r,o=e.segment,i=e.feature,n=e.geometry,a=e.depth,s=e.index;t.length<n.getStride();)t.push(0);switch(n.getType()){case aa.MULTI_LINE_STRING:case aa.POLYGON:(r=n.getCoordinates())[a[0]].splice(s+1,0,t);break;case aa.MULTI_POLYGON:(r=n.getCoordinates())[a[1]][a[0]].splice(s+1,0,t);break;case aa.LINE_STRING:(r=n.getCoordinates()).splice(s+1,0,t);break;default:return;}this.setGeometryCoordinates_(n,r);var $=this.rBush_;$.remove(e),this.updateSegmentIndices_(n,s,a,1);var p={segment:[o[0],t],feature:i,geometry:n,depth:a,index:s};$.insert(sa(p.segment),p),this.dragSegments_.push([p,1]);var m={segment:[t,o[1]],feature:i,geometry:n,depth:a,index:s+1};$.insert(sa(m.segment),m),this.dragSegments_.push([m,0]),this.ignoreNextSingleClick_=!0},t.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=fa.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e);var t=this.removeVertex_();return this.dispatchEvent(new Ud(qg.MODIFYEND,this.features_,e)),this.modified_=!1,t}return!1},t.prototype.removeVertex_=function(){var e,t,r,o,i,n,a,s,$,p,m,u=this.dragSegments_,d={},x=!1;for(i=u.length-1;i>=0;--i)p=(r=u[i])[0],m=ga(p.feature),p.depth&&(m+="-"+p.depth.join("-")),m in d||(d[m]={}),0===r[1]?(d[m].right=p,d[m].index=p.index):1==r[1]&&(d[m].left=p,d[m].index=p.index+1);for(m in d){switch($=d[m].right,a=d[m].left,(s=(n=d[m].index)-1)<0&&(s=0),e=t=(o=(p=void 0!==a?a:$).geometry).getCoordinates(),x=!1,o.getType()){case aa.MULTI_LINE_STRING:t[p.depth[0]].length>2&&(t[p.depth[0]].splice(n,1),x=!0);break;case aa.LINE_STRING:t.length>2&&(t.splice(n,1),x=!0);break;case aa.MULTI_POLYGON:e=e[p.depth[1]];case aa.POLYGON:(e=e[p.depth[0]]).length>4&&(n==e.length-1&&(n=0),e.splice(n,1),x=!0,0===n&&(e.pop(),e.push(e[0]),s=e.length-1));}if(x){this.setGeometryCoordinates_(o,t);var g=[];if(void 0!==a&&(this.rBush_.remove(a),g.push(a.segment[0])),void 0!==$&&(this.rBush_.remove($),g.push($.segment[1])),void 0!==a&&void 0!==$){var h={depth:p.depth,feature:p.feature,geometry:p.geometry,index:s,segment:g};this.rBush_.insert(sa(h.segment),h)}this.updateSegmentIndices_(o,n,p.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),u.length=0}}return x},t.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},t.prototype.updateSegmentIndices_=function(e,t,r,o){this.rBush_.forEachInExtent(e.getExtent(),function(i){i.geometry===e&&(void 0===r||void 0===i.depth||Sb(i.depth,r))&&i.index>t&&(i.index+=o)})},t}(Ma);function Ln(e,t){return e.index-t.index}function bj(e,t,r){var o=t.geometry;if(o.getType()===aa.CIRCLE){var i=o;if(t.index===Sc){var n=Ia();n&&(i=i.clone().transform(n,r));var a=Ha(i.getCenter(),ha(e,r)),s=Math.sqrt(a)-i.getRadius();return s*s}}var $=ha(e,r);return pc[0]=ha(t.segment[0],r),pc[1]=ha(t.segment[1],r),bd($,pc)}function cj(e,t,r){var o=t.geometry;if(o.getType()===aa.CIRCLE&&t.index===Sc){var i=o,n=Ia();return n&&(i=i.clone().transform(n,r)),Cb(i.getClosestPoint(ha(e,r)),r)}var a=ha(e,r);return pc[0]=ha(t.segment[0],r),pc[1]=ha(t.segment[1],r),Cb(_c(a,pc),r)}function Mn(){var e=Qc();return function(t,r){return e[aa.POINT]}}Td.default=Kn;var rg={};var dj=rg&&rg.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Nn={SELECT:"select"},On=function(e){function t(t,r,i,o){var n=e.call(this,t)||this;return n.selected=r,n.deselected=i,n.mapBrowserEvent=o,n}return dj(t,e),t}(Da),Vd={},Pn=function(e){function t(t){var r,i=e.call(this)||this,o=t||{};if(i.boundAddFeature_=i.addFeature_.bind(i),i.boundRemoveFeature_=i.removeFeature_.bind(i),i.condition_=o.condition?o.condition:li,i.addCondition_=o.addCondition?o.addCondition:ki,i.removeCondition_=o.removeCondition?o.removeCondition:ki,i.toggleCondition_=o.toggleCondition?o.toggleCondition:Gd,i.multi_=!!o.multi&&o.multi,i.filter_=o.filter?o.filter:Ea,i.hitTolerance_=o.hitTolerance?o.hitTolerance:0,i.style_=void 0!==o.style?o.style:Qn(),i.features_=o.features||new xa,o.layers){if("function"==typeof o.layers)r=o.layers;else{var n=o.layers;r=function(e){return sc(n,e)}}}else r=Ea;return i.layerFilter_=r,i.featureLayerAssociation_={},i}return dj(t,e),t.prototype.addFeatureLayerAssociation_=function(e,t){this.featureLayerAssociation_[ga(e)]=t},t.prototype.getFeatures=function(){return this.features_},t.prototype.getHitTolerance=function(){return this.hitTolerance_},t.prototype.getLayer=function(e){return this.featureLayerAssociation_[ga(e)]},t.prototype.setHitTolerance=function(e){this.hitTolerance_=e},t.prototype.setMap=function(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),e.prototype.setMap.call(this,t),t?(this.features_.addEventListener(qa.ADD,this.boundAddFeature_),this.features_.addEventListener(qa.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(qa.ADD,this.boundAddFeature_),this.features_.removeEventListener(qa.REMOVE,this.boundRemoveFeature_))},t.prototype.addFeature_=function(e){var t=e.element;this.style_&&this.applySelectedStyle_(t)},t.prototype.removeFeature_=function(e){var t=e.element;this.style_&&this.restorePreviousStyle_(t)},t.prototype.getStyle=function(){return this.style_},t.prototype.applySelectedStyle_=function(e){var t=ga(e);t in Vd||(Vd[t]=e.getStyle()),e.setStyle(this.style_)},t.prototype.restorePreviousStyle_=function(e){var r=ga(e),i=this.getMap().getInteractions().getArray().filter(function(r){return r instanceof t&&r.getStyle()&&-1!==r.getFeatures().getArray().indexOf(e)});i.length>0?e.setStyle(i[i.length-1].getStyle()):(e.setStyle(Vd[r]),delete Vd[r])},t.prototype.removeFeatureLayerAssociation_=function(e){delete this.featureLayerAssociation_[ga(e)]},t.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;var t=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),o=!t&&!r&&!i,n=e.map,a=this.getFeatures(),s=[],$=[];if(o){Tb(this.featureLayerAssociation_),n.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return $.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var l=a.getLength()-1;l>=0;--l){var u=a.item(l),p=$.indexOf(u);p>-1?$.splice(p,1):(a.remove(u),s.push(u))}0!==$.length&&a.extend($)}else{n.forEachFeatureAtPixel(e.pixel,function(e,o){if(this.filter_(e,o))return!t&&!i||sc(a.getArray(),e)?(r||i)&&sc(a.getArray(),e)&&(s.push(e),this.removeFeatureLayerAssociation_(e)):($.push(e),this.addFeatureLayerAssociation_(e,o)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var c=s.length-1;c>=0;--c)a.remove(s[c]);a.extend($)}return($.length>0||s.length>0)&&this.dispatchEvent(new On(Nn.SELECT,$,s,e)),!0},t}(rb);function Qn(){var e=Qc();return Ja(e[aa.POLYGON],e[aa.LINE_STRING]),Ja(e[aa.GEOMETRY_COLLECTION],e[aa.LINE_STRING]),function(t){return t.getGeometry()?e[t.getGeometry().getType()]:null}}rg.default=Pn;var sg={};var Rn=sg&&sg.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function ej(e){return e.feature?e.feature:e.element?e.element:void 0}var qc=[],Sn=function(e){function t(t){var r=this,n=t||{},o=n;return o.handleDownEvent||(o.handleDownEvent=Ea),o.stopDown||(o.stopDown=vb),(r=e.call(this,o)||this).source_=n.source?n.source:null,r.vertex_=void 0===n.vertex||n.vertex,r.edge_=void 0===n.edge||n.edge,r.features_=n.features?n.features:null,r.featuresListenerKeys_=[],r.featureChangeListenerKeys_={},r.indexedFeaturesExtents_={},r.pendingFeatures_={},r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.rBush_=new Qd,r.SEGMENT_WRITERS_={Point:r.writePointGeometry_.bind(r),LineString:r.writeLineStringGeometry_.bind(r),LinearRing:r.writeLineStringGeometry_.bind(r),Polygon:r.writePolygonGeometry_.bind(r),MultiPoint:r.writeMultiPointGeometry_.bind(r),MultiLineString:r.writeMultiLineStringGeometry_.bind(r),MultiPolygon:r.writeMultiPolygonGeometry_.bind(r),GeometryCollection:r.writeGeometryCollectionGeometry_.bind(r),Circle:r.writeCircleGeometry_.bind(r)},r}return Rn(t,e),t.prototype.addFeature=function(e,t){var r=void 0===t||t,n=ga(e),o=e.getGeometry();if(o){var i=this.SEGMENT_WRITERS_[o.getType()];i&&(this.indexedFeaturesExtents_[n]=o.getExtent(bb()),i(e,o))}r&&(this.featureChangeListenerKeys_[n]=ea(e,ba.CHANGE,this.handleFeatureChange_,this))},t.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},t.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},t.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},t.prototype.handleEvent=function(t){var r=this.snapTo(t.pixel,t.coordinate,t.map);return r.snapped&&(t.coordinate=r.vertex.slice(0,2),t.pixel=r.vertexPixel),e.prototype.handleEvent.call(this,t)},t.prototype.handleFeatureAdd_=function(e){var t=ej(e);this.addFeature(t)},t.prototype.handleFeatureRemove_=function(e){var t=ej(e);this.removeFeature(t)},t.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var r=ga(t);r in this.pendingFeatures_||(this.pendingFeatures_[r]=t)}else this.updateFeature_(t)},t.prototype.handleUpEvent=function(e){var t=ae(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},t.prototype.removeFeature=function(e,t){var r=void 0===t||t,n=ga(e),o=this.indexedFeaturesExtents_[n];if(o){var i=this.rBush_,a=[];i.forEachInExtent(o,function(t){e===t.feature&&a.push(t)});for(var s=a.length-1;s>=0;--s)i.remove(a[s])}r&&(ia(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},t.prototype.setMap=function(t){var r=this.getMap(),n=this.featuresListenerKeys_,o=this.getFeatures_();r&&(n.forEach(ia),n.length=0,o.forEach(this.forEachFeatureRemove_.bind(this))),e.prototype.setMap.call(this,t),t&&(this.features_?n.push(ea(this.features_,qa.ADD,this.handleFeatureAdd_,this),ea(this.features_,qa.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(ea(this.source_,Oa.ADDFEATURE,this.handleFeatureAdd_,this),ea(this.source_,Oa.REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_.bind(this)))},t.prototype.snapTo=function(e,t,r){var n=r.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=r.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),i=sa([n,o]),a=this.rBush_.getInExtent(i);this.vertex_&&!this.edge_&&(a=a.filter(function(e){return e.feature.getGeometry().getType()!==aa.CIRCLE}));var s=!1,$=null,p=null;if(0===a.length)return{snapped:s,vertex:$,vertexPixel:p};for(var u,l=r.getView().getProjection(),h=ha(t,l),m=1/0,d=0;d<a.length;++d){var c=a[d];qc[0]=ha(c.segment[0],l),qc[1]=ha(c.segment[1],l);var g=bd(h,qc);g<m&&(u=c,m=g)}var G=u.segment;if(this.vertex_&&!this.edge_){var v=r.getPixelFromCoordinate(G[0]),f=r.getPixelFromCoordinate(G[1]),_=Ha(e,v),y=Ha(e,f);Math.sqrt(Math.min(_,y))<=this.pixelTolerance_&&(s=!0,$=_>y?G[1]:G[0],p=r.getPixelFromCoordinate($))}else if(this.edge_){var N=u.feature.getGeometry().getType()===aa.CIRCLE;if(N){var W=u.feature.getGeometry(),x=Ia();x&&(W=W.clone().transform(x,l)),$=Cb(Wj(h,W),l)}else qc[0]=ha(G[0],l),qc[1]=ha(G[1],l),$=Cb(_c(h,qc),l);if(p=r.getPixelFromCoordinate($),ad(e,p)<=this.pixelTolerance_&&(s=!0,this.vertex_&&!N)){v=r.getPixelFromCoordinate(G[0]),f=r.getPixelFromCoordinate(G[1]),_=Ha(p,v),y=Ha(p,f);Math.sqrt(Math.min(_,y))<=this.pixelTolerance_&&($=_>y?G[1]:G[0],p=r.getPixelFromCoordinate($))}}return s&&(p=[Math.round(p[0]),Math.round(p[1])]),{snapped:s,vertex:$,vertexPixel:p}},t.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},t.prototype.writeCircleGeometry_=function(e,t){var r=this.getMap().getView().getProjection(),n=t,o=Ia();o&&(n=n.clone().transform(o,r));var i=Dc(n);o&&i.transform(r,o);for(var a=i.getCoordinates()[0],s=0,$=a.length-1;s<$;++s){var p=a.slice(s,s+2),u={feature:e,segment:p};this.rBush_.insert(sa(p),u)}},t.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var o=this.SEGMENT_WRITERS_[r[n].getType()];o&&o(e,r[n])}},t.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length-1;n<o;++n){var i=r.slice(n,n+2),a={feature:e,segment:i};this.rBush_.insert(sa(i),a)}},t.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],a=0,s=i.length-1;a<s;++a){var $=i.slice(a,a+2),p={feature:e,segment:$};this.rBush_.insert(sa($),p)}},t.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n){var i=r[n],a={feature:e,segment:[i,i]};this.rBush_.insert(t.getExtent(),a)}},t.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],a=0,s=i.length;a<s;++a)for(var $=i[a],p=0,u=$.length-1;p<u;++p){var l=$.slice(p,p+2),h={feature:e,segment:l};this.rBush_.insert(sa(l),h)}},t.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),n={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)},t.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),n=0,o=r.length;n<o;++n)for(var i=r[n],a=0,s=i.length-1;a<s;++a){var $=i.slice(a,a+2),p={feature:e,segment:$};this.rBush_.insert(sa($),p)}},t}(Ma);sg.default=Sn;var Wd={};var fj=Wd&&Wd.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function a(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),tg={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},Xd=function(t){function e(e,r,a,n,o){var i=t.call(this,e)||this;return i.features=r,i.coordinate=a,i.startCoordinate=n,i.mapBrowserEvent=o,i}return fj(e,t),e}(Da);Wd.TranslateEvent=Xd;var Tn=function(t){function e(e){var r,a=this,n=e||{};if((a=t.call(this,n)||this).lastCoordinate_=null,a.startCoordinate_=null,a.features_=void 0!==n.features?n.features:null,n.layers){if("function"==typeof n.layers)r=n.layers;else{var o=n.layers;r=function(t){return sc(o,t)}}}else r=Ea;return a.layerFilter_=r,a.filter_=n.filter?n.filter:Ea,a.hitTolerance_=n.hitTolerance?n.hitTolerance:0,a.lastFeature_=null,a.addEventListener(oa(Bd.ACTIVE),a.handleActiveChanged_),a}return fj(e,t),e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new xa([this.lastFeature_]);return this.dispatchEvent(new Xd(tg.TRANSLATESTART,e,t.coordinate,this.startCoordinate_,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new xa([this.lastFeature_]);return this.dispatchEvent(new Xd(tg.TRANSLATEEND,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,r=e[0]-this.lastCoordinate_[0],a=e[1]-this.lastCoordinate_[1],n=this.features_||new xa([this.lastFeature_]);n.forEach(function(t){var e=t.getGeometry();e.translate(r,a),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new Xd(tg.TRANSLATING,n,e,this.startCoordinate_,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||sc(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(r)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(Ma);Wd.default=Tn;var Un=Ve&&Ve.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])})(t,e)};return function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),gj=function(r){function t(t){return(t=Aa({},t)).controls||(t.controls=Yh()),t.interactions||(t.interactions=tm({onFocusOnly:!0})),r.call(this,t)||this}return Un(t,r),t.prototype.createRenderer=function(){return new df(this)},t}(pf);Ve.default=gj;var Vn="11/09/2020 23:11";var hj=[{nameEnglish:"Egypt",nameGerman:"\xC4gypten",isoAlpha3:"EGY",originalText:"\xC4gypten (seit 15. Juni)",originalHtml:"&#xC4;gypten (seit 15. Juni)",blocked:"total"},{nameEnglish:"Albania",nameGerman:"Albanien",isoAlpha3:"ALB",originalText:"Albanien (seit 15. Juni)",originalHtml:"Albanien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Algeria",nameGerman:"Algerien",isoAlpha3:"DZA",originalText:"Algerien (seit 15. Juni)",originalHtml:"Algerien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Andorra",nameGerman:"Andorra - das F\xFCrstentum Andorra",isoAlpha3:"AND",originalText:"Andorra - das F\xFCrstentum Andorra (seit 26. August)",originalHtml:"Andorra - das F&#xFC;rstentum Andorra (seit 26. August)",blocked:"total"},{nameEnglish:"Angola",nameGerman:"Angola",isoAlpha3:"AGO",originalText:"Angola (seit 15. Juni)",originalHtml:"Angola (seit 15. Juni)",blocked:"total"},{nameEnglish:"Antigua and Barbuda",nameGerman:"Antigua und Barbuda",isoAlpha3:"ATG",originalText:"Antigua und Barbuda (seit 17. Juni)",originalHtml:"Antigua und Barbuda (seit 17. Juni)",blocked:"total"},{nameEnglish:"Equatorial Guinea",nameGerman:"\xC4quatorialguinea",isoAlpha3:"GNQ",originalText:"\xC4quatorialguinea (seit 15. Juni)",originalHtml:"&#xC4;quatorialguinea (seit 15. Juni)",blocked:"total"},{nameEnglish:"Argentina",nameGerman:"Argentinien",isoAlpha3:"ARG",originalText:"Argentinien (seit 15. Juni)",originalHtml:"Argentinien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Armenia",nameGerman:"Armenien",isoAlpha3:"ARM",originalText:"Armenien (seit 15. Juni)",originalHtml:"Armenien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Azerbaijan",nameGerman:"Aserbaidschan",isoAlpha3:"AZE",originalText:"Aserbaidschan (seit 15. Juni)",originalHtml:"Aserbaidschan (seit 15. Juni)",blocked:"total"},{nameEnglish:"Ethiopia",nameGerman:"\xC4thiopien",isoAlpha3:"ETH",originalText:"\xC4thiopien (seit 15. Juni)",originalHtml:"&#xC4;thiopien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Bahamas",nameGerman:"Bahamas",isoAlpha3:"BHS",originalText:"Bahamas (seit 15. Juni)",originalHtml:"Bahamas (seit 15. Juni)",blocked:"total"},{nameEnglish:"Bahrain",nameGerman:"Bahrain",isoAlpha3:"BHR",originalText:"Bahrain (seit 15. Juni)",originalHtml:"Bahrain (seit 15. Juni)",blocked:"total"},{nameEnglish:"Bangladesh",nameGerman:"Bangladesch",isoAlpha3:"BGD",originalText:"Bangladesch (seit 15. Juni)",originalHtml:"Bangladesch (seit 15. Juni)",blocked:"total"},{nameEnglish:"Barbados",nameGerman:"Barbados",isoAlpha3:"BRB",originalText:"Barbados (seit 15. Juni)",originalHtml:"Barbados (seit 15. Juni)",blocked:"total"},{nameEnglish:"Belarus",nameGerman:"Belarus",isoAlpha3:"BLR",originalText:"Belarus (seit 15. Juni)",originalHtml:"Belarus (seit 15. Juni)",blocked:"total"},{nameEnglish:"Belgium",nameGerman:"Belgien",isoAlpha3:"BEL",originalText:"Belgien \u2013derzeit gelten als Risikogebiete:",originalHtml:"<p>Belgien &#x2013;derzeit gelten als Risikogebiete:</p>\n<ul><li>Region Br&#xFC;ssel (seit 21. August)</li></ul>\n",blocked:"partial"},{nameEnglish:"Belize",nameGerman:"Belize",isoAlpha3:"BLZ",originalText:"Belize (seit 15. Juni)",originalHtml:"Belize (seit 15. Juni)",blocked:"total"},{nameEnglish:"Benin",nameGerman:"Benin",isoAlpha3:"BEN",originalText:"Benin (seit 15. Juni)",originalHtml:"Benin (seit 15. Juni)",blocked:"total"},{nameEnglish:"Bhutan",nameGerman:"Bhutan",isoAlpha3:"BTN",originalText:"Bhutan (seit 15. Juni)",originalHtml:"Bhutan (seit 15. Juni)",blocked:"total"},{nameEnglish:"Bolivia",nameGerman:"Bolivien",isoAlpha3:"BOL",originalText:"Bolivien (seit 15. Juni)",originalHtml:"Bolivien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Bosnia and Herzegovina",nameGerman:"Bosnia und Herzegowina",isoAlpha3:"BIH",originalText:"Bosnia und Herzegowina (seit 15. Juni)",originalHtml:"Bosnia und Herzegowina (seit 15. Juni)",blocked:"total"},{nameEnglish:"Brazil",nameGerman:"Brasilien",isoAlpha3:"BRA",originalText:"Brasilien (seit 15. Juni)",originalHtml:"Brasilien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Bulgaria",nameGerman:"Bulgarien",isoAlpha3:"BGR",originalText:"Bulgarien \u2013 die folgenden Verwaltungsbezirke (\u201EOblaste\u201C) gelten derzeit als Risikogebiete:",originalHtml:"<p>Bulgarien &#x2013; die folgenden Verwaltungsbezirke (&#x201E;Oblaste&#x201C;) gelten derzeit als Risikogebiete:</p>\n<ul><li>Blagoevgrad (seit 7. August):</li></ul>\n",blocked:"partial"},{nameEnglish:"Burkina Faso",nameGerman:"Burkina Faso",isoAlpha3:"BFA",originalText:"Burkina Faso (seit 15. Juni)",originalHtml:"Burkina Faso (seit 15. Juni)",blocked:"total"},{nameEnglish:"Burundi",nameGerman:"Burundi",isoAlpha3:"BDI",originalText:"Burundi (seit 15. Juni)",originalHtml:"Burundi (seit 15. Juni)",blocked:"total"},{nameEnglish:"Cape Verde",nameGerman:"Cabo Verde",isoAlpha3:"CPV",originalText:"Cabo Verde (seit 3. Juli)",originalHtml:"Cabo Verde (seit 3. Juli)",blocked:"total"},{nameEnglish:"Chile",nameGerman:"Chile",isoAlpha3:"CHL",originalText:"Chile (seit 15. Juni)",originalHtml:"Chile (seit 15. Juni)",blocked:"total"},{nameEnglish:"Costa Rica",nameGerman:"Costa Rica",isoAlpha3:"CRI",originalText:"Costa Rica (seit 15. Juni)",originalHtml:"Costa Rica (seit 15. Juni)",blocked:"total"},{nameEnglish:"C\xF4te d'Ivoire",nameGerman:"C\xF4te d'Ivoire",isoAlpha3:"CIV",originalText:"C\xF4te d'Ivoire (seit 15. Juni)",originalHtml:"C&#xF4;te d&apos;Ivoire (seit 15. Juni)",blocked:"total"},{nameEnglish:"Dominica",nameGerman:"Dominica",isoAlpha3:"DMA",originalText:"Dominica (seit 17. Juni)",originalHtml:"Dominica (seit 17. Juni)",blocked:"total"},{nameEnglish:"Dominican Republic",nameGerman:"Dominikanische Republik",isoAlpha3:"DOM",originalText:"Dominikanische Republik (seit 15. Juni)",originalHtml:"Dominikanische Republik (seit 15. Juni)",blocked:"total"},{nameEnglish:"Djibouti",nameGerman:"Dschibuti",isoAlpha3:"DJI",originalText:"Dschibuti (seit 15. Juni)",originalHtml:"Dschibuti (seit 15. Juni)",blocked:"total"},{nameEnglish:"Ecuador",nameGerman:"Ecuador",isoAlpha3:"ECU",originalText:"Ecuador (seit 15. Juni)",originalHtml:"Ecuador (seit 15. Juni)",blocked:"total"},{nameEnglish:"El Salvador",nameGerman:"El Salvador",isoAlpha3:"SLV",originalText:"El Salvador (seit 15. Juni)",originalHtml:"El Salvador (seit 15. Juni)",blocked:"total"},{nameEnglish:"Eritrea",nameGerman:"Eritrea",isoAlpha3:"ERI",originalText:"Eritrea (seit 15. Juni)",originalHtml:"Eritrea (seit 15. Juni)",blocked:"total"},{nameEnglish:"Swaziland",nameGerman:"Eswatini",isoAlpha3:"SWZ",originalText:"Eswatini (seit 15. Juni)",originalHtml:"Eswatini (seit 15. Juni)",blocked:"total"},{nameEnglish:"France",nameGerman:"Frankreich",isoAlpha3:"FRA",originalText:"Frankreich \u2013 folgende \xDCberseegebiete/Regionen gelten derzeit als Risikogebiete:",originalHtml:"<p>Frankreich &#x2013; folgende &#xDC;berseegebiete/Regionen gelten derzeit als Risikogebiete:</p>\n<ul><li>&#xCE;le-de-France (seit 24. August)</li><li>Provence-Alpes-C&#xF4;te d&#x2019;Azur (seit 24. August)</li><li>Occitanie (seit 9. September)</li><li>Nouvelle-Aquitaine (seit 9. September)</li><li>Auvergne-Rhone-Alpes (seit 9. September)</li><li>Korsika (seit 9. September)</li><li>&#xDC;berseegebiet: Franz&#xF6;sisch-Guyana (seit 21. August)</li><li>&#xDC;berseegebiet: Guadeloupe (seit 26. August)</li><li>&#xDC;berseegebiet: St. Martin (seit 26. August)</li></ul>\n",blocked:"partial"},{nameEnglish:"Gabon",nameGerman:"Gabun",isoAlpha3:"GAB",originalText:"Gabun (seit 15. Juni)",originalHtml:"Gabun (seit 15. Juni)",blocked:"total"},{nameEnglish:"Gambia",nameGerman:"Gambia",isoAlpha3:"GMB",originalText:"Gambia (seit 15. Juni)",originalHtml:"Gambia (seit 15. Juni)",blocked:"total"},{nameEnglish:"Ghana",nameGerman:"Ghana",isoAlpha3:"GHA",originalText:"Ghana (seit 15. Juni)",originalHtml:"Ghana (seit 15. Juni)",blocked:"total"},{nameEnglish:"Grenada",nameGerman:"Grenada",isoAlpha3:"GRD",originalText:"Grenada (seit 17. Juni)",originalHtml:"Grenada (seit 17. Juni)",blocked:"total"},{nameEnglish:"Guatemala",nameGerman:"Guatemala",isoAlpha3:"GTM",originalText:"Guatemala (seit 15. Juni)",originalHtml:"Guatemala (seit 15. Juni)",blocked:"total"},{nameEnglish:"Guinea",nameGerman:"Guinea",isoAlpha3:"GIN",originalText:"Guinea (seit 15. Juni)",originalHtml:"Guinea (seit 15. Juni)",blocked:"total"},{nameEnglish:"Guinea-Bissau",nameGerman:"Guinea Bissau",isoAlpha3:"GNB",originalText:"Guinea Bissau (seit 15. Juni)",originalHtml:"Guinea Bissau (seit 15. Juni)",blocked:"total"},{nameEnglish:"Guyana",nameGerman:"Guyana",isoAlpha3:"GUY",originalText:"Guyana (seit 15. Juni)",originalHtml:"Guyana (seit 15. Juni)",blocked:"total"},{nameEnglish:"Haiti",nameGerman:"Haiti",isoAlpha3:"HTI",originalText:"Haiti (seit 15. Juni)",originalHtml:"Haiti (seit 15. Juni)",blocked:"total"},{nameEnglish:"Honduras",nameGerman:"Honduras",isoAlpha3:"HND",originalText:"Honduras (seit 15. Juni)",originalHtml:"Honduras (seit 15. Juni)",blocked:"total"},{nameEnglish:"India",nameGerman:"Indien",isoAlpha3:"IND",originalText:"Indien (seit 15. Juni)",originalHtml:"Indien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Indonesia",nameGerman:"Indonesien",isoAlpha3:"IDN",originalText:"Indonesien (seit 15. Juni)",originalHtml:"Indonesien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Iraq",nameGerman:"Irak",isoAlpha3:"IRQ",originalText:"Irak (seit 15. Juni)",originalHtml:"Irak (seit 15. Juni)",blocked:"total"},{nameEnglish:"Iran",nameGerman:"Iran",isoAlpha3:"IRN",originalText:"Iran (seit 15. Juni)",originalHtml:"Iran (seit 15. Juni)",blocked:"total"},{nameEnglish:"Israel",nameGerman:"Israel",isoAlpha3:"ISR",originalText:"Israel (seit 3. Juli)",originalHtml:"Israel (seit 3. Juli)",blocked:"total"},{nameEnglish:"Jamaica",nameGerman:"Jamaika",isoAlpha3:"JAM",originalText:"Jamaika (seit 15. Juni)",originalHtml:"Jamaika (seit 15. Juni)",blocked:"total"},{nameEnglish:"Yemen",nameGerman:"Jemen",isoAlpha3:"YEM",originalText:"Jemen (seit 15. Juni)",originalHtml:"Jemen (seit 15. Juni)",blocked:"total"},{nameEnglish:"Cameroon",nameGerman:"Kamerun",isoAlpha3:"CMR",originalText:"Kamerun (seit 15. Juni)",originalHtml:"Kamerun (seit 15. Juni)",blocked:"total"},{nameEnglish:"Kazakhstan",nameGerman:"Kasachstan",isoAlpha3:"KAZ",originalText:"Kasachstan (seit 15. Juni)",originalHtml:"Kasachstan (seit 15. Juni)",blocked:"total"},{nameEnglish:"Qatar",nameGerman:"Katar",isoAlpha3:"QAT",originalText:"Katar (seit 15. Juni)",originalHtml:"Katar (seit 15. Juni)",blocked:"total"},{nameEnglish:"Kenya",nameGerman:"Kenia",isoAlpha3:"KEN",originalText:"Kenia (seit 15. Juni)",originalHtml:"Kenia (seit 15. Juni)",blocked:"total"},{nameEnglish:"Kyrgyzstan",nameGerman:"Kirgisistan",isoAlpha3:"KGZ",originalText:"Kirgisistan (seit 15. Juni)",originalHtml:"Kirgisistan (seit 15. Juni)",blocked:"total"},{nameEnglish:"Colombia",nameGerman:"Kolumbien",isoAlpha3:"COL",originalText:"Kolumbien (seit 15. Juni)",originalHtml:"Kolumbien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Comoros",nameGerman:"Komoren",isoAlpha3:"COM",originalText:"Komoren (seit 15. Juni)",originalHtml:"Komoren (seit 15. Juni)",blocked:"total"},{nameEnglish:"Democratic Republic of Congo",nameGerman:"Kongo DR",isoAlpha3:"COD",originalText:"Kongo DR (seit 15. Juni)",originalHtml:"Kongo DR (seit 15. Juni)",blocked:"total"},{nameEnglish:"Congo",nameGerman:"Kongo Rep",isoAlpha3:"COG",originalText:"Kongo Rep (seit 15. Juni)",originalHtml:"Kongo Rep (seit 15. Juni)",blocked:"total"},{nameEnglish:"North Korea",nameGerman:"Korea (Volksrepublik)",isoAlpha3:"PRK",originalText:"Korea (Volksrepublik) (seit 15. Juni)",originalHtml:"Korea (Volksrepublik) (seit 15. Juni)",blocked:"total"},{nameEnglish:"NA",nameGerman:"Kosovo",isoAlpha3:"NA",originalText:"Kosovo (seit 15. Juni)",originalHtml:"Kosovo (seit 15. Juni)",blocked:"total"},{nameEnglish:"Croatia",nameGerman:"Kroatien",isoAlpha3:"HRV",originalText:"Kroatien - die folgenden Gespanschaften gelten derzeit als Risikogebiete:",originalHtml:"<p>Kroatien - die folgenden Gespanschaften gelten derzeit als Risikogebiete:</p>\n<ul><li>&#x160;ibenik-Knin (seit 20. August)</li><li>Split-Dalmatien (seit 20. August)</li><li>Zadar (seit 2. September)</li><li>Dubrovnik-Neretva (seit 9. September)</li><li>Pozega-Slavonia (seit 9. September)</li></ul>\n",blocked:"partial"},{nameEnglish:"Cuba",nameGerman:"Kuba",isoAlpha3:"CUB",originalText:"Kuba (seit 15. Juni)",originalHtml:"Kuba (seit 15. Juni)",blocked:"total"},{nameEnglish:"Kuwait",nameGerman:"Kuwait",isoAlpha3:"KWT",originalText:"Kuwait (seit 15. Juni)",originalHtml:"Kuwait (seit 15. Juni)",blocked:"total"},{nameEnglish:"Lesotho",nameGerman:"Lesotho",isoAlpha3:"LSO",originalText:"Lesotho (seit 15. Juni)",originalHtml:"Lesotho (seit 15. Juni)",blocked:"total"},{nameEnglish:"Lebanon",nameGerman:"Libanon",isoAlpha3:"LBN",originalText:"Libanon (seit 15. Juni)",originalHtml:"Libanon (seit 15. Juni)",blocked:"total"},{nameEnglish:"Liberia",nameGerman:"Liberia",isoAlpha3:"LBR",originalText:"Liberia (seit 15. Juni)",originalHtml:"Liberia (seit 15. Juni)",blocked:"total"},{nameEnglish:"Libya",nameGerman:"Libyen",isoAlpha3:"LBY",originalText:"Libyen (seit 15. Juni)",originalHtml:"Libyen (seit 15. Juni)",blocked:"total"},{nameEnglish:"Madagascar",nameGerman:"Madagaskar",isoAlpha3:"MDG",originalText:"Madagaskar (seit 15. Juni)",originalHtml:"Madagaskar (seit 15. Juni)",blocked:"total"},{nameEnglish:"Malawi",nameGerman:"Malawi",isoAlpha3:"MWI",originalText:"Malawi (seit 15. Juni)",originalHtml:"Malawi (seit 15. Juni)",blocked:"total"},{nameEnglish:"Maldives",nameGerman:"Malediven",isoAlpha3:"MDV",originalText:"Malediven (seit 17. Juli)",originalHtml:"Malediven (seit 17. Juli)",blocked:"total"},{nameEnglish:"Mali",nameGerman:"Mali",isoAlpha3:"MLI",originalText:"Mali (seit 15. Juni)",originalHtml:"Mali (seit 15. Juni)",blocked:"total"},{nameEnglish:"Morocco",nameGerman:"Marokko",isoAlpha3:"MAR",originalText:"Marokko (seit 15. Juni)",originalHtml:"Marokko (seit 15. Juni)",blocked:"total"},{nameEnglish:"Mauritania",nameGerman:"Mauretanien",isoAlpha3:"MRT",originalText:"Mauretanien (seit 15. Juni)",originalHtml:"Mauretanien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Mexico",nameGerman:"Mexiko",isoAlpha3:"MEX",originalText:"Mexiko (seit 15. Juni)",originalHtml:"Mexiko (seit 15. Juni)",blocked:"total"},{nameEnglish:"Mongolia",nameGerman:"Mongolei",isoAlpha3:"MNG",originalText:"Mongolei (seit 15. Juni)",originalHtml:"Mongolei (seit 15. Juni)",blocked:"total"},{nameEnglish:"Montenegro",nameGerman:"Montenegro",isoAlpha3:"MNE",originalText:"Montenegro (15. \u2013 19. Juni und seit 17. Juli)",originalHtml:"Montenegro (15. &#x2013; 19. Juni und seit 17. Juli)",blocked:"total"},{nameEnglish:"Mozambique",nameGerman:"Mosambik",isoAlpha3:"MOZ",originalText:"Mosambik (seit 15. Juni)",originalHtml:"Mosambik (seit 15. Juni)",blocked:"total"},{nameEnglish:"Namibia",nameGerman:"Namibia",isoAlpha3:"NAM",originalText:"Namibia (seit 15. Juni)",originalHtml:"Namibia (seit 15. Juni)",blocked:"total"},{nameEnglish:"Nepal",nameGerman:"Nepal",isoAlpha3:"NPL",originalText:"Nepal (seit 15. Juni)",originalHtml:"Nepal (seit 15. Juni)",blocked:"total"},{nameEnglish:"Nicaragua",nameGerman:"Nicaragua",isoAlpha3:"NIC",originalText:"Nicaragua (seit 15. Juni)",originalHtml:"Nicaragua (seit 15. Juni)",blocked:"total"},{nameEnglish:"Netherlands",nameGerman:"Niederlande",isoAlpha3:"NLD",originalText:"Niederlande - die folgenden autonomen L\xE4nder gelten derzeit als Risikogebiete:",originalHtml:"<p>Niederlande - die folgenden autonomen L&#xE4;nder gelten derzeit als Risikogebiete:</p>\n<ul><li>Aruba (seit 26. August)</li><li>St. Maarten (seit 26. August)</li></ul>\n",blocked:"partial"},{nameEnglish:"Niger",nameGerman:"Niger",isoAlpha3:"NER",originalText:"Niger (seit 15. Juni)",originalHtml:"Niger (seit 15. Juni)",blocked:"total"},{nameEnglish:"Nigeria",nameGerman:"Nigeria",isoAlpha3:"NGA",originalText:"Nigeria (seit 15. Juni)",originalHtml:"Nigeria (seit 15. Juni)",blocked:"total"},{nameEnglish:"Macedonia",nameGerman:"Nordmazedonien",isoAlpha3:"MKD",originalText:"Nordmazedonien (seit 15. Juni)",originalHtml:"Nordmazedonien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Oman",nameGerman:"Oman",isoAlpha3:"OMN",originalText:"Oman (seit 15. Juni)",originalHtml:"Oman (seit 15. Juni)",blocked:"total"},{nameEnglish:"Pakistan",nameGerman:"Pakistan",isoAlpha3:"PAK",originalText:"Pakistan (seit 15. Juni)",originalHtml:"Pakistan (seit 15. Juni)",blocked:"total"},{nameEnglish:"Palestine, State of",nameGerman:"Pal\xE4stinensische Gebiete",isoAlpha3:"PSE",originalText:"Pal\xE4stinensische Gebiete (seit 3. Juli)",originalHtml:"Pal&#xE4;stinensische Gebiete (seit 3. Juli)",blocked:"total"},{nameEnglish:"Panama",nameGerman:"Panama",isoAlpha3:"PAN",originalText:"Panama (seit 15. Juni)",originalHtml:"Panama (seit 15. Juni)",blocked:"total"},{nameEnglish:"Papua New Guinea",nameGerman:"Papua-Neuguinea",isoAlpha3:"PNG",originalText:"Papua-Neuguinea (seit 17. Juni)",originalHtml:"Papua-Neuguinea (seit 17. Juni)",blocked:"total"},{nameEnglish:"Paraguay",nameGerman:"Paraguay",isoAlpha3:"PRY",originalText:"Paraguay (seit 15. Juni)",originalHtml:"Paraguay (seit 15. Juni)",blocked:"total"},{nameEnglish:"Peru",nameGerman:"Peru",isoAlpha3:"PER",originalText:"Peru (seit 15. Juni)",originalHtml:"Peru (seit 15. Juni)",blocked:"total"},{nameEnglish:"Philippines",nameGerman:"Philippinen",isoAlpha3:"PHL",originalText:"Philippinen (seit 15. Juni)",originalHtml:"Philippinen (seit 15. Juni)",blocked:"total"},{nameEnglish:"Moldova",nameGerman:"Republik Moldau",isoAlpha3:"MDA",originalText:"Republik Moldau (seit 15. Juni)",originalHtml:"Republik Moldau (seit 15. Juni)",blocked:"total"},{nameEnglish:"Romania",nameGerman:"Rum\xE4nien",isoAlpha3:"ROU",originalText:"Rum\xE4nien \u2013 die folgenden Gebiete (\u201EKreise\u201C) gelten derzeit als Risikogebiete:",originalHtml:"<p>Rum&#xE4;nien &#x2013; die folgenden Gebiete (&#x201E;Kreise&#x201C;) gelten derzeit als Risikogebiete:</p>\n<ul><li>Arges (seit 7. August)</li><li>Bac&#x103;u (seit 12. August)</li><li>Bihor (seit 7. August)</li><li>Br&#x103;ila (seit 12. August)</li><li>Bra&#x219;ov (seit 12. August)</li><li>Bucure&#x219;ti (seit 12. August)</li><li>D&#xE2;mbovi&#x21B;a (seit 12. August)</li><li>Iasi (seit 9. September)</li><li>Ilfov (seit 12. August)</li><li>Prahova (seit 12. August)</li><li>V&#xE2;lcea (seit 20. August)</li><li>Vaslui (seit 12. August)</li></ul>\n",blocked:"partial"},{nameEnglish:"Russia",nameGerman:"Russische F\xF6deration",isoAlpha3:"RUS",originalText:"Russische F\xF6deration (seit 15. Juni)",originalHtml:"Russische F&#xF6;deration (seit 15. Juni)",blocked:"total"},{nameEnglish:"Saint Kitts and Nevis",nameGerman:"Sankt Kitts und Nevis",isoAlpha3:"KNA",originalText:"Sankt Kitts und Nevis (seit 16. Juni)",originalHtml:"Sankt Kitts und Nevis (seit 16. Juni)",blocked:"total"},{nameEnglish:"Saint Lucia",nameGerman:"Saint Lucia",isoAlpha3:"LCA",originalText:"Saint Lucia (seit 15. Juni)",originalHtml:"Saint Lucia (seit 15. Juni)",blocked:"total"},{nameEnglish:"Zambia",nameGerman:"Sambia",isoAlpha3:"ZMB",originalText:"Sambia (seit 15. Juni)",originalHtml:"Sambia (seit 15. Juni)",blocked:"total"},{nameEnglish:"Sao Tome and Principe",nameGerman:"S\xE3o Tom\xE9 und Pr\xEDncipe",isoAlpha3:"STP",originalText:"S\xE3o Tom\xE9 und Pr\xEDncipe (seit 16. Juni)",originalHtml:"S&#xE3;o Tom&#xE9; und Pr&#xED;ncipe (seit 16. Juni)",blocked:"total"},{nameEnglish:"Saudi Arabia",nameGerman:"Saudi Arabien",isoAlpha3:"SAU",originalText:"Saudi Arabien (seit 15. Juni)",originalHtml:"Saudi Arabien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Switzerland",nameGerman:"Schweiz",isoAlpha3:"CHE",originalText:"Schweiz \u2013 folgenden Kantone gelten als Risikogebiete:",originalHtml:"<p>Schweiz &#x2013; folgenden Kantone gelten als Risikogebiete:</p>\n<ul><li>Genf (seit 9. September)</li><li>Waadt (Vaud) (seit 9. September)</li></ul>\n",blocked:"partial"},{nameEnglish:"Senegal",nameGerman:"Senegal",isoAlpha3:"SEN",originalText:"Senegal (seit 15. Juni)",originalHtml:"Senegal (seit 15. Juni)",blocked:"total"},{nameEnglish:"Serbia",nameGerman:"Serbien",isoAlpha3:"SRB",originalText:"Serbien (seit 15. Juni)",originalHtml:"Serbien (seit 15. Juni)",blocked:"total"},{nameEnglish:"Seychelles",nameGerman:"Seychellen",isoAlpha3:"SYC",originalText:"Seychellen (seit 17. Juli)",originalHtml:"Seychellen (seit 17. Juli)",blocked:"total"},{nameEnglish:"Sierra Leone",nameGerman:"Sierra Leone",isoAlpha3:"SLE",originalText:"Sierra Leone (seit 15. Juni)",originalHtml:"Sierra Leone (seit 15. Juni)",blocked:"total"},{nameEnglish:"Zimbabwe",nameGerman:"Simbabwe",isoAlpha3:"ZWE",originalText:"Simbabwe (seit 15. Juni)",originalHtml:"Simbabwe (seit 15. Juni)",blocked:"total"},{nameEnglish:"Somalia",nameGerman:"Somalia",isoAlpha3:"SOM",originalText:"Somalia (seit 15. Juni)",originalHtml:"Somalia (seit 15. Juni)",blocked:"total"},{nameEnglish:"Spain",nameGerman:"Spanien - ganz Spanien, einschl. Kanarische Inseln",isoAlpha3:"ESP",originalText:"Spanien - ganz Spanien, einschl. Kanarische Inseln (seit 2. September)",originalHtml:"Spanien - ganz Spanien, einschl. Kanarische Inseln (seit 2. September)",blocked:"total"},{nameEnglish:"Sri Lanka",nameGerman:"Sri Lanka",isoAlpha3:"LKA",originalText:"Sri Lanka (seit 15. Juni)",originalHtml:"Sri Lanka (seit 15. Juni)",blocked:"total"},{nameEnglish:"South Africa",nameGerman:"S\xFCdafrika",isoAlpha3:"ZAF",originalText:"S\xFCdafrika (seit 15. Juni)",originalHtml:"S&#xFC;dafrika (seit 15. Juni)",blocked:"total"},{nameEnglish:"Sudan",nameGerman:"Sudan",isoAlpha3:"SDN",originalText:"Sudan (seit 15. Juni)",originalHtml:"Sudan (seit 15. Juni)",blocked:"total"},{nameEnglish:"South Sudan",nameGerman:"S\xFCdsudan",isoAlpha3:"SSD",originalText:"S\xFCdsudan (seit 15. Juni)",originalHtml:"S&#xFC;dsudan (seit 15. Juni)",blocked:"total"},{nameEnglish:"Suriname",nameGerman:"Surinam",isoAlpha3:"SUR",originalText:"Surinam (seit 15. Juni)",originalHtml:"Surinam (seit 15. Juni)",blocked:"total"},{nameEnglish:"Syrian Arab Republic",nameGerman:"Syrische Arabische Republik",isoAlpha3:"SYR",originalText:"Syrische Arabische Republik (seit 15. Juni)",originalHtml:"Syrische Arabische Republik (seit 15. Juni)",blocked:"total"},{nameEnglish:"Tajikistan",nameGerman:"Tadschikistan",isoAlpha3:"TJK",originalText:"Tadschikistan (seit 15. Juni)",originalHtml:"Tadschikistan (seit 15. Juni)",blocked:"total"},{nameEnglish:"Tanzania",nameGerman:"Tansania",isoAlpha3:"TZA",originalText:"Tansania (seit 15. Juni)",originalHtml:"Tansania (seit 15. Juni)",blocked:"total"},{nameEnglish:"Czech Republic",nameGerman:"Tschechien - die Stadtregion Prag gilt als Risikogebiet",isoAlpha3:"CZE",originalText:"Tschechien - die Stadtregion Prag gilt als Risikogebiet (seit 9. September)",originalHtml:"Tschechien - die Stadtregion Prag gilt als Risikogebiet (seit 9. September)",blocked:"total"},{nameEnglish:"Timor-Leste",nameGerman:"Timor Leste (Osttimor)",isoAlpha3:"TLS",originalText:"Timor Leste (Osttimor) (seit 17. Juni)",originalHtml:"Timor Leste (Osttimor) (seit 17. Juni)",blocked:"total"},{nameEnglish:"Togo",nameGerman:"Togo",isoAlpha3:"TGO",originalText:"Togo (seit 15. Juni)",originalHtml:"Togo (seit 15. Juni)",blocked:"total"},{nameEnglish:"Trinidad and Tobago",nameGerman:"Trinidad Tobago",isoAlpha3:"TTO",originalText:"Trinidad Tobago (seit 15. Juni)",originalHtml:"Trinidad Tobago (seit 15. Juni)",blocked:"total"},{nameEnglish:"Chad",nameGerman:"Tschad",isoAlpha3:"TCD",originalText:"Tschad (seit 15. Juni)",originalHtml:"Tschad (seit 15. Juni)",blocked:"total"},{nameEnglish:"Turkey",nameGerman:"T\xFCrkei",isoAlpha3:"TUR",originalText:"T\xFCrkei (seit 15. Juni)",originalHtml:"T&#xFC;rkei (seit 15. Juni)",blocked:"total"},{nameEnglish:"Turkmenistan",nameGerman:"Turkmenistan",isoAlpha3:"TKM",originalText:"Turkmenistan (seit 17. Juni)",originalHtml:"Turkmenistan (seit 17. Juni)",blocked:"total"},{nameEnglish:"Ukraine",nameGerman:"Ukraine",isoAlpha3:"UKR",originalText:"Ukraine (seit 15. Juni)",originalHtml:"Ukraine (seit 15. Juni)",blocked:"total"},{nameEnglish:"United States",nameGerman:"USA",isoAlpha3:"USA",originalText:"USA (seit 3. Juli gesamte USA)",originalHtml:"USA (seit 3. Juli gesamte USA)",blocked:"total"},{nameEnglish:"Uzbekistan",nameGerman:"Usbekistan",isoAlpha3:"UZB",originalText:"Usbekistan (seit 15. Juni)",originalHtml:"Usbekistan (seit 15. Juni)",blocked:"total"},{nameEnglish:"Venezuela",nameGerman:"Venezuela",isoAlpha3:"VEN",originalText:"Venezuela (seit 15. Juni)",originalHtml:"Venezuela (seit 15. Juni)",blocked:"total"},{nameEnglish:"United Kingdom",nameGerman:"Vereinigtes K\xF6nigreich von Gro\xDFbritannien und Nordirland",isoAlpha3:"GBR",originalText:"Vereinigtes K\xF6nigreich von Gro\xDFbritannien und Nordirland \u2013 das folgende britische \xDCberseegebiet gilt derzeit als Risikogebiet:",originalHtml:"<p>Vereinigtes K&#xF6;nigreich von Gro&#xDF;britannien und Nordirland &#x2013; das folgende britische &#xDC;berseegebiet gilt derzeit als Risikogebiet:</p>\n<ul><li>Gibraltar (seit 26. August)</li></ul>\n",blocked:"partial"},{nameEnglish:"Central African Republic",nameGerman:"Zentralafrikanische Republik",isoAlpha3:"CAF",originalText:"Zentralafrikanische Republik (seit 15. Juni)",originalHtml:"Zentralafrikanische Republik (seit 15. Juni)",blocked:"total"}];var Yd={default:"#e8e8e8",totalBlocked:"rgba(255,101,80,1)",partialBlocked:"#ffbf00"},Wn="\n    <h3>This is an opensource project that shows international risk areas according to <a target=\"_blank\" href=\"https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Risikogebiete_neu.html\">\xA9 Robert Koch-Institut</a></h3>\n    <p>This website is not related by any means with the German government and the information in this website can contain errors or be outdated.<br />\n    Please check <a target=\"_blank\" href=\"https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Risikogebiete_neu.html\">\xA9 Robert Koch-Institut</a> website for up to date information.</p>\n    <small>Last updated: ".concat(Vn," CET</small>\n<!--    <p>This website will update automatically every day at 0:00 CET</p>-->\n<!--    <p>If you want to contribute, please check the [Github repository](https://github.com/lucasfsousa/covid19-risk-areas-rki).</p>-->\n    "),Xn=function(){var e=new Af({element:document.getElementById("riskAreaContainer"),autoPan:!0,autoPanAnimation:{duration:200}}),t=new jc({fill:new ic({color:Yd.default}),stroke:new Pc({color:"#202020",width:.5}),text:new sn({font:"1.5ex Helvetica",fill:new ic({color:"#000"})})}),r=new mc({source:new oc({attributions:Wn,url:"countries.geojson",format:new oh}),style:function(e){var r=hj.find(function(t){return t.isoAlpha3===e.getId()});return r?"total"===r.blocked?t.getFill().setColor(Yd.totalBlocked):t.getFill().setColor(Yd.partialBlocked):t.getFill().setColor(Yd.default),t.getText().setText(""),t}}),o=new wd({center:oe([12,30],"EPSG:4326","EPSG:3857"),zoom:1}),a=new gj({layers:[r],controls:Yh({attributionOptions:{collapsible:!0,collapsed:!1}}),overlays:[e],target:"map",view:o}),i=document.getElementById("riskAreaClose");i.onclick=function(){return e.setPosition(void 0),i.blur(),!1},a.on("singleclick",function(t){var r=a.forEachFeatureAtPixel(t.pixel,function(e){return e});if(r){var o=hj.find(function(e){return e.isoAlpha3===r.getId()}),i="<strong>".concat(r.get("name"),"</strong><br/>");i+=o?"<code>".concat(o.originalHtml,"</code>"):"is not on the list as an international risk area",document.getElementById("riskAreaContent").innerHTML=i,e.setPosition(t.coordinate)}})};Xn();})();